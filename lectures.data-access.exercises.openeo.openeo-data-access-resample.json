{"version":3,"kind":"Notebook","sha256":"cbde8b9724bde62702a4b74e019642d4618c9db3fcda4f1e7ac13f85bf1b712d","slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","location":"/lectures/2.3_data_access/exercises/openeo/23_openeo_data_access_resample.ipynb","dependencies":[],"frontmatter":{"title":"2.3 Data Access and Basic Processing","content_includes_title":true,"kernelspec":{"name":"conda-env-cubes-and-clouds-cubes-and-clouds-cubes_and_clouds_new-py","display_name":"cubes-and-clouds-cubes-and-clouds-cubes_and_clouds_new","language":"python"},"github":"https://github.com/EO-college/cubes-and-clouds","subject":"Cubes and Clouds learning materials","numbering":{"title":{"offset":3}},"source_url":"https://github.com/EO-college/cubes-and-clouds/blob/main/lectures/2.3_data_access/exercises/openeo/23_openeo_data_access_resample.ipynb","edit_url":"https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/2.3_data_access/exercises/openeo/23_openeo_data_access_resample.ipynb","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","exports":[{"format":"ipynb","filename":"23_openeo_data_access_resample.ipynb","url":"/cubes-and-clouds/build/23_openeo_data_acces-c8e1f17e6aad01730cdac79e71d7387f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","children":[{"type":"image","style":{"float":"center","marginRight":"10px","marginLeft":"10px","maxHeight":"250px"},"url":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","alt":"Cubes & Clouds logo","key":"OrgGjyKLei","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/main/icons/cnc_3icons_process_circle.svg"}],"key":"e24dzaPLhx"}],"key":"SZF73QjHcd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.3 Data Access and Basic Processing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hFfJdFyZ6Z"}],"identifier":"id-2-3-data-access-and-basic-processing","label":"2.3 Data Access and Basic Processing","html_id":"id-2-3-data-access-and-basic-processing","implicit":true,"key":"BNTFxEAlGa"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"image","style":{"float":"center","marginRight":"10px","maxHeight":"100px"},"url":"/cubes-and-clouds/build/7d92286654718ed077e8b148b8c89bdd.png","alt":"openEO logo","key":"lS3u3ah5eR","urlSource":"https://openeo.org/images/openeo_logo.png"}],"key":"oDFqa21USS"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Resample Operators with openEO","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JA2jXzUx7D"}],"identifier":"resample-operators-with-openeo","label":"Resample Operators with openEO","html_id":"resample-operators-with-openeo","implicit":true,"key":"XOQ7nAWZev"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Sometimes we need to align the spatial or temporal dimension of two datacubes, so that they can be merged together.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"V11thw3EBZ"}],"key":"XMT5aHXhpA"}],"key":"fY3t9SrkdZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"resample_cube_spatial","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TOHmcOPmXS"},{"type":"text","value":": spatial resampling Sentinel-2 to match Landsat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CGh8zkavAU"}],"identifier":"resample-cube-spatial-spatial-resampling-sentinel-2-to-match-landsat","label":"resample_cube_spatial: spatial resampling Sentinel-2 to match Landsat","html_id":"resample-cube-spatial-spatial-resampling-sentinel-2-to-match-landsat","implicit":true,"key":"ozueZmuJnT"}],"key":"sAkucNph0z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Start importing the necessary libraries and initialize a local connection for Client-Side Processing.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"df7XscOFrG"}],"key":"xjK3rUZSHh"}],"key":"h2dhjYOPdT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import openeo\nfrom openeo.local import LocalConnection\nlocal_conn = LocalConnection('')","visibility":"show","key":"RlrkSiyD4N"},{"type":"outputs","id":"cLOpgg1UiaP1CyoozIoQd","children":[],"visibility":"show","key":"dKAfCmDqtH"}],"visibility":"show","key":"nZDPeswzyf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create two datacubes, one for Sentinel-2 and one for Landsat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xCQwIcYyLn"}],"key":"fr288PGWK2"}],"key":"hkwGvkTlG3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"spatial_extent = {\"west\": 11.4, \"east\": 11.42, \"south\": 45.5, \"north\": 45.52}\ntemporal_extent = [\"2023-06-01\", \"2023-06-30\"]","key":"wgIgCp6bwB"},{"type":"outputs","id":"lBbK8ixbdA0yPIUHPpLvG","children":[],"key":"CY6y1bKdO3"}],"key":"Wudh1gJI0b"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Datacube for Sentinel-2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aCDBo3wqhP"}],"key":"N1ng8G1Kl9"}],"key":"VLJVXSRGT4"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"url = \"https://earth-search.aws.element84.com/v1/collections/sentinel-2-l2a\"\nbands = [\"red\",\"nir\"]\ns2_cube = local_conn.load_stac(url=url,\n   spatial_extent=spatial_extent,\n   temporal_extent=temporal_extent,\n   bands=bands\n)\ns2_cube.execute()","visibility":"show","key":"vEXBw4h97A"},{"type":"outputs","id":"XrQVnWT0vFgmRHHgBJJIc","children":[],"visibility":"show","key":"ZENzbxJCJo"}],"visibility":"show","key":"SvOCo7cNXW"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Datacube for Landsat","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"im4p4FOiBX"}],"key":"PQlfQ9056c"}],"key":"ir86gFH46F"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"url = \"https://planetarycomputer.microsoft.com/api/stac/v1/collections/landsat-c2-l2\"\nbands = [\"red\",\"nir08\"]\nl8_cube = local_conn.load_stac(url=url,\n                    spatial_extent=spatial_extent,\n                    temporal_extent=temporal_extent,\n                    bands=bands)\nl8_cube.execute()","visibility":"show","key":"DCEfllv5po"},{"type":"outputs","id":"FW6uAhBzsDJed_diXb3JW","children":[],"visibility":"show","key":"LgTA9YqILS"}],"visibility":"show","key":"rEVWPUHY2t"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"From the previous outputs, notice the shape difference in the spatial dimensions ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mgkli8JlNf"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w7lFlN4MAh"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w4dtwgqjJP"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LCOgdOGNL3"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tpSsYJbNzz"}],"key":"mKEKGFQ9Dz"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This is due to the different resolution of the two collections: 10m for Sentinel-2, 30m for Landsat.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GeAKTvM9ER"}],"key":"sB0IdA26VT"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Now we use the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Va8GmDB6Y7"},{"type":"inlineCode","value":"resample_cube_spatial","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ox9VWDF97P"},{"type":"text","value":" process to resample the Sentinel-2 data to match Landsat.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Sv44sOMTjK"}],"key":"c0ha4hRY5p"}],"key":"uq25czULg0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"s2_cube_30m = s2_cube.resample_cube_spatial(target=l8_cube,method=\"average\")\ns2_cube_30m","visibility":"show","key":"aIdxKGXBxK"},{"type":"outputs","id":"V-2gDHbQzuMli1BLZYTID","children":[],"visibility":"show","key":"nFMPYqpWAu"}],"visibility":"show","key":"DPFemqhrdf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check what happens to the datacube inspecting the resulting xArray object. Now the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hYHW4VWALY"},{"type":"inlineCode","value":"x","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eS9NY1Tl7B"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Dn8tjpODf3"},{"type":"inlineCode","value":"y","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xBZEeDMuzD"},{"type":"text","value":" shape is the same as Landsat:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hnG59nVqHz"}],"key":"XEkxo5AghF"}],"key":"UZEI8Jc208"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"s2_cube_30m.execute()","visibility":"show","key":"E6zWSdkavf"},{"type":"outputs","id":"ZeyyreA4rYa7EKm8GHXSj","children":[],"visibility":"show","key":"IITgRx2QWP"}],"visibility":"show","key":"XhgyBNOFB8"}],"key":"GOTalrb56O"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"2.3 Data Access and Basic Processing","url":"/lectures/data-access/exercises/openeo/openeo-data-access-filter","group":"Data access with OpenEO"},"next":{"title":"2.3 Data Access and Basic Processing","url":"/lectures/data-access/exercises/openeo/openeo-data-access-aggregate","group":"Data access with OpenEO"}}},"domain":"http://localhost:3000"}