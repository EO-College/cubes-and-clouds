<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Sentinel-2 snow cover area (SCA) time series - Cubes and Clouds Notebooks</title><meta property="og:title" content="Sentinel-2 snow cover area (SCA) time series - Cubes and Clouds Notebooks"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of Cubes and Clouds learning notebooks"/><meta property="og:description" content="Collection of Cubes and Clouds learning notebooks"/><meta name="keywords" content=""/><meta name="image" content="/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg"/><meta property="og:image" content="/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/app-OIHP3NGU.css"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/cubes-and-clouds/favicon.ico"/><link rel="stylesheet" href="/cubes-and-clouds/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block lg:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/cubes-and-clouds/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] lg:hidden hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="myst-fm-block-subject flex-none pr-2 smallcaps">Cubes and Clouds learning materials</div><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/EO-college/cubes-and-clouds" title="GitHub Repository: EO-college/cubes-and-clouds" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/9.9_master_asi_conae/s2_sca.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Sentinel-2 snow cover area (SCA) time series</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="GfAr7GfSho" class="myst-jp-nb-block relative group/block"><p>This notebook will show how to generate a snow cover area time series for a given catchment of interest from Sentinel-2 images.</p></div><div id="ILfz3xxvqm" class="myst-jp-nb-block relative group/block"><h2 id="importing-dependencies" class="relative group"><span class="heading-text">Importing dependencies</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#importing-dependencies" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="Z6jxC3gJDd" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># xcube_sh imports
from xcube_sh.cube import open_cube
from xcube_sh.config import CubeConfig
from xcube_sh.sentinelhub import SentinelHub

# xcube imports
from xcube.core.geom import mask_dataset_by_geometry

# Various utilities
from datetime import date
import numpy as np
import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt

import folium</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="05X7As68p14F0c2RZVnuJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ccm9cU06oS" class="myst-jp-nb-block relative group/block"><h2 id="select-a-region-of-interest" class="relative group"><span class="heading-text">Select a region of interest</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#select-a-region-of-interest" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="nd39N5uITL" class="myst-jp-nb-block relative group/block"><p>Load and visualize a test catchment outline which will be used as a reogion of interest in this example</p></div><div id="CMofSggUjq" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">catchment_outline = gpd.read_file(&#x27;catchment_outline.geojson&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="yPkkChq8cXk7K7201z1VH" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zR7kQzJHfL" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])
folium.GeoJson(data=catchment_outline.to_json(), name=&#x27;catchment&#x27;).add_to(m)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="VWRtaT7MHzvEypIv1hA7e" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>/tmp/ipykernel_72/1928884253.py:1: UserWarning: Geometry is in a geographic CRS. Results from &#x27;centroid&#x27; are likely incorrect. Use &#x27;GeoSeries.to_crs()&#x27; to re-project geometries to a projected CRS before this operation.

  m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])
/tmp/ipykernel_72/1928884253.py:1: UserWarning: Geometry is in a geographic CRS. Results from &#x27;centroid&#x27; are likely incorrect. Use &#x27;GeoSeries.to_crs()&#x27; to re-project geometries to a projected CRS before this operation.

  m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])
</span></code></pre></div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="I6TrFPW4l9" class="myst-jp-nb-block relative group/block"><h2 id="configuring-the-data-content-of-the-cube" class="relative group"><span class="heading-text">Configuring the data content of the cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#configuring-the-data-content-of-the-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="O6MMLowIfZ" class="myst-jp-nb-block relative group/block"><p>We need to set the following configuration input variable to define the content of the data cube we want to access</p><ul><li><p>dataset name</p></li><li><p>band names</p></li><li><p>time range</p></li><li><p>the area of interest specifed via bounding box coordinates</p></li><li><p>spatial resolution</p></li></ul><p>To select the correct dataset we can first list all the available dataset:</p></div><div id="nc61fjj30H" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SH = SentinelHub()
SH.dataset_names</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="oSnzdkXjVFrfhSpCiHHKd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>[&#x27;LETML1&#x27;,
 &#x27;LOTL1&#x27;,
 &#x27;LETML2&#x27;,
 &#x27;CUSTOM&#x27;,
 &#x27;LMSSL1&#x27;,
 &#x27;LTML2&#x27;,
 &#x27;LOTL2&#x27;,
 &#x27;S3OLCI&#x27;,
 &#x27;S3SLSTR&#x27;,
 &#x27;DEM&#x27;,
 &#x27;MODIS&#x27;,
 &#x27;S5PL2&#x27;,
 &#x27;HLS&#x27;,
 &#x27;LTML1&#x27;,
 &#x27;S1GRD&#x27;,
 &#x27;S2L2A&#x27;,
 &#x27;S2L1C&#x27;]</span></code></div></div></div><div id="ussPeO8R8A" class="myst-jp-nb-block relative group/block"><p>We want to use the Sentinel-2 L2A product. Then the configuration variable <code>dataset_name</code> can be set equal to <code>&#x27;S2L2A&#x27;</code>.</p><p>Then we can visualize all the bands for the S2L2A dataset (the documentation to this dataset can be read at <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l2a/" class="link">https://<wbr/>docs<wbr/>.sentinel<wbr/>-hub<wbr/>.com<wbr/>/api<wbr/>/latest<wbr/>/data<wbr/>/sentinel<wbr/>-2<wbr/>-l2a/<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="external-link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>):</p></div><div id="nIKDPT1rZU" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SH.band_names(&#x27;S2L2A&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="G3xd672wwddpNr8yAoK9l" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>[&#x27;B01&#x27;,
 &#x27;B02&#x27;,
 &#x27;B03&#x27;,
 &#x27;B04&#x27;,
 &#x27;B05&#x27;,
 &#x27;B06&#x27;,
 &#x27;B07&#x27;,
 &#x27;B08&#x27;,
 &#x27;B8A&#x27;,
 &#x27;B09&#x27;,
 &#x27;B11&#x27;,
 &#x27;B12&#x27;,
 &#x27;SCL&#x27;,
 &#x27;SNW&#x27;,
 &#x27;CLD&#x27;,
 &#x27;viewZenithMean&#x27;,
 &#x27;viewAzimuthMean&#x27;,
 &#x27;sunZenithAngles&#x27;,
 &#x27;sunAzimuthAngles&#x27;,
 &#x27;AOT&#x27;,
 &#x27;CLM&#x27;,
 &#x27;CLP&#x27;]</span></code></div></div></div><div id="Y8cnURL6cs" class="myst-jp-nb-block relative group/block"><p>As a time range we will focus on the snow melting season 2018, in particular from Febraury to June 2018:</p></div><div id="B8BPE4S253" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">start_date = date(2018, 2, 1)
end_date = date(2018, 6, 30)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="VrUL-W8tv75047bEdUc4F" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Xi7g37E160" class="myst-jp-nb-block relative group/block"><p>Now we need to extract the bounding box of the catchment outline, which will be used to access the needed Sentinel-2 data in our region of interest</p></div><div id="o9ZmGHE0Eo" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">bbox = catchment_outline.bounds.iloc[0]
bbox</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="CRuBLDziL8fKVxX4KetsF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>minx    11.020833
miny    46.653599
maxx    11.366667
maxy    46.954167
Name: 0, dtype: float64</span></code></div></div></div><div id="dLjfhSBIcs" class="myst-jp-nb-block relative group/block"><h2 id="create-a-sentinel-2-rgb" class="relative group"><span class="heading-text">Create a Sentinel-2 RGB</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#create-a-sentinel-2-rgb" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="xr4gZlOBYg" class="myst-jp-nb-block relative group/block"><p>As a first step we will create a RGB data cube from Sentinel-2, including a cloud cover map (CLM). This can be useful to visualize the Sentinel-2 images for some specific date. The spatial resolution set for this cube will be 0.00018 degree, which correspond roughly to the native 10 meter resolution of the Sentinel-2 visible bands (B02: blue, B03: green, B04: red)</p></div><div id="D7pzuPH57h" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_config_s2rgb = CubeConfig(
    dataset_name=&#x27;S2L2A&#x27;,
    band_names=[&#x27;B02&#x27;, &#x27;B03&#x27;, &#x27;B04&#x27;, &#x27;CLM&#x27;],
    bbox=bbox.tolist(),
    spatial_res=0.00018,
    time_range=[start_date.strftime(&quot;%Y-%m-%d&quot;), end_date.strftime(&quot;%Y-%m-%d&quot;)]
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="7pWB0bMq4yRhKqNL7B12b" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>/home/conda/master-asi-conae/315434deb1b1e05eacacc41e1b0529b1837100f46402a32041d77ba54ae6c5f3-20230213-125825-013239-74-edc-2022.10-14/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units &#x27;M&#x27;, &#x27;Y&#x27; and &#x27;y&#x27; do not represent unambiguous timedelta values and will be removed in a future version.
  time_tolerance = pd.to_timedelta(time_tolerance)
</span></code></pre></div></div></div></div><div id="GBflZhMcxv" class="myst-jp-nb-block relative group/block"><p>Loading the data into the cube</p></div><div id="IyJw4e20xF" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb = open_cube(cube_config_s2rgb)
cube_s2rgb</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="j7jTXEzD-R_9lf8yFob5q" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="DloOUR7Dm3" class="myst-jp-nb-block relative group/block"><p>Show the date list of the data in the cube</p></div><div id="zXrSloOHa9" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb.time</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ARvBvSKvtsC04ZQfEjF33" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="RFylobNaCu" class="myst-jp-nb-block relative group/block"><p>Show a band image for one date</p></div><div id="wv3ujIwso5" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb.B03.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Lut541jO1OJjA3pGeYsId" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="NJ4nwOQTnR" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb.B03.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow(vmin=0, vmax=0.5, cmap=&#x27;gray&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="hRQELQqrG1gbaVYbPx3xD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/ffa8a79cca96e9a41a673a384ad7031d.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="pjzBHGaYLU" class="myst-jp-nb-block relative group/block"><p>Show the RGB image for the same date</p></div><div id="MpQNEjkkBk" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb[[&#x27;B04&#x27;, &#x27;B03&#x27;, &#x27;B02&#x27;]].sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).to_array().plot.imshow(vmin=0, vmax=0.3)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="cP5WSTNYKHiActkN0Vf7U" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/0ed9d3d758b2a282ed6310a3b7e7daeb.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><div id="dESmA8Ijcf" class="myst-jp-nb-block relative group/block"><p>Show the cloud mask for the same date</p></div><div id="ORdL7fwF22" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb.CLM.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="FQ9Ekx-AIxSfVMZWvxbbz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/590ca92671487559b3407f32671dfbe1.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="TO8hFSBvPa" class="myst-jp-nb-block relative group/block"><p>Show a pixel time series for one band</p></div><div id="Bh9YD5mCk0" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2rgb.B03.sel(lat=46.8, lon=11.2, method=&#x27;nearest&#x27;).plot()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ZMnI3tn7eQ9rLUFRaqfJP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/0b096c6946f965855168cabbf0baa361.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><div id="Hcmhw1iNnt" class="myst-jp-nb-block relative group/block"><h2 id="create-the-snowmap-data-cube" class="relative group"><span class="heading-text">Create the snowmap data cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#create-the-snowmap-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="s4vPSKBcLK" class="myst-jp-nb-block relative group/block"><p>After cloud masking, snow map can be obtained by thresholding the Normalized Difference Snow Index (NDSI) which is computed as:</p><div id="CbNGJoRw9y" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>N</mi><mi>D</mi><mi>S</mi><mi>I</mi><mo>=</mo><mfrac><mrow><mi>G</mi><mi>R</mi><mi>E</mi><mi>E</mi><mi>N</mi><mo>−</mo><mi>S</mi><mi>W</mi><mi>I</mi><mi>R</mi></mrow><mrow><mi>G</mi><mi>R</mi><mi>E</mi><mi>E</mi><mi>N</mi><mo>+</mo><mi>S</mi><mi>W</mi><mi>I</mi><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">NDSI = \frac {GREEN - SWIR} {GREEN +SWIR}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1297em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">GREEN</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">GREEN</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#CbNGJoRw9y" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->1<!-- -->)</a></div></div><p>We will therefore create a Sentinel-2 data cube with bands B03 (green), B11 (SWIR) and the cloud mask (CLM). To speed up the computation of the SCA we will set the resolution equal to 0.0018 degrees, which correspond roughly to 100 m. This resolution is generally enough to get reliable estimate of snow cover area over a catchment.</p></div><div id="Gv2MstzICq" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_config_s2snowmap = CubeConfig(
    dataset_name=&#x27;S2L2A&#x27;,
    band_names=[&#x27;B03&#x27;, &#x27;B11&#x27;, &#x27;CLM&#x27;],
    bbox=bbox.tolist(),
    spatial_res=0.0018,
    time_range=[start_date.strftime(&quot;%Y-%m-%d&quot;), end_date.strftime(&quot;%Y-%m-%d&quot;)],
    downsampling=&#x27;BILINEAR&#x27;
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Y9TqqCYnNr8oRzX2jG2hB" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>/home/conda/master-asi-conae/315434deb1b1e05eacacc41e1b0529b1837100f46402a32041d77ba54ae6c5f3-20230213-125825-013239-74-edc-2022.10-14/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units &#x27;M&#x27;, &#x27;Y&#x27; and &#x27;y&#x27; do not represent unambiguous timedelta values and will be removed in a future version.
  time_tolerance = pd.to_timedelta(time_tolerance)
</span></code></pre></div></div></div></div><div id="RkigyArNTc" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap = open_cube(cube_config_s2snowmap)
cube_s2snowmap</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="v1u7sDO8ZZdfPxxzmj5YC" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="WCoXImuhWI" class="myst-jp-nb-block relative group/block"><p>Compute the NDSI and add it to the cube</p></div><div id="WLZ6clFUVV" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndsi=(cube_s2snowmap.B03 - cube_s2snowmap.B11) / (cube_s2snowmap.B03 + cube_s2snowmap.B11)

ndsi.attrs[&#x27;long_name&#x27;]=&#x27;Normalized Difference Snow Index&#x27;
ndsi.attrs[&#x27;units&#x27;]=&#x27;unitless&#x27;

cube_s2snowmap[&#x27;NDSI&#x27;]=ndsi</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="A-F9MeZD_7PLHWm299yh-" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="csgxpi978a" class="myst-jp-nb-block relative group/block"><p>Visualize an NDSI image for a specific date</p></div><div id="XzejOYoDZ5" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap.NDSI.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow(vmin=-1, vmax=1, cmap=&#x27;gray&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="FaysIyusAbxD78a3NQtwS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/279d8b8ae7ee7d04ce2d8a1ada7b138e.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="FciiCy4G2p" class="myst-jp-nb-block relative group/block"><p>Create the snow cover maps by setting a threshold equal to 0.4 on the NDSI</p></div><div id="TVCVj3fr7f" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"> cube_s2snowmap[&#x27;snowmap&#x27;] = cube_s2snowmap.NDSI &gt; 0.4</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="tH14kBxHE3SSpZez9zIzW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="rVn2SEgz3s" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="KW8wxFDQmTa2u9r-OTUvV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="FEODtE83TR" class="myst-jp-nb-block relative group/block"><p>Add the cloud mask</p></div><div id="TGqHOqxTpz" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap[&#x27;snowmap&#x27;] = cube_s2snowmap.snowmap.where(cube_s2snowmap.CLM==0) </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="iP8mxDUQc8qvrBrYAGrO0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wIlYhxnC6z" class="myst-jp-nb-block relative group/block"><p>Show a snow map (no snow = 0, snow = 1, cloud = NaN)</p></div><div id="fYTX86OK8g" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap.snowmap.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="eTG1Mj-02g9aYWrfjTqsw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/97095abd4685fe6634ad10dc1adf3837.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="Ecq3frUZy2" class="myst-jp-nb-block relative group/block"><h2 id="catchment-sca-time-series" class="relative group"><span class="heading-text">Catchment SCA time series</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#catchment-sca-time-series" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="QnSr91HAp8" class="myst-jp-nb-block relative group/block"><p>Mask with the catchment outline</p></div><div id="wuymQh1O86" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked = mask_dataset_by_geometry(cube_s2snowmap, catchment_outline.iloc[0].geometry)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="5chO6tkXZwmxj0TiWAL0w" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="fbSZaEIzt2" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked.snowmap.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="68ZV6igPjuIVGKutbvk2u" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/fdf539e6af5c9f4b4db6acfcb94e8f40.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="xrJCVXW4CH" class="myst-jp-nb-block relative group/block"><p>Compute the cloud percent in the catchment for each Sentinel-2 image</p></div><div id="EGJictlCgZ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">n_cloud = cube_s2snowmap_masked.CLM.sum(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])
n_cloud_valid = cube_s2snowmap_masked.CLM.count(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])

cube_s2snowmap_masked[&#x27;cloud_percent&#x27;] = n_cloud / n_cloud_valid * 100
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="6HlybeAzz8EZt_LCcSxLF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="XupYQpGOxK" class="myst-jp-nb-block relative group/block"><p>In order to get an accurate snow cover area estimation we want to keep only the Sentinel-2 images with a cloud percent in the catchment lower than 20%</p></div><div id="xTuO7eD9Sr" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked = cube_s2snowmap_masked.sel(time=cube_s2snowmap_masked.cloud_percent &lt; 20)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="x6_zVpVWzY2eyOW9Lti9P" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="cRBngLAREv" class="myst-jp-nb-block relative group/block"><p>For the remaining image we can then estimate the snow cover area</p></div><div id="rDQYgRfrD1" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">n_snow = cube_s2snowmap_masked.snowmap.sum(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])
n_snow_valid = cube_s2snowmap_masked.snowmap.count(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])

cube_s2snowmap_masked[&#x27;snow_percent&#x27;] = n_snow / n_snow_valid * 100</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="zfBeczSWHxHDY9ncyKRDl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kx9WeXuUlE" class="myst-jp-nb-block relative group/block"><p>The snow and cloud percentage value can be represented in a pandas DataFrame and saved as csv</p></div><div id="x1YouSBaP8" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sca_ts = cube_s2snowmap_masked[[&#x27;cloud_percent&#x27;, &#x27;snow_percent&#x27;]].to_dataframe()
sca_ts</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="gNPWMIPbo-7qtIRS3ByKk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="qB0GfQue01" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sca_ts[&#x27;snow_percent&#x27;].to_csv(&#x27;s2_sca_ts_cloudfree.csv&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="IoB3Qmj6QnhNP6ufZrrpg" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dwK1dwgws9" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sca_ts[&#x27;snow_percent&#x27;].plot(marker=&#x27;o&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="f90fqKv-xutWXCudOUxzx" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/b22ecfa29db4f7b0a6e4cdb7d485d82a.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><div id="GWhSVaBJEN" class="myst-jp-nb-block relative group/block"><h2 id="compare-the-evolution-of-sca-to-runoff" class="relative group"><span class="heading-text">Compare the evolution of SCA to runoff</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#compare-the-evolution-of-sca-to-runoff" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="kGmEmSsEIW" class="myst-jp-nb-block relative group/block"><p>In alpine catchment snow represent a major contribution to the runoff during the melting season. As a qualitative analysis we will plot the runoff time series for the selected catchment toghether with the SCA time series we derived from Sentinel-2. As soon as the SCA decreases due to melting, the snow melt contribution implies an increase of the runoff.</p><p>Load the runoff time series stored in the csv file:</p></div><div id="LXJu38is0U" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dsc = pd.read_csv(&#x27;ADO_DSC_ITH1_0025.csv&#x27;, sep=&#x27;,&#x27;, index_col=&#x27;Time&#x27;, parse_dates=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="9K4oxogI7Hi3l40Jj9q5v" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NFUwVzmHzL" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dsc</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="WtNiWuDsLccHlLUtukWr3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="XARyxSn9v7" class="myst-jp-nb-block relative group/block"><p>Select the runoff time series accordingly with the time period we used to estimate the Sentinel-2 SCA</p></div><div id="zvjpx8QOGX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dsc = dsc.loc[start_date:end_date]
dsc.plot()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="blWXj5tgYDlJFYGE2P7Xs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/0fea4cb7941ca5ff67f25e18df0efb12.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><div id="IijArUs9wj" class="myst-jp-nb-block relative group/block"><p>Plot the runoff (left axes, blue line) toghether with the Sentinel-2 SCA (right axes, orange line)</p></div><div id="xOkJnl568N" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ax1 = dsc.discharge_m3_s.plot(label=&#x27;Discharge&#x27;, xlabel=&#x27;&#x27;, ylabel=&#x27;Discharge (m$^3$/s)&#x27;)
ax2 = sca_ts.snow_percent.plot(marker=&#x27;o&#x27;, secondary_y=True, label=&#x27;SCA&#x27;, xlabel=&#x27;&#x27;, ylabel=&#x27;Snow cover area (%)&#x27;)

ax1.legend(loc=&#x27;center left&#x27;, bbox_to_anchor=(0, 0.6))
ax2.legend(loc=&#x27;center left&#x27;, bbox_to_anchor=(0, 0.5))

plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="2otvOET-hqSQz8v0zYWS0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/71fe6288debc9272e7f374a231b989de.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="ndTgtNtfJX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="9E7Sigt5NXJVf8pYlAqaJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="WVbnewQqc1" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="IrGfWpXWSdWSS_wEoIBdK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="VbrH3zql8r" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Fdq6cu_efY_wRgASzW2SY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="yaLolgZAq6" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="FbaLD02lwoYlIBoPZ7CNN" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="IkUqDywcD7" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="eBm-G-3Dqh6ZNi1ePl5Me" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Bb8CLpPq7V" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap[&#x27;snowmap&#x27;] = cube_s2snowmap.snowmap.where(cube_s2snowmap.CLM==0, 2) </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ib_1JhVPZWRPT84SxP_aV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="X4QSboSgqJ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap.snowmap.sel(time=&#x27;2018-04-02T10:24:35.000000000&#x27;).plot.imshow()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="vr2xVT5jKKanmWoKJePd2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/95f5fbc8ab4d6c15184a5cbf45dfa301.png" alt="&lt;Figure size 640x480 with 2 Axes&gt;"/></div></div></div><div id="h5g8Ih2v3M" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked = mask_dataset_by_geometry(cube_s2snowmap, catchment_outline.iloc[0].geometry, save_geometry_mask=True)
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="rX-bIi3neBmSXX_SoQpIY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="cSL0e6N2MC" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked[&#x27;CLM&#x27;] = cube_s2snowmap_masked.CLM == 1
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="DLWiHmrWX9JmoGJENDh3h" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="ZYZnXJfGpu" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">n_cloud = cube_s2snowmap_masked.CLM.sum(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])
n_valid = cube_s2snowmap_masked.geometry_mask.sum(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])

cube_s2snowmap_masked[&#x27;cloud_percent&#x27;] = n_cloud / n_valid * 100
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="q0j4vZun2gGmMiy2gOLJ0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="IUpz7mQctM" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked = cube_s2snowmap_masked.sel(time=cube_s2snowmap_masked.cloud_percent &lt; 20)
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="MIP5V1MgkhAcC6ypfLO_G" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="xamMsgKw5Q" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">cube_s2snowmap_masked[&#x27;snowmap&#x27;] = cube_s2snowmap_masked.snowmap == 1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="5034ApwTbbhl8Ydf4UAug" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zO0xeCKJ2M" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">n_snow = cube_s2snowmap_masked.snowmap.sum(dim=[&#x27;lat&#x27;, &#x27;lon&#x27;])

cube_s2snowmap_masked[&#x27;snow_percent&#x27;] = n_snow / (n_valid - n_cloud) * 100
cube_s2snowmap_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="4Ofh8eUBFXoP1PM2SXaHI" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="SEuKFopkh5" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sca_ts = cube_s2snowmap_masked[[&#x27;cloud_percent&#x27;, &#x27;snow_percent&#x27;]].to_dataframe()
sca_ts</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="G7gb2tVrlgpak5pq04_1D" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="Nk3dzUq5gP" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="t8nxGJ5Y-MI_dqseyBxRt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div class="myst-backmatter-parts"></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/cubes-and-clouds/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-7UUHRSK3.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/root-EDJFWIEV.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-ECLX7DIY.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/routes/$-AD65NCUT.js"/><script>window.__remixContext = {"url":"/lectures/master-asi-conae/s2-sca","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-25993f9e8d7c992ba8e8ec5353e21e5a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-e5117a2c6a1fcd1fb634956300260e46.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Basic EO workflow"},{"level":4,"title":"EO workflow with STAC"},{"level":4,"title":"EO workflow with openEO"},{"level":4,"title":"Data sharing and publishing"},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-6edcd30651bc09e2430138f360c507ea.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise validation"},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise data sharing"},{"title":"Additional materials","level":2},{"slug":"lectures.master-asi-conae.s2-sca","title":"Sentinel-2 snow cover area (SCA) time series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.master-asi-conae.test.s1","title":"S1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s2-snowcover-test","title":"Sentinel-2 snow cover","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.test-s1-s3","title":"Sentinel-1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s3-ndsi","title":"List all the available dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/cubes-and-clouds"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-25993f9e8d7c992ba8e8ec5353e21e5a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-e5117a2c6a1fcd1fb634956300260e46.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Basic EO workflow"},{"level":4,"title":"EO workflow with STAC"},{"level":4,"title":"EO workflow with openEO"},{"level":4,"title":"Data sharing and publishing"},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-6edcd30651bc09e2430138f360c507ea.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise validation"},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise data sharing"},{"title":"Additional materials","level":2},{"slug":"lectures.master-asi-conae.s2-sca","title":"Sentinel-2 snow cover area (SCA) time series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.master-asi-conae.test.s1","title":"S1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s2-snowcover-test","title":"Sentinel-2 snow cover","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.test-s1-s3","title":"Sentinel-1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s3-ndsi","title":"List all the available dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"page":{"version":3,"kind":"Notebook","sha256":"e95d9bd78142632ed76cb69ef339e8a40d8c99e82026bd26b65d3478c8e36d71","slug":"lectures.master-asi-conae.s2-sca","location":"/lectures/9.9_master_asi_conae/s2_sca.ipynb","dependencies":[],"frontmatter":{"title":"Sentinel-2 snow cover area (SCA) time series","content_includes_title":false,"kernelspec":{"name":"conda-env-default-py","display_name":"default *","language":"python"},"github":"https://github.com/EO-college/cubes-and-clouds","subject":"Cubes and Clouds learning materials","numbering":{"title":{"offset":2}},"source_url":"https://github.com/EO-college/cubes-and-clouds/blob/main/lectures/9.9_master_asi_conae/s2_sca.ipynb","edit_url":"https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/9.9_master_asi_conae/s2_sca.ipynb","exports":[{"format":"ipynb","filename":"s2_sca.ipynb","url":"/cubes-and-clouds/build/s2_sca-836e8631ca6a9013f69b2f5a907b31e0.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This notebook will show how to generate a snow cover area time series for a given catchment of interest from Sentinel-2 images.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KqoEad4ip8"}],"key":"bXTZwVd44U"}],"key":"GfAr7GfSho"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Importing dependencies","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DAhC042UXW"}],"identifier":"importing-dependencies","label":"Importing dependencies","html_id":"importing-dependencies","implicit":true,"key":"TJ1wbi1eqC"}],"key":"ILfz3xxvqm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# xcube_sh imports\nfrom xcube_sh.cube import open_cube\nfrom xcube_sh.config import CubeConfig\nfrom xcube_sh.sentinelhub import SentinelHub\n\n# xcube imports\nfrom xcube.core.geom import mask_dataset_by_geometry\n\n# Various utilities\nfrom datetime import date\nimport numpy as np\nimport pandas as pd\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\n\nimport folium","key":"Z9eaAcFlwC"},{"type":"outputs","id":"05X7As68p14F0c2RZVnuJ","children":[],"key":"atDjPPNJDh"}],"key":"Z6jxC3gJDd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select a region of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T2P4daYMJV"}],"identifier":"select-a-region-of-interest","label":"Select a region of interest","html_id":"select-a-region-of-interest","implicit":true,"key":"lauSTVObJa"}],"key":"ccm9cU06oS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load and visualize a test catchment outline which will be used as a reogion of interest in this example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FXkNnaqe9E"}],"key":"JriEVwtxtk"}],"key":"nd39N5uITL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catchment_outline = gpd.read_file('catchment_outline.geojson')","key":"Rr7YlCb2G8"},{"type":"outputs","id":"yPkkChq8cXk7K7201z1VH","children":[],"key":"xt03Bo3Q5y"}],"key":"CMofSggUjq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])\nfolium.GeoJson(data=catchment_outline.to_json(), name='catchment').add_to(m)\nm","key":"YPAjVgtT57"},{"type":"outputs","id":"VWRtaT7MHzvEypIv1hA7e","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_72/1928884253.py:1: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.\n\n  m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])\n/tmp/ipykernel_72/1928884253.py:1: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.\n\n  m = folium.Map(location=[catchment_outline.centroid.y, catchment_outline.centroid.x])\n"},"children":[],"key":"iZllSJY6KI"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/html":{"content":"\u003cdiv style=\"width:100%;\"\u003e\u003cdiv style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"\u003e\u003cspan style=\"color:#565656\"\u003eMake this Notebook Trusted to load map: File -\u003e Trust Notebook\u003c/span\u003e\u003ciframe srcdoc=\"\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html\u0026gt;\n\u0026lt;head\u0026gt;\n    \n    \u0026lt;meta http-equiv=\u0026quot;content-type\u0026quot; content=\u0026quot;text/html; charset=UTF-8\u0026quot; /\u0026gt;\n    \n        \u0026lt;script\u0026gt;\n            L_NO_TOUCH = false;\n            L_DISABLE_3D = false;\n        \u0026lt;/script\u0026gt;\n    \n    \u0026lt;style\u0026gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}\u0026lt;/style\u0026gt;\n    \u0026lt;style\u0026gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}\u0026lt;/style\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://code.jquery.com/jquery-1.12.4.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css\u0026quot;/\u0026gt;\n    \n            \u0026lt;meta name=\u0026quot;viewport\u0026quot; content=\u0026quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no\u0026quot; /\u0026gt;\n            \u0026lt;style\u0026gt;\n                #map_e66e8444502749eea0129f39570ffc5a {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            \u0026lt;/style\u0026gt;\n        \n\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n    \n    \n            \u0026lt;div class=\u0026quot;folium-map\u0026quot; id=\u0026quot;map_e66e8444502749eea0129f39570ffc5a\u0026quot; \u0026gt;\u0026lt;/div\u0026gt;\n        \n\u0026lt;/body\u0026gt;\n\u0026lt;script\u0026gt;\n    \n    \n            var map_e66e8444502749eea0129f39570ffc5a = L.map(\n                \u0026quot;map_e66e8444502749eea0129f39570ffc5a\u0026quot;,\n                {\n                    center: [46.79856263096177, 11.177346530561929],\n                    crs: L.CRS.EPSG3857,\n                    zoom: 10,\n                    zoomControl: true,\n                    preferCanvas: false,\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_1b76f41eca50408b74380844d622d784 = L.tileLayer(\n                \u0026quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\u0026quot;,\n                {\u0026quot;attribution\u0026quot;: \u0026quot;Data by \\u0026copy; \\u003ca target=\\\u0026quot;_blank\\\u0026quot; href=\\\u0026quot;http://openstreetmap.org\\\u0026quot;\\u003eOpenStreetMap\\u003c/a\\u003e, under \\u003ca target=\\\u0026quot;_blank\\\u0026quot; href=\\\u0026quot;http://www.openstreetmap.org/copyright\\\u0026quot;\\u003eODbL\\u003c/a\\u003e.\u0026quot;, \u0026quot;detectRetina\u0026quot;: false, \u0026quot;maxNativeZoom\u0026quot;: 18, \u0026quot;maxZoom\u0026quot;: 18, \u0026quot;minZoom\u0026quot;: 0, \u0026quot;noWrap\u0026quot;: false, \u0026quot;opacity\u0026quot;: 1, \u0026quot;subdomains\u0026quot;: \u0026quot;abc\u0026quot;, \u0026quot;tms\u0026quot;: false}\n            ).addTo(map_e66e8444502749eea0129f39570ffc5a);\n        \n    \n\n        function geo_json_63e05984c60cdf9e686bf0473671a361_onEachFeature(feature, layer) {\n            layer.on({\n            });\n        };\n        var geo_json_63e05984c60cdf9e686bf0473671a361 = L.geoJson(null, {\n                onEachFeature: geo_json_63e05984c60cdf9e686bf0473671a361_onEachFeature,\n            \n        });\n\n        function geo_json_63e05984c60cdf9e686bf0473671a361_add (data) {\n            geo_json_63e05984c60cdf9e686bf0473671a361\n                .addData(data)\n                .addTo(map_e66e8444502749eea0129f39570ffc5a);\n        }\n            geo_json_63e05984c60cdf9e686bf0473671a361_add({\u0026quot;features\u0026quot;: [{\u0026quot;geometry\u0026quot;: {\u0026quot;coordinates\u0026quot;: [[[[11.075, 46.72916666666669], [11.072575547960094, 46.728813340928845], [11.069091118706622, 46.72535332573787], [11.048285590277802, 46.724646674262175], [11.042024739583358, 46.73087632921009], [11.041666666666691, 46.733333333333356], [11.038123575846377, 46.73424241807728], [11.0375, 46.74583333333336], [11.03664923773874, 46.74914923773874], [11.030017428927975, 46.75085076226131], [11.028599378797768, 46.756377156575546], [11.025567287868947, 46.76028951009117], [11.0244327121311, 46.76471048990888], [11.02140062120228, 46.7686228434245], [11.020833333333357, 46.77083333333336], [11.024291653103322, 46.77172071668839], [11.025567287868947, 46.781377156575545], [11.032766045464435, 46.78945617675784], [11.033900621202282, 46.79387715657555], [11.036932712131101, 46.79778951009117], [11.038067287868948, 46.80221048990888], [11.042586263020858, 46.80762905544707], [11.052210489908878, 46.808900621202284], [11.06028951009117, 46.816099378797766], [11.06471048990888, 46.81723395453562], [11.068622843424503, 46.820266045464436], [11.073043823242212, 46.82140062120228], [11.077974107530407, 46.82522176106773], [11.079733954535614, 46.83010389539933], [11.071295166015648, 46.83957451714412], [11.0744327121311, 46.843622843424505], [11.075567287868948, 46.846579996744815], [11.071400621202281, 46.85195617675784], [11.070266045464434, 46.859321424696205], [11.082766045464435, 46.872789510091174], [11.084041680230058, 46.882445949978326], [11.089710489908878, 46.88390062120228], [11.09995964898006, 46.89319695366756], [11.096400621202282, 46.89778951009117], [11.095266045464435, 46.91343722873266], [11.103599378797767, 46.92278951009117], [11.104166666666691, 46.929166666666696], [11.114924452039954, 46.92951999240454], [11.11875, 46.9333187527127], [11.12328694661461, 46.92881334092885], [11.139924452039956, 46.92951999240454], [11.143408881293428, 46.93298000759551], [11.148288302951414, 46.933691067165825], [11.157980007595512, 46.94340888129343], [11.158691406250025, 46.948290337456626], [11.16424221462676, 46.953813340928846], [11.166666666666693, 46.954166666666694], [11.167024739583358, 46.95170966254343], [11.172575547960095, 46.94618665907121], [11.177424452039956, 46.94548000759551], [11.180908881293428, 46.94201999240454], [11.185757785373289, 46.94131334092884], [11.189242214626761, 46.937853325737876], [11.194123670789956, 46.93714192708336], [11.199646674262178, 46.93159111870662], [11.200353325737872, 46.9100755479601], [11.204519992404538, 46.90587972005211], [11.203813340928845, 46.901742214626765], [11.199646674262178, 46.89754638671877], [11.200353325737872, 46.89340888129343], [11.203813340928845, 46.889924452039956], [11.204519992404538, 46.8850755479601], [11.21248609754777, 46.877084011501765], [11.208686659071207, 46.87325778537329], [11.208333333333359, 46.85833333333336], [11.210543823242213, 46.85776604546444], [11.214456176757839, 46.85473395453562], [11.231377156575547, 46.85359937879777], [11.239456176757837, 46.846400621202285], [11.260543823242212, 46.845266045464435], [11.26458333333336, 46.84213528103301], [11.26875, 46.84536471896704], [11.272789510091172, 46.842233954535615], [11.323043823242214, 46.84109937879777], [11.331122843424506, 46.83390062120228], [11.343877156575548, 46.83276604546444], [11.347789510091172, 46.82973395453561], [11.35331590440541, 46.82831590440541], [11.354733954535616, 46.82278951009117], [11.357766045464437, 46.818877156575546], [11.358900621202284, 46.81445617675784], [11.36609937879777, 46.80637715657554], [11.366666666666694, 46.80416666666669], [11.365779283311658, 46.80070834689673], [11.356122843424506, 46.7994327121311], [11.35208333333336, 46.796301947699675], [11.347916666666693, 46.799531385633706], [11.343877156575548, 46.79640062120228], [11.339456176757839, 46.79526604546444], [11.335543823242213, 46.79223395453562], [11.321806165907145, 46.79101189507381], [11.31306728786895, 46.781377156575545], [11.311932712131103, 46.776956176757835], [11.304733954535617, 46.76887715657555], [11.30359937879777, 46.76445617675784], [11.30056728786895, 46.760543823242216], [11.299149237738742, 46.75501742892798], [11.293622843424505, 46.753599378797766], [11.289710489908881, 46.75056728786895], [11.279166666666693, 46.75], [11.278813340928846, 46.73924221462676], [11.27464667426218, 46.73504638671878], [11.275353325737873, 46.73090888129343], [11.283319430881102, 46.722917344835096], [11.27951999240454, 46.71909111870662], [11.278813340928846, 46.705908881293425], [11.275353325737873, 46.702424452039956], [11.275, 46.7], [11.274032253689262, 46.69622938368058], [11.267413330078151, 46.691099378797766], [11.260289510091171, 46.69223395453562], [11.25491333007815, 46.69640062120228], [11.251956176757838, 46.695266045464436], [11.248043823242213, 46.69223395453562], [11.239456176757837, 46.691099378797766], [11.235543823242214, 46.68806728786895], [11.218622843424505, 46.6869327121311], [11.21471048990888, 46.683900621202284], [11.197789510091171, 46.68276604546443], [11.193877156575546, 46.679733954535614], [11.184220716688394, 46.67845831976999], [11.182413736979193, 46.671416219075546], [11.173043823242214, 46.66306728786895], [11.168622843424505, 46.6619327121311], [11.159270562065997, 46.653599378797765], [11.154985215928845, 46.655143907335095], [11.154166666666692, 46.65833333333336], [11.15085076226131, 46.65918409559464], [11.15, 46.6625], [11.150353325737871, 46.66909111870662], [11.155876329210095, 46.67464192708336], [11.160757785373288, 46.67535332573787], [11.166668023003497, 46.68123406304256], [11.162853325737872, 46.685075547960096], [11.162146674262178, 46.68992445203995], [11.15451999240454, 46.69757554796009], [11.153813340928846, 46.702424452039956], [11.148290337456622, 46.70797526041669], [11.143408881293428, 46.708686659071205], [11.139924452039956, 46.71214667426218], [11.122575547960095, 46.712853325737875], [11.119091118706622, 46.71631334092884], [11.11424221462676, 46.71701999240454], [11.110757785373288, 46.72048000759551], [11.10174221462676, 46.72118665907121], [11.098257785373288, 46.724646674262175], [11.085075547960095, 46.72535332573787], [11.081591118706623, 46.728813340928845], [11.075, 46.72916666666669]]]], \u0026quot;type\u0026quot;: \u0026quot;MultiPolygon\u0026quot;}, \u0026quot;id\u0026quot;: \u0026quot;0\u0026quot;, \u0026quot;properties\u0026quot;: {\u0026quot;COAST\u0026quot;: 0, \u0026quot;DIST_MAIN\u0026quot;: 334.5, \u0026quot;DIST_SINK\u0026quot;: 334.5, \u0026quot;ENDO\u0026quot;: 0, \u0026quot;HYBAS_ID\u0026quot;: 2090516090, \u0026quot;MAIN_BAS\u0026quot;: 2090012980, \u0026quot;NEXT_DOWN\u0026quot;: 2090516950, \u0026quot;NEXT_SINK\u0026quot;: 2090012980, \u0026quot;ORDER\u0026quot;: 3, \u0026quot;PFAF_ID\u0026quot;: 214040804, \u0026quot;SORT\u0026quot;: 10988, \u0026quot;SUB_AREA\u0026quot;: 419.1, \u0026quot;UP_AREA\u0026quot;: 419.2}, \u0026quot;type\u0026quot;: \u0026quot;Feature\u0026quot;}], \u0026quot;type\u0026quot;: \u0026quot;FeatureCollection\u0026quot;});\n\n        \n\u0026lt;/script\u0026gt;\n\u0026lt;/html\u0026gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cfolium.folium.Map at 0x7fd48ab6e490\u003e","content_type":"text/plain"}}},"children":[],"key":"JQATju0eNm"}],"key":"LPSwyxlPZo"}],"key":"zR7kQzJHfL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Configuring the data content of the cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Irji1BX2Cj"}],"identifier":"configuring-the-data-content-of-the-cube","label":"Configuring the data content of the cube","html_id":"configuring-the-data-content-of-the-cube","implicit":true,"key":"EldwxH4uyW"}],"key":"I6TrFPW4l9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We need to set the following configuration input variable to define the content of the data cube we want to access","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F0d7etUNmA"}],"key":"wkglZgjJL3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"dataset name","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OMvJiaFBqM"}],"key":"sxd8Nim279"}],"key":"DMpWNXY4jZ"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"band names","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UbU1lEEhRC"}],"key":"InsJJQ8a6f"}],"key":"pov5sQ7CQK"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"time range","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"aIcb6zZZ4e"}],"key":"JWRTcAYuB6"}],"key":"xgwB6Wqj5F"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"the area of interest specifed via bounding box coordinates","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FzFVquGu5N"}],"key":"QON5Xb94nd"}],"key":"J4r3KyaQE8"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"spatial resolution","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"U6a9gI6ch0"}],"key":"sjchyPMjEH"}],"key":"HEzkIBnWgE"}],"key":"Vu5tEqzQgn"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"To select the correct dataset we can first list all the available dataset:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"IOStD0SWTW"}],"key":"FF8xepbNuw"}],"key":"O6MMLowIfZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SH = SentinelHub()\nSH.dataset_names","key":"yXZ4awcct2"},{"type":"outputs","id":"oSnzdkXjVFrfhSpCiHHKd","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['LETML1',\n 'LOTL1',\n 'LETML2',\n 'CUSTOM',\n 'LMSSL1',\n 'LTML2',\n 'LOTL2',\n 'S3OLCI',\n 'S3SLSTR',\n 'DEM',\n 'MODIS',\n 'S5PL2',\n 'HLS',\n 'LTML1',\n 'S1GRD',\n 'S2L2A',\n 'S2L1C']","content_type":"text/plain"}}},"children":[],"key":"qp1laEU9qT"}],"key":"J46w8bQ43v"}],"key":"nc61fjj30H"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We want to use the Sentinel-2 L2A product. Then the configuration variable ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uwYw3A1Fig"},{"type":"inlineCode","value":"dataset_name","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RzOxpne32H"},{"type":"text","value":" can be set equal to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tbbd7mgO4C"},{"type":"inlineCode","value":"'S2L2A'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HKjJN4xKNH"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FtkFGVccsq"}],"key":"DRiWjzU1IG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Then we can visualize all the bands for the S2L2A dataset (the documentation to this dataset can be read at ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QAEhl7O1Rn"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l2a/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​docs​.sentinel​-hub​.com​/api​/latest​/data​/sentinel​-2​-l2a/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Nwhnxvcgyv"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l2a/","key":"UYCc4ZXzcC"},{"type":"text","value":"):","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dhuOViDqmJ"}],"key":"b5wVueSdxy"}],"key":"ussPeO8R8A"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"SH.band_names('S2L2A')","key":"mW9tMYc2IX"},{"type":"outputs","id":"G3xd672wwddpNr8yAoK9l","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"['B01',\n 'B02',\n 'B03',\n 'B04',\n 'B05',\n 'B06',\n 'B07',\n 'B08',\n 'B8A',\n 'B09',\n 'B11',\n 'B12',\n 'SCL',\n 'SNW',\n 'CLD',\n 'viewZenithMean',\n 'viewAzimuthMean',\n 'sunZenithAngles',\n 'sunAzimuthAngles',\n 'AOT',\n 'CLM',\n 'CLP']","content_type":"text/plain"}}},"children":[],"key":"fvnVFtQ1sn"}],"key":"c8PASydQgl"}],"key":"nIKDPT1rZU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As a time range we will focus on the snow melting season 2018, in particular from Febraury to June 2018:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VVxl2FScIV"}],"key":"FKJBDxrr7e"}],"key":"Y8cnURL6cs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"start_date = date(2018, 2, 1)\nend_date = date(2018, 6, 30)","key":"xhkWxll6jo"},{"type":"outputs","id":"VrUL-W8tv75047bEdUc4F","children":[],"key":"KOHBdH7eIo"}],"key":"B8BPE4S253"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we need to extract the bounding box of the catchment outline, which will be used to access the needed Sentinel-2 data in our region of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yEZymUUzXZ"}],"key":"zUcQgRwtmt"}],"key":"Xi7g37E160"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"bbox = catchment_outline.bounds.iloc[0]\nbbox","key":"yp0ZekX6Xi"},{"type":"outputs","id":"CRuBLDziL8fKVxX4KetsF","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/plain":{"content":"minx    11.020833\nminy    46.653599\nmaxx    11.366667\nmaxy    46.954167\nName: 0, dtype: float64","content_type":"text/plain"}}},"children":[],"key":"p7boV2CbnG"}],"key":"jOwWhoSf41"}],"key":"o9ZmGHE0Eo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a Sentinel-2 RGB","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yynSABP8kz"}],"identifier":"create-a-sentinel-2-rgb","label":"Create a Sentinel-2 RGB","html_id":"create-a-sentinel-2-rgb","implicit":true,"key":"SjGqrUJ50T"}],"key":"dLjfhSBIcs"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As a first step we will create a RGB data cube from Sentinel-2, including a cloud cover map (CLM). This can be useful to visualize the Sentinel-2 images for some specific date. The spatial resolution set for this cube will be 0.00018 degree, which correspond roughly to the native 10 meter resolution of the Sentinel-2 visible bands (B02: blue, B03: green, B04: red)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kQ7vGauIeg"}],"key":"EIDuuXnXO8"}],"key":"xr4gZlOBYg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_config_s2rgb = CubeConfig(\n    dataset_name='S2L2A',\n    band_names=['B02', 'B03', 'B04', 'CLM'],\n    bbox=bbox.tolist(),\n    spatial_res=0.00018,\n    time_range=[start_date.strftime(\"%Y-%m-%d\"), end_date.strftime(\"%Y-%m-%d\")]\n)","key":"BTR3HfDmKR"},{"type":"outputs","id":"7pWB0bMq4yRhKqNL7B12b","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/home/conda/master-asi-conae/315434deb1b1e05eacacc41e1b0529b1837100f46402a32041d77ba54ae6c5f3-20230213-125825-013239-74-edc-2022.10-14/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units 'M', 'Y' and 'y' do not represent unambiguous timedelta values and will be removed in a future version.\n  time_tolerance = pd.to_timedelta(time_tolerance)\n"},"children":[],"key":"AdIIlF63nN"}],"key":"TnzBQwtjXi"}],"key":"D7pzuPH57h"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading the data into the cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BmtIY9C48w"}],"key":"AlhVwdDcNv"}],"key":"GBflZhMcxv"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb = open_cube(cube_config_s2rgb)\ncube_s2rgb","visibility":"show","key":"Q5MCNOqcEe"},{"type":"outputs","id":"j7jTXEzD-R_9lf8yFob5q","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"822117cabed98a6c8b9bfe38da7577fd","path":"/cubes-and-clouds/build/822117cabed98a6c8b9bfe38da7577fd.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 58, lat: 1864, lon: 2146, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 46.99 46.99 46.99 46.99 ... 46.65 46.65 46.65 46.65\n  * lon        (lon) float64 11.02 11.02 11.02 11.02 ... 11.41 11.41 11.41 11.41\n  * time       (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T10:13:58\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B02        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 932, 1073), meta=np.ndarray\u003e\n    B03        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 932, 1073), meta=np.ndarray\u003e\n    B04        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 932, 1073), meta=np.ndarray\u003e\n    CLM        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 932, 1073), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-02-21T09:43:08.149994\n    time_coverage_start:     2018-02-01T10:22:37+00:00\n    time_coverage_end:       2018-06-28T10:13:58+00:00\n    time_coverage_duration:  P146DT23H51M21S\n    geospatial_lon_min:      11.020833333333357\n    geospatial_lat_min:      46.653599378797765\n    geospatial_lon_max:      11.407113333333356\n    geospatial_lat_max:      46.98911937879777\n    processing_level:        L2A","content_type":"text/plain"}}},"children":[],"key":"CtOwfHpm4n"}],"visibility":"show","key":"iLQIqpb9S5"}],"visibility":"show","key":"IyJw4e20xF"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show the date list of the data in the cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XVIgsOvFsI"}],"key":"INhpm7HEW3"}],"key":"DloOUR7Dm3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb.time","key":"njJR2rTroC"},{"type":"outputs","id":"ARvBvSKvtsC04ZQfEjF33","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;time\u0026#x27; (time: 58)\u0026gt;\narray([\u0026#x27;2018-02-01T10:22:37.000000000\u0026#x27;, \u0026#x27;2018-02-03T10:12:37.000000000\u0026#x27;,\n       \u0026#x27;2018-02-06T10:22:06.000000000\u0026#x27;, \u0026#x27;2018-02-08T10:11:53.000000000\u0026#x27;,\n       \u0026#x27;2018-02-11T10:25:59.000000000\u0026#x27;, \u0026#x27;2018-02-13T10:15:59.000000000\u0026#x27;,\n       \u0026#x27;2018-02-16T10:26:01.000000000\u0026#x27;, \u0026#x27;2018-02-18T10:13:13.000000000\u0026#x27;,\n       \u0026#x27;2018-02-21T10:20:33.000000000\u0026#x27;, \u0026#x27;2018-02-23T10:15:08.000000000\u0026#x27;,\n       \u0026#x27;2018-02-26T10:20:50.000000000\u0026#x27;, \u0026#x27;2018-02-28T10:10:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-03T10:27:07.000000000\u0026#x27;, \u0026#x27;2018-03-05T10:13:15.000000000\u0026#x27;,\n       \u0026#x27;2018-03-08T10:22:41.000000000\u0026#x27;, \u0026#x27;2018-03-10T10:10:20.000000000\u0026#x27;,\n       \u0026#x27;2018-03-13T10:25:40.000000000\u0026#x27;, \u0026#x27;2018-03-15T10:10:38.000000000\u0026#x27;,\n       \u0026#x27;2018-03-20T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-03-23T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-25T10:15:11.000000000\u0026#x27;, \u0026#x27;2018-03-28T10:23:58.000000000\u0026#x27;,\n       \u0026#x27;2018-03-30T10:16:20.000000000\u0026#x27;, \u0026#x27;2018-04-02T10:24:35.000000000\u0026#x27;,\n       \u0026#x27;2018-04-04T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-04-07T10:20:20.000000000\u0026#x27;,\n       \u0026#x27;2018-04-09T10:13:43.000000000\u0026#x27;, \u0026#x27;2018-04-12T10:20:24.000000000\u0026#x27;,\n       \u0026#x27;2018-04-14T10:15:36.000000000\u0026#x27;, \u0026#x27;2018-04-17T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-04-19T10:14:57.000000000\u0026#x27;, \u0026#x27;2018-04-22T10:21:15.000000000\u0026#x27;,\n       \u0026#x27;2018-04-24T10:15:26.000000000\u0026#x27;, \u0026#x27;2018-04-27T10:20:22.000000000\u0026#x27;,\n       \u0026#x27;2018-04-29T10:12:58.000000000\u0026#x27;, \u0026#x27;2018-05-02T10:24:34.000000000\u0026#x27;,\n       \u0026#x27;2018-05-04T10:10:23.000000000\u0026#x27;, \u0026#x27;2018-05-07T10:26:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-09T10:16:21.000000000\u0026#x27;, \u0026#x27;2018-05-12T10:21:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-14T10:10:52.000000000\u0026#x27;, \u0026#x27;2018-05-17T10:22:09.000000000\u0026#x27;,\n       \u0026#x27;2018-05-19T10:12:07.000000000\u0026#x27;, \u0026#x27;2018-05-22T10:20:25.000000000\u0026#x27;,\n       \u0026#x27;2018-05-24T10:10:22.000000000\u0026#x27;, \u0026#x27;2018-05-29T10:12:25.000000000\u0026#x27;,\n       \u0026#x27;2018-06-01T10:20:24.000000000\u0026#x27;, \u0026#x27;2018-06-03T10:13:29.000000000\u0026#x27;,\n       \u0026#x27;2018-06-06T10:25:12.000000000\u0026#x27;, \u0026#x27;2018-06-08T10:17:26.000000000\u0026#x27;,\n       \u0026#x27;2018-06-11T10:26:34.000000000\u0026#x27;, \u0026#x27;2018-06-13T10:14:24.000000000\u0026#x27;,\n       \u0026#x27;2018-06-16T10:20:21.000000000\u0026#x27;, \u0026#x27;2018-06-18T10:17:33.000000000\u0026#x27;,\n       \u0026#x27;2018-06-21T10:23:16.000000000\u0026#x27;, \u0026#x27;2018-06-23T10:11:39.000000000\u0026#x27;,\n       \u0026#x27;2018-06-26T10:26:26.000000000\u0026#x27;, \u0026#x27;2018-06-28T10:13:58.000000000\u0026#x27;],\n      dtype=\u0026#x27;datetime64[ns]\u0026#x27;)\nCoordinates:\n  * time     (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T10:13:58\nAttributes:\n    standard_name:  time\n    bounds:         time_bnds\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'time'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003etime\u003c/span\u003e: 58\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-812432b6-3e5b-473f-9f35-f6753172e759' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-812432b6-3e5b-473f-9f35-f6753172e759' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e2018-02-01T10:22:37 2018-02-03T10:12:37 ... 2018-06-28T10:13:58\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([\u0026#x27;2018-02-01T10:22:37.000000000\u0026#x27;, \u0026#x27;2018-02-03T10:12:37.000000000\u0026#x27;,\n       \u0026#x27;2018-02-06T10:22:06.000000000\u0026#x27;, \u0026#x27;2018-02-08T10:11:53.000000000\u0026#x27;,\n       \u0026#x27;2018-02-11T10:25:59.000000000\u0026#x27;, \u0026#x27;2018-02-13T10:15:59.000000000\u0026#x27;,\n       \u0026#x27;2018-02-16T10:26:01.000000000\u0026#x27;, \u0026#x27;2018-02-18T10:13:13.000000000\u0026#x27;,\n       \u0026#x27;2018-02-21T10:20:33.000000000\u0026#x27;, \u0026#x27;2018-02-23T10:15:08.000000000\u0026#x27;,\n       \u0026#x27;2018-02-26T10:20:50.000000000\u0026#x27;, \u0026#x27;2018-02-28T10:10:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-03T10:27:07.000000000\u0026#x27;, \u0026#x27;2018-03-05T10:13:15.000000000\u0026#x27;,\n       \u0026#x27;2018-03-08T10:22:41.000000000\u0026#x27;, \u0026#x27;2018-03-10T10:10:20.000000000\u0026#x27;,\n       \u0026#x27;2018-03-13T10:25:40.000000000\u0026#x27;, \u0026#x27;2018-03-15T10:10:38.000000000\u0026#x27;,\n       \u0026#x27;2018-03-20T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-03-23T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-25T10:15:11.000000000\u0026#x27;, \u0026#x27;2018-03-28T10:23:58.000000000\u0026#x27;,\n       \u0026#x27;2018-03-30T10:16:20.000000000\u0026#x27;, \u0026#x27;2018-04-02T10:24:35.000000000\u0026#x27;,\n       \u0026#x27;2018-04-04T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-04-07T10:20:20.000000000\u0026#x27;,\n       \u0026#x27;2018-04-09T10:13:43.000000000\u0026#x27;, \u0026#x27;2018-04-12T10:20:24.000000000\u0026#x27;,\n       \u0026#x27;2018-04-14T10:15:36.000000000\u0026#x27;, \u0026#x27;2018-04-17T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-04-19T10:14:57.000000000\u0026#x27;, \u0026#x27;2018-04-22T10:21:15.000000000\u0026#x27;,\n       \u0026#x27;2018-04-24T10:15:26.000000000\u0026#x27;, \u0026#x27;2018-04-27T10:20:22.000000000\u0026#x27;,\n       \u0026#x27;2018-04-29T10:12:58.000000000\u0026#x27;, \u0026#x27;2018-05-02T10:24:34.000000000\u0026#x27;,\n       \u0026#x27;2018-05-04T10:10:23.000000000\u0026#x27;, \u0026#x27;2018-05-07T10:26:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-09T10:16:21.000000000\u0026#x27;, \u0026#x27;2018-05-12T10:21:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-14T10:10:52.000000000\u0026#x27;, \u0026#x27;2018-05-17T10:22:09.000000000\u0026#x27;,\n       \u0026#x27;2018-05-19T10:12:07.000000000\u0026#x27;, \u0026#x27;2018-05-22T10:20:25.000000000\u0026#x27;,\n       \u0026#x27;2018-05-24T10:10:22.000000000\u0026#x27;, \u0026#x27;2018-05-29T10:12:25.000000000\u0026#x27;,\n       \u0026#x27;2018-06-01T10:20:24.000000000\u0026#x27;, \u0026#x27;2018-06-03T10:13:29.000000000\u0026#x27;,\n       \u0026#x27;2018-06-06T10:25:12.000000000\u0026#x27;, \u0026#x27;2018-06-08T10:17:26.000000000\u0026#x27;,\n       \u0026#x27;2018-06-11T10:26:34.000000000\u0026#x27;, \u0026#x27;2018-06-13T10:14:24.000000000\u0026#x27;,\n       \u0026#x27;2018-06-16T10:20:21.000000000\u0026#x27;, \u0026#x27;2018-06-18T10:17:33.000000000\u0026#x27;,\n       \u0026#x27;2018-06-21T10:23:16.000000000\u0026#x27;, \u0026#x27;2018-06-23T10:11:39.000000000\u0026#x27;,\n       \u0026#x27;2018-06-26T10:26:26.000000000\u0026#x27;, \u0026#x27;2018-06-28T10:13:58.000000000\u0026#x27;],\n      dtype=\u0026#x27;datetime64[ns]\u0026#x27;)\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-3b39dc8b-712a-49a4-afca-084bbec5f472' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-3b39dc8b-712a-49a4-afca-084bbec5f472' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(1)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003etime\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(time)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003edatetime64[ns]\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e2018-02-01T10:22:37 ... 2018-06-...\u003c/div\u003e\u003cinput id='attrs-f781d88e-bd43-4f01-a9b1-91242658f74e' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-f781d88e-bd43-4f01-a9b1-91242658f74e' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-99f56dff-9411-433e-a00d-bc11392d8b23' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-99f56dff-9411-433e-a00d-bc11392d8b23' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebounds :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime_bnds\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([\u0026#x27;2018-02-01T10:22:37.000000000\u0026#x27;, \u0026#x27;2018-02-03T10:12:37.000000000\u0026#x27;,\n       \u0026#x27;2018-02-06T10:22:06.000000000\u0026#x27;, \u0026#x27;2018-02-08T10:11:53.000000000\u0026#x27;,\n       \u0026#x27;2018-02-11T10:25:59.000000000\u0026#x27;, \u0026#x27;2018-02-13T10:15:59.000000000\u0026#x27;,\n       \u0026#x27;2018-02-16T10:26:01.000000000\u0026#x27;, \u0026#x27;2018-02-18T10:13:13.000000000\u0026#x27;,\n       \u0026#x27;2018-02-21T10:20:33.000000000\u0026#x27;, \u0026#x27;2018-02-23T10:15:08.000000000\u0026#x27;,\n       \u0026#x27;2018-02-26T10:20:50.000000000\u0026#x27;, \u0026#x27;2018-02-28T10:10:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-03T10:27:07.000000000\u0026#x27;, \u0026#x27;2018-03-05T10:13:15.000000000\u0026#x27;,\n       \u0026#x27;2018-03-08T10:22:41.000000000\u0026#x27;, \u0026#x27;2018-03-10T10:10:20.000000000\u0026#x27;,\n       \u0026#x27;2018-03-13T10:25:40.000000000\u0026#x27;, \u0026#x27;2018-03-15T10:10:38.000000000\u0026#x27;,\n       \u0026#x27;2018-03-20T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-03-23T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-03-25T10:15:11.000000000\u0026#x27;, \u0026#x27;2018-03-28T10:23:58.000000000\u0026#x27;,\n       \u0026#x27;2018-03-30T10:16:20.000000000\u0026#x27;, \u0026#x27;2018-04-02T10:24:35.000000000\u0026#x27;,\n       \u0026#x27;2018-04-04T10:10:21.000000000\u0026#x27;, \u0026#x27;2018-04-07T10:20:20.000000000\u0026#x27;,\n       \u0026#x27;2018-04-09T10:13:43.000000000\u0026#x27;, \u0026#x27;2018-04-12T10:20:24.000000000\u0026#x27;,\n       \u0026#x27;2018-04-14T10:15:36.000000000\u0026#x27;, \u0026#x27;2018-04-17T10:20:21.000000000\u0026#x27;,\n       \u0026#x27;2018-04-19T10:14:57.000000000\u0026#x27;, \u0026#x27;2018-04-22T10:21:15.000000000\u0026#x27;,\n       \u0026#x27;2018-04-24T10:15:26.000000000\u0026#x27;, \u0026#x27;2018-04-27T10:20:22.000000000\u0026#x27;,\n       \u0026#x27;2018-04-29T10:12:58.000000000\u0026#x27;, \u0026#x27;2018-05-02T10:24:34.000000000\u0026#x27;,\n       \u0026#x27;2018-05-04T10:10:23.000000000\u0026#x27;, \u0026#x27;2018-05-07T10:26:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-09T10:16:21.000000000\u0026#x27;, \u0026#x27;2018-05-12T10:21:48.000000000\u0026#x27;,\n       \u0026#x27;2018-05-14T10:10:52.000000000\u0026#x27;, \u0026#x27;2018-05-17T10:22:09.000000000\u0026#x27;,\n       \u0026#x27;2018-05-19T10:12:07.000000000\u0026#x27;, \u0026#x27;2018-05-22T10:20:25.000000000\u0026#x27;,\n       \u0026#x27;2018-05-24T10:10:22.000000000\u0026#x27;, \u0026#x27;2018-05-29T10:12:25.000000000\u0026#x27;,\n       \u0026#x27;2018-06-01T10:20:24.000000000\u0026#x27;, \u0026#x27;2018-06-03T10:13:29.000000000\u0026#x27;,\n       \u0026#x27;2018-06-06T10:25:12.000000000\u0026#x27;, \u0026#x27;2018-06-08T10:17:26.000000000\u0026#x27;,\n       \u0026#x27;2018-06-11T10:26:34.000000000\u0026#x27;, \u0026#x27;2018-06-13T10:14:24.000000000\u0026#x27;,\n       \u0026#x27;2018-06-16T10:20:21.000000000\u0026#x27;, \u0026#x27;2018-06-18T10:17:33.000000000\u0026#x27;,\n       \u0026#x27;2018-06-21T10:23:16.000000000\u0026#x27;, \u0026#x27;2018-06-23T10:11:39.000000000\u0026#x27;,\n       \u0026#x27;2018-06-26T10:26:26.000000000\u0026#x27;, \u0026#x27;2018-06-28T10:13:58.000000000\u0026#x27;],\n      dtype=\u0026#x27;datetime64[ns]\u0026#x27;)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-d925dbf4-4b39-4bcf-8bf5-e52f4b0a18bd' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-d925dbf4-4b39-4bcf-8bf5-e52f4b0a18bd' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(1)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003etime\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-e7df0de9-1d27-424f-8cee-d3a9f9eabbfb' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-e7df0de9-1d27-424f-8cee-d3a9f9eabbfb' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(DatetimeIndex([\u0026#x27;2018-02-01 10:22:37\u0026#x27;, \u0026#x27;2018-02-03 10:12:37\u0026#x27;,\n               \u0026#x27;2018-02-06 10:22:06\u0026#x27;, \u0026#x27;2018-02-08 10:11:53\u0026#x27;,\n               \u0026#x27;2018-02-11 10:25:59\u0026#x27;, \u0026#x27;2018-02-13 10:15:59\u0026#x27;,\n               \u0026#x27;2018-02-16 10:26:01\u0026#x27;, \u0026#x27;2018-02-18 10:13:13\u0026#x27;,\n               \u0026#x27;2018-02-21 10:20:33\u0026#x27;, \u0026#x27;2018-02-23 10:15:08\u0026#x27;,\n               \u0026#x27;2018-02-26 10:20:50\u0026#x27;, \u0026#x27;2018-02-28 10:10:21\u0026#x27;,\n               \u0026#x27;2018-03-03 10:27:07\u0026#x27;, \u0026#x27;2018-03-05 10:13:15\u0026#x27;,\n               \u0026#x27;2018-03-08 10:22:41\u0026#x27;, \u0026#x27;2018-03-10 10:10:20\u0026#x27;,\n               \u0026#x27;2018-03-13 10:25:40\u0026#x27;, \u0026#x27;2018-03-15 10:10:38\u0026#x27;,\n               \u0026#x27;2018-03-20 10:10:21\u0026#x27;, \u0026#x27;2018-03-23 10:20:21\u0026#x27;,\n               \u0026#x27;2018-03-25 10:15:11\u0026#x27;, \u0026#x27;2018-03-28 10:23:58\u0026#x27;,\n               \u0026#x27;2018-03-30 10:16:20\u0026#x27;, \u0026#x27;2018-04-02 10:24:35\u0026#x27;,\n               \u0026#x27;2018-04-04 10:10:21\u0026#x27;, \u0026#x27;2018-04-07 10:20:20\u0026#x27;,\n               \u0026#x27;2018-04-09 10:13:43\u0026#x27;, \u0026#x27;2018-04-12 10:20:24\u0026#x27;,\n               \u0026#x27;2018-04-14 10:15:36\u0026#x27;, \u0026#x27;2018-04-17 10:20:21\u0026#x27;,\n               \u0026#x27;2018-04-19 10:14:57\u0026#x27;, \u0026#x27;2018-04-22 10:21:15\u0026#x27;,\n               \u0026#x27;2018-04-24 10:15:26\u0026#x27;, \u0026#x27;2018-04-27 10:20:22\u0026#x27;,\n               \u0026#x27;2018-04-29 10:12:58\u0026#x27;, \u0026#x27;2018-05-02 10:24:34\u0026#x27;,\n               \u0026#x27;2018-05-04 10:10:23\u0026#x27;, \u0026#x27;2018-05-07 10:26:48\u0026#x27;,\n               \u0026#x27;2018-05-09 10:16:21\u0026#x27;, \u0026#x27;2018-05-12 10:21:48\u0026#x27;,\n               \u0026#x27;2018-05-14 10:10:52\u0026#x27;, \u0026#x27;2018-05-17 10:22:09\u0026#x27;,\n               \u0026#x27;2018-05-19 10:12:07\u0026#x27;, \u0026#x27;2018-05-22 10:20:25\u0026#x27;,\n               \u0026#x27;2018-05-24 10:10:22\u0026#x27;, \u0026#x27;2018-05-29 10:12:25\u0026#x27;,\n               \u0026#x27;2018-06-01 10:20:24\u0026#x27;, \u0026#x27;2018-06-03 10:13:29\u0026#x27;,\n               \u0026#x27;2018-06-06 10:25:12\u0026#x27;, \u0026#x27;2018-06-08 10:17:26\u0026#x27;,\n               \u0026#x27;2018-06-11 10:26:34\u0026#x27;, \u0026#x27;2018-06-13 10:14:24\u0026#x27;,\n               \u0026#x27;2018-06-16 10:20:21\u0026#x27;, \u0026#x27;2018-06-18 10:17:33\u0026#x27;,\n               \u0026#x27;2018-06-21 10:23:16\u0026#x27;, \u0026#x27;2018-06-23 10:11:39\u0026#x27;,\n               \u0026#x27;2018-06-26 10:26:26\u0026#x27;, \u0026#x27;2018-06-28 10:13:58\u0026#x27;],\n              dtype=\u0026#x27;datetime64[ns]\u0026#x27;, name=\u0026#x27;time\u0026#x27;, freq=None))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-6c3bcf7d-d5b3-43a7-877c-d0317043ff13' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-6c3bcf7d-d5b3-43a7-877c-d0317043ff13' class='xr-section-summary' \u003eAttributes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebounds :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime_bnds\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'time' (time: 58)\u003e\narray(['2018-02-01T10:22:37.000000000', '2018-02-03T10:12:37.000000000',\n       '2018-02-06T10:22:06.000000000', '2018-02-08T10:11:53.000000000',\n       '2018-02-11T10:25:59.000000000', '2018-02-13T10:15:59.000000000',\n       '2018-02-16T10:26:01.000000000', '2018-02-18T10:13:13.000000000',\n       '2018-02-21T10:20:33.000000000', '2018-02-23T10:15:08.000000000',\n       '2018-02-26T10:20:50.000000000', '2018-02-28T10:10:21.000000000',\n       '2018-03-03T10:27:07.000000000', '2018-03-05T10:13:15.000000000',\n       '2018-03-08T10:22:41.000000000', '2018-03-10T10:10:20.000000000',\n       '2018-03-13T10:25:40.000000000', '2018-03-15T10:10:38.000000000',\n       '2018-03-20T10:10:21.000000000', '2018-03-23T10:20:21.000000000',\n       '2018-03-25T10:15:11.000000000', '2018-03-28T10:23:58.000000000',\n       '2018-03-30T10:16:20.000000000', '2018-04-02T10:24:35.000000000',\n       '2018-04-04T10:10:21.000000000', '2018-04-07T10:20:20.000000000',\n       '2018-04-09T10:13:43.000000000', '2018-04-12T10:20:24.000000000',\n       '2018-04-14T10:15:36.000000000', '2018-04-17T10:20:21.000000000',\n       '2018-04-19T10:14:57.000000000', '2018-04-22T10:21:15.000000000',\n       '2018-04-24T10:15:26.000000000', '2018-04-27T10:20:22.000000000',\n       '2018-04-29T10:12:58.000000000', '2018-05-02T10:24:34.000000000',\n       '2018-05-04T10:10:23.000000000', '2018-05-07T10:26:48.000000000',\n       '2018-05-09T10:16:21.000000000', '2018-05-12T10:21:48.000000000',\n       '2018-05-14T10:10:52.000000000', '2018-05-17T10:22:09.000000000',\n       '2018-05-19T10:12:07.000000000', '2018-05-22T10:20:25.000000000',\n       '2018-05-24T10:10:22.000000000', '2018-05-29T10:12:25.000000000',\n       '2018-06-01T10:20:24.000000000', '2018-06-03T10:13:29.000000000',\n       '2018-06-06T10:25:12.000000000', '2018-06-08T10:17:26.000000000',\n       '2018-06-11T10:26:34.000000000', '2018-06-13T10:14:24.000000000',\n       '2018-06-16T10:20:21.000000000', '2018-06-18T10:17:33.000000000',\n       '2018-06-21T10:23:16.000000000', '2018-06-23T10:11:39.000000000',\n       '2018-06-26T10:26:26.000000000', '2018-06-28T10:13:58.000000000'],\n      dtype='datetime64[ns]')\nCoordinates:\n  * time     (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T10:13:58\nAttributes:\n    standard_name:  time\n    bounds:         time_bnds","content_type":"text/plain"}}},"children":[],"key":"SWjm1tv1kF"}],"key":"wVBU3DZRuq"}],"key":"zXrSloOHa9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show a band image for one date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aEGORTGuhT"}],"key":"Yq0Oc0jpCu"}],"key":"RFylobNaCu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb.B03.sel(time='2018-04-02T10:24:35.000000000')","key":"Y7nLDio64Z"},{"type":"outputs","id":"Lut541jO1OJjA3pGeYsId","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;B03\u0026#x27; (lat: 1864, lon: 2146)\u0026gt;\ndask.array\u0026lt;getitem, shape=(1864, 2146), dtype=float32, chunksize=(932, 1073), chunktype=numpy.ndarray\u0026gt;\nCoordinates:\n  * lat      (lat) float64 46.99 46.99 46.99 46.99 ... 46.65 46.65 46.65 46.65\n  * lon      (lon) float64 11.02 11.02 11.02 11.02 ... 11.41 11.41 11.41 11.41\n    time     datetime64[ns] 2018-04-02T10:24:35\nAttributes:\n    sample_type:   FLOAT32\n    units:         reflectance\n    wavelength:    559.4\n    wavelength_a:  559.8\n    wavelength_b:  559\n    bandwidth:     36.0\n    bandwidth_a:   36\n    bandwidth_b:   36\n    resolution:    10\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'B03'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003elat\u003c/span\u003e: 1864\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003elon\u003c/span\u003e: 2146\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-3004e86d-d3b6-423b-bad0-41e0243bdc5a' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-3004e86d-d3b6-423b-bad0-41e0243bdc5a' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003edask.array\u0026lt;chunksize=(932, 1073), meta=np.ndarray\u0026gt;\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003ctable\u003e\n    \u003ctr\u003e\n        \u003ctd\u003e\n            \u003ctable style=\"border-collapse: collapse;\"\u003e\n                \u003cthead\u003e\n                    \u003ctr\u003e\n                        \u003ctd\u003e \u003c/td\u003e\n                        \u003cth\u003e Array \u003c/th\u003e\n                        \u003cth\u003e Chunk \u003c/th\u003e\n                    \u003c/tr\u003e\n                \u003c/thead\u003e\n                \u003ctbody\u003e\n                    \n                    \u003ctr\u003e\n                        \u003cth\u003e Bytes \u003c/th\u003e\n                        \u003ctd\u003e 15.26 MiB \u003c/td\u003e\n                        \u003ctd\u003e 3.81 MiB \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \n                    \u003ctr\u003e\n                        \u003cth\u003e Shape \u003c/th\u003e\n                        \u003ctd\u003e (1864, 2146) \u003c/td\u003e\n                        \u003ctd\u003e (932, 1073) \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \u003ctr\u003e\n                        \u003cth\u003e Dask graph \u003c/th\u003e\n                        \u003ctd colspan=\"2\"\u003e 4 chunks in 3 graph layers \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \u003ctr\u003e\n                        \u003cth\u003e Data type \u003c/th\u003e\n                        \u003ctd colspan=\"2\"\u003e float32 numpy.ndarray \u003c/td\u003e\n                    \u003c/tr\u003e\n                \u003c/tbody\u003e\n            \u003c/table\u003e\n        \u003c/td\u003e\n        \u003ctd\u003e\n        \u003csvg width=\"170\" height=\"154\" style=\"stroke:rgb(0,0,0);stroke-width:1\" \u003e\n\n  \u003c!-- Horizontal lines --\u003e\n  \u003cline x1=\"0\" y1=\"0\" x2=\"120\" y2=\"0\" style=\"stroke-width:2\" /\u003e\n  \u003cline x1=\"0\" y1=\"52\" x2=\"120\" y2=\"52\" /\u003e\n  \u003cline x1=\"0\" y1=\"104\" x2=\"120\" y2=\"104\" style=\"stroke-width:2\" /\u003e\n\n  \u003c!-- Vertical lines --\u003e\n  \u003cline x1=\"0\" y1=\"0\" x2=\"0\" y2=\"104\" style=\"stroke-width:2\" /\u003e\n  \u003cline x1=\"60\" y1=\"0\" x2=\"60\" y2=\"104\" /\u003e\n  \u003cline x1=\"120\" y1=\"0\" x2=\"120\" y2=\"104\" style=\"stroke-width:2\" /\u003e\n\n  \u003c!-- Colored Rectangle --\u003e\n  \u003cpolygon points=\"0.0,0.0 120.0,0.0 120.0,104.23112767940354 0.0,104.23112767940354\" style=\"fill:#ECB172A0;stroke-width:0\"/\u003e\n\n  \u003c!-- Text --\u003e\n  \u003ctext x=\"60.000000\" y=\"124.231128\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" \u003e2146\u003c/text\u003e\n  \u003ctext x=\"140.000000\" y=\"52.115564\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(-90,140.000000,52.115564)\"\u003e1864\u003c/text\u003e\n\u003c/svg\u003e\n        \u003c/td\u003e\n    \u003c/tr\u003e\n\u003c/table\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-c91e1844-f4f8-4741-9b1b-8481cf82a4d9' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-c91e1844-f4f8-4741-9b1b-8481cf82a4d9' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003elat\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(lat)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e46.99 46.99 46.99 ... 46.65 46.65\u003c/div\u003e\u003cinput id='attrs-c637cae0-112e-4de6-9e10-222d6de44222' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-c637cae0-112e-4de6-9e10-222d6de44222' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-ac8c740c-878a-4a97-9cad-3fcd5d0e48da' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-ac8c740c-878a-4a97-9cad-3fcd5d0e48da' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003edecimal_degrees\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003elatitude\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003elatitude\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([46.989029, 46.988849, 46.988669, ..., 46.654049, 46.653869, 46.653689])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003elon\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(lon)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e11.02 11.02 11.02 ... 11.41 11.41\u003c/div\u003e\u003cinput id='attrs-1fbd8c35-9fea-452a-a5c3-b5cd10b6c223' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-1fbd8c35-9fea-452a-a5c3-b5cd10b6c223' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-db534e24-f78e-4bd1-bc43-ad1d82a43719' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-db534e24-f78e-4bd1-bc43-ad1d82a43719' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003edecimal_degrees\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003elongitude\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003elongitude\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([11.020923, 11.021103, 11.021283, ..., 11.406663, 11.406843, 11.407023])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003etime\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003edatetime64[ns]\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e2018-04-02T10:24:35\u003c/div\u003e\u003cinput id='attrs-fac45b95-576c-4937-b83a-e2f477d4641a' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-fac45b95-576c-4937-b83a-e2f477d4641a' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-c58fb07a-3e80-4704-b650-4700ba4668ea' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-c58fb07a-3e80-4704-b650-4700ba4668ea' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebounds :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime_bnds\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(\u0026#x27;2018-04-02T10:24:35.000000000\u0026#x27;, dtype=\u0026#x27;datetime64[ns]\u0026#x27;)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-5bd88d64-1cfa-4ac7-84bb-326ed6ace877' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-5bd88d64-1cfa-4ac7-84bb-326ed6ace877' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003elat\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-a976c870-4cbc-4a1a-b7c8-099dc5267a2b' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-a976c870-4cbc-4a1a-b7c8-099dc5267a2b' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 46.98902937879777,  46.98884937879777, 46.988669378797766,\n              46.988489378797766, 46.988309378797766, 46.988129378797765,\n              46.987949378797765, 46.987769378797765, 46.987589378797765,\n              46.987409378797764,\n              ...\n               46.65530937879777,  46.65512937879777,  46.65494937879777,\n              46.654769378797766, 46.654589378797766, 46.654409378797766,\n              46.654229378797766, 46.654049378797765, 46.653869378797765,\n              46.653689378797765],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;lat\u0026#x27;, length=1864))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003elon\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-54922da9-f775-42d0-abf7-3b44659cbb92' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-54922da9-f775-42d0-abf7-3b44659cbb92' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([11.020923333333357, 11.021103333333357, 11.021283333333358,\n              11.021463333333358, 11.021643333333357, 11.021823333333357,\n              11.022003333333357, 11.022183333333357, 11.022363333333358,\n              11.022543333333358,\n              ...\n              11.405403333333355, 11.405583333333356, 11.405763333333356,\n              11.405943333333356, 11.406123333333356, 11.406303333333357,\n              11.406483333333355, 11.406663333333356, 11.406843333333356,\n              11.407023333333356],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;lon\u0026#x27;, length=2146))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-d9890ba4-9dd9-4c8c-92d2-cd5b250fa29b' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-d9890ba4-9dd9-4c8c-92d2-cd5b250fa29b' class='xr-section-summary' \u003eAttributes: \u003cspan\u003e(9)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003esample_type :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eFLOAT32\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ereflectance\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ewavelength :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e559.4\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ewavelength_a :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e559.8\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ewavelength_b :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e559\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebandwidth :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e36.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebandwidth_a :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e36\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebandwidth_b :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e36\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eresolution :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e10\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'B03' (lat: 1864, lon: 2146)\u003e\ndask.array\u003cgetitem, shape=(1864, 2146), dtype=float32, chunksize=(932, 1073), chunktype=numpy.ndarray\u003e\nCoordinates:\n  * lat      (lat) float64 46.99 46.99 46.99 46.99 ... 46.65 46.65 46.65 46.65\n  * lon      (lon) float64 11.02 11.02 11.02 11.02 ... 11.41 11.41 11.41 11.41\n    time     datetime64[ns] 2018-04-02T10:24:35\nAttributes:\n    sample_type:   FLOAT32\n    units:         reflectance\n    wavelength:    559.4\n    wavelength_a:  559.8\n    wavelength_b:  559\n    bandwidth:     36.0\n    bandwidth_a:   36\n    bandwidth_b:   36\n    resolution:    10","content_type":"text/plain"}}},"children":[],"key":"qXlfIdKCab"}],"key":"OAmXius2aQ"}],"key":"wv3ujIwso5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb.B03.sel(time='2018-04-02T10:24:35.000000000').plot.imshow(vmin=0, vmax=0.5, cmap='gray')","key":"AaCHuOjgya"},{"type":"outputs","id":"hRQELQqrG1gbaVYbPx3xD","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ffa8a79cca96e9a41a673a384ad7031d","path":"/cubes-and-clouds/build/ffa8a79cca96e9a41a673a384ad7031d.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"xOz2bNoDuB"}],"key":"Xpob4HPiIm"}],"key":"NJ4nwOQTnR"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show the RGB image for the same date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VtxJw6fCcK"}],"key":"E7gixVDAXU"}],"key":"pjzBHGaYLU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb[['B04', 'B03', 'B02']].sel(time='2018-04-02T10:24:35.000000000').to_array().plot.imshow(vmin=0, vmax=0.3)","key":"wI8sXHTY04"},{"type":"outputs","id":"cP5WSTNYKHiActkN0Vf7U","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0ed9d3d758b2a282ed6310a3b7e7daeb","path":"/cubes-and-clouds/build/0ed9d3d758b2a282ed6310a3b7e7daeb.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"iW2ZhYVDG3"}],"key":"KBSC26Lgz7"}],"key":"MpQNEjkkBk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show the cloud mask for the same date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X9tQN8UOaX"}],"key":"XKR0ARD81Z"}],"key":"dESmA8Ijcf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb.CLM.sel(time='2018-04-02T10:24:35.000000000').plot.imshow()","key":"qkWUzIgTni"},{"type":"outputs","id":"FQ9Ekx-AIxSfVMZWvxbbz","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"590ca92671487559b3407f32671dfbe1","path":"/cubes-and-clouds/build/590ca92671487559b3407f32671dfbe1.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"i6yEFU1g09"}],"key":"RXofa4pgcX"}],"key":"ORdL7fwF22"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show a pixel time series for one band","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NfhQfhbfD0"}],"key":"DMBrMUPqS9"}],"key":"TO8hFSBvPa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2rgb.B03.sel(lat=46.8, lon=11.2, method='nearest').plot()","key":"T5wT5LjW5i"},{"type":"outputs","id":"ZMnI3tn7eQ9rLUFRaqfJP","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0b096c6946f965855168cabbf0baa361","path":"/cubes-and-clouds/build/0b096c6946f965855168cabbf0baa361.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"i4fxlitAdh"}],"key":"GTEov0dPVX"}],"key":"Bh9YD5mCk0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create the snowmap data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OOd0U1XhNe"}],"identifier":"create-the-snowmap-data-cube","label":"Create the snowmap data cube","html_id":"create-the-snowmap-data-cube","implicit":true,"key":"tjaoIVihvl"}],"key":"Hcmhw1iNnt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"After cloud masking, snow map can be obtained by thresholding the Normalized Difference Snow Index (NDSI) which is computed as:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EHtRZXSgMF"}],"key":"uBMYSlvm75"},{"type":"math","value":"NDSI = \\frac {GREEN - SWIR} {GREEN +SWIR}","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmi\u003eD\u003c/mi\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003eG\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eW\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi\u003eG\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eW\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eNDSI = \\frac {GREEN - SWIR} {GREEN +SWIR}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eD\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.1297em;vertical-align:-0.7693em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3603em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eW\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.00773em;\"\u003eR\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eW\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.00773em;\"\u003eR\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.7693em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"1","key":"CbNGJoRw9y"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will therefore create a Sentinel-2 data cube with bands B03 (green), B11 (SWIR) and the cloud mask (CLM). To speed up the computation of the SCA we will set the resolution equal to 0.0018 degrees, which correspond roughly to 100 m. This resolution is generally enough to get reliable estimate of snow cover area over a catchment.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UvYfDjVhTk"}],"key":"CEiBDOaZGk"}],"key":"s4vPSKBcLK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_config_s2snowmap = CubeConfig(\n    dataset_name='S2L2A',\n    band_names=['B03', 'B11', 'CLM'],\n    bbox=bbox.tolist(),\n    spatial_res=0.0018,\n    time_range=[start_date.strftime(\"%Y-%m-%d\"), end_date.strftime(\"%Y-%m-%d\")],\n    downsampling='BILINEAR'\n)","key":"TIZjUGe6T5"},{"type":"outputs","id":"Y9TqqCYnNr8oRzX2jG2hB","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/home/conda/master-asi-conae/315434deb1b1e05eacacc41e1b0529b1837100f46402a32041d77ba54ae6c5f3-20230213-125825-013239-74-edc-2022.10-14/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units 'M', 'Y' and 'y' do not represent unambiguous timedelta values and will be removed in a future version.\n  time_tolerance = pd.to_timedelta(time_tolerance)\n"},"children":[],"key":"R2ypKtlB93"}],"key":"QL55Qa563l"}],"key":"Gv2MstzICq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap = open_cube(cube_config_s2snowmap)\ncube_s2snowmap","key":"GgCwDqb4yM"},{"type":"outputs","id":"v1u7sDO8ZZdfPxxzmj5YC","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"254f19272089c36188214431ab0e8d5f","path":"/cubes-and-clouds/build/254f19272089c36188214431ab0e8d5f.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 58, lat: 167, lon: 192, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66 46.65\n  * lon        (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36 11.37\n  * time       (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T10:13:58\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    B11        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    CLM        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-02-17T09:42:47.174581\n    time_coverage_start:     2018-02-01T10:22:37+00:00\n    time_coverage_end:       2018-06-28T10:13:58+00:00\n    time_coverage_duration:  P146DT23H51M21S\n    geospatial_lon_min:      11.020833333333357\n    geospatial_lat_min:      46.653599378797765\n    geospatial_lon_max:      11.366433333333356\n    geospatial_lat_max:      46.95419937879777\n    processing_level:        L2A","content_type":"text/plain"}}},"children":[],"key":"qGO0B2cZBM"}],"key":"Z2VZlh7QEJ"}],"key":"RkigyArNTc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compute the NDSI and add it to the cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D1TzLhDvHY"}],"key":"VsHH6MfdV9"}],"key":"WCoXImuhWI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ndsi=(cube_s2snowmap.B03 - cube_s2snowmap.B11) / (cube_s2snowmap.B03 + cube_s2snowmap.B11)\n\nndsi.attrs['long_name']='Normalized Difference Snow Index'\nndsi.attrs['units']='unitless'\n\ncube_s2snowmap['NDSI']=ndsi","key":"h26ZSkYu5A"},{"type":"outputs","id":"A-F9MeZD_7PLHWm299yh-","children":[],"key":"bWhVuSKf2e"}],"key":"WLZ6clFUVV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize an NDSI image for a specific date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uJM7FK6EKM"}],"key":"ZDlGNQl2sq"}],"key":"csgxpi978a"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap.NDSI.sel(time='2018-04-02T10:24:35.000000000').plot.imshow(vmin=-1, vmax=1, cmap='gray')","visibility":"show","key":"Px0SBtcFxL"},{"type":"outputs","id":"FaysIyusAbxD78a3NQtwS","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"279d8b8ae7ee7d04ce2d8a1ada7b138e","path":"/cubes-and-clouds/build/279d8b8ae7ee7d04ce2d8a1ada7b138e.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"SSw3cOhqyE"}],"visibility":"show","key":"RncoT394zR"}],"visibility":"show","key":"XzejOYoDZ5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create the snow cover maps by setting a threshold equal to 0.4 on the NDSI","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dez6R879Ca"}],"key":"k1BcdY8E0w"}],"key":"FciiCy4G2p"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":" cube_s2snowmap['snowmap'] = cube_s2snowmap.NDSI \u003e 0.4","key":"kbGWQv5oOv"},{"type":"outputs","id":"tH14kBxHE3SSpZez9zIzW","children":[],"key":"VF9v6l9g6d"}],"key":"TVCVj3fr7f"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap","key":"vyMbH9AGvv"},{"type":"outputs","id":"KW8wxFDQmTa2u9r-OTUvV","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"d84df8d6a31d3c960443d2da4a800fbf","path":"/cubes-and-clouds/build/d84df8d6a31d3c960443d2da4a800fbf.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 58, lat: 167, lon: 192, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66 46.65\n  * lon        (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36 11.37\n  * time       (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T10:13:58\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    B11        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    CLM        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    NDSI       (time, lat, lon) float32 dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\n    snowmap    (time, lat, lon) bool dask.array\u003cchunksize=(1, 167, 192), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-02-17T09:42:47.174581\n    time_coverage_start:     2018-02-01T10:22:37+00:00\n    time_coverage_end:       2018-06-28T10:13:58+00:00\n    time_coverage_duration:  P146DT23H51M21S\n    geospatial_lon_min:      11.020833333333357\n    geospatial_lat_min:      46.653599378797765\n    geospatial_lon_max:      11.366433333333356\n    geospatial_lat_max:      46.95419937879777\n    processing_level:        L2A","content_type":"text/plain"}}},"children":[],"key":"Y7ySXrCVWz"}],"key":"JQAcSl62q9"}],"key":"rVn2SEgz3s"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Add the cloud mask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Efxobzqyno"}],"key":"B7rNyKjCIM"}],"key":"FEODtE83TR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap['snowmap'] = cube_s2snowmap.snowmap.where(cube_s2snowmap.CLM==0) ","key":"F7wLoFgpLg"},{"type":"outputs","id":"iP8mxDUQc8qvrBrYAGrO0","children":[],"key":"eNvuNF9NsM"}],"key":"TGqHOqxTpz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show a snow map (no snow = 0, snow = 1, cloud = NaN)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SndOdhrCpw"}],"key":"OTwoUoj3MJ"}],"key":"wIlYhxnC6z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap.snowmap.sel(time='2018-04-02T10:24:35.000000000').plot.imshow()","key":"N0c4HsA8mw"},{"type":"outputs","id":"eTG1Mj-02g9aYWrfjTqsw","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"97095abd4685fe6634ad10dc1adf3837","path":"/cubes-and-clouds/build/97095abd4685fe6634ad10dc1adf3837.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"VORdAYWjBF"}],"key":"XN7oK2o5rU"}],"key":"fYTX86OK8g"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Catchment SCA time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uRrGQOsYpW"}],"identifier":"catchment-sca-time-series","label":"Catchment SCA time series","html_id":"catchment-sca-time-series","implicit":true,"key":"mLWI2yLT6u"}],"key":"Ecq3frUZy2"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Mask with the catchment outline","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WB2n7VdPwX"}],"key":"V9L1a6gql1"}],"key":"QnSr91HAp8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked = mask_dataset_by_geometry(cube_s2snowmap, catchment_outline.iloc[0].geometry)","key":"TMVGPW6ZhS"},{"type":"outputs","id":"5chO6tkXZwmxj0TiWAL0w","children":[],"key":"xkfxMoh8sQ"}],"key":"wuymQh1O86"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked.snowmap.sel(time='2018-04-02T10:24:35.000000000').plot.imshow()","key":"KFBimn6vbt"},{"type":"outputs","id":"68ZV6igPjuIVGKutbvk2u","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"fdf539e6af5c9f4b4db6acfcb94e8f40","path":"/cubes-and-clouds/build/fdf539e6af5c9f4b4db6acfcb94e8f40.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"ajC1KhWhmp"}],"key":"NlQsjwpqEw"}],"key":"fbSZaEIzt2"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compute the cloud percent in the catchment for each Sentinel-2 image","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kpcqm8hbw8"}],"key":"ySOLkiDG7K"}],"key":"xrJCVXW4CH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"n_cloud = cube_s2snowmap_masked.CLM.sum(dim=['lat', 'lon'])\nn_cloud_valid = cube_s2snowmap_masked.CLM.count(dim=['lat', 'lon'])\n\ncube_s2snowmap_masked['cloud_percent'] = n_cloud / n_cloud_valid * 100\ncube_s2snowmap_masked","key":"jQJPDewxEl"},{"type":"outputs","id":"6HlybeAzz8EZt_LCcSxLF","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"e7da182cc8a4635a51fcace9f002a0de","path":"/cubes-and-clouds/build/e7da182cc8a4635a51fcace9f002a0de.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 58, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) float64 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    cloud_percent  (time) float64 dask.array\u003cchunksize=(1,), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:42:47.174581\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:43:16.744018","content_type":"text/plain"}}},"children":[],"key":"PmTpf4V7dV"}],"key":"Bfk8ZZgFaV"}],"key":"EGJictlCgZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In order to get an accurate snow cover area estimation we want to keep only the Sentinel-2 images with a cloud percent in the catchment lower than 20%","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bFldrRO9dn"}],"key":"bJ2b2WJv9l"}],"key":"XupYQpGOxK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked = cube_s2snowmap_masked.sel(time=cube_s2snowmap_masked.cloud_percent \u003c 20)","key":"SimP4fC1Ho"},{"type":"outputs","id":"x6_zVpVWzY2eyOW9Lti9P","children":[],"key":"giu6ETzjyX"}],"key":"xTuO7eD9Sr"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"For the remaining image we can then estimate the snow cover area","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UQrC6jNNHU"}],"key":"uzutPg246x"}],"key":"cRBngLAREv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"n_snow = cube_s2snowmap_masked.snowmap.sum(dim=['lat', 'lon'])\nn_snow_valid = cube_s2snowmap_masked.snowmap.count(dim=['lat', 'lon'])\n\ncube_s2snowmap_masked['snow_percent'] = n_snow / n_snow_valid * 100","key":"V0opPyx0B6"},{"type":"outputs","id":"zfBeczSWHxHDY9ncyKRDl","children":[],"key":"SrFJkERQcw"}],"key":"rDQYgRfrD1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The snow and cloud percentage value can be represented in a pandas DataFrame and saved as csv","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GvASmXrOPL"}],"key":"ZHXrsEbomq"}],"key":"kx9WeXuUlE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sca_ts = cube_s2snowmap_masked[['cloud_percent', 'snow_percent']].to_dataframe()\nsca_ts","key":"x1D9DqMIam"},{"type":"outputs","id":"gNPWMIPbo-7qtIRS3ByKk","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003ecloud_percent\u003c/th\u003e\n      \u003cth\u003esnow_percent\u003c/th\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003etime\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-08 10:11:53\u003c/th\u003e\n      \u003ctd\u003e14.107938\u003c/td\u003e\n      \u003ctd\u003e79.586701\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-11 10:25:59\u003c/th\u003e\n      \u003ctd\u003e4.827089\u003c/td\u003e\n      \u003ctd\u003e74.475260\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-13 10:15:59\u003c/th\u003e\n      \u003ctd\u003e18.384857\u003c/td\u003e\n      \u003ctd\u003e68.060348\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-21 10:20:33\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e71.934766\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-28 10:10:21\u003c/th\u003e\n      \u003ctd\u003e12.765261\u003c/td\u003e\n      \u003ctd\u003e68.030633\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-08 10:22:41\u003c/th\u003e\n      \u003ctd\u003e10.734870\u003c/td\u003e\n      \u003ctd\u003e85.508841\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-20 10:10:21\u003c/th\u003e\n      \u003ctd\u003e11.095101\u003c/td\u003e\n      \u003ctd\u003e78.134669\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-23 10:20:21\u003c/th\u003e\n      \u003ctd\u003e14.219282\u003c/td\u003e\n      \u003ctd\u003e69.458655\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-25 10:15:11\u003c/th\u003e\n      \u003ctd\u003e4.466859\u003c/td\u003e\n      \u003ctd\u003e69.813520\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-02 10:24:35\u003c/th\u003e\n      \u003ctd\u003e4.460309\u003c/td\u003e\n      \u003ctd\u003e68.725578\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-07 10:20:20\u003c/th\u003e\n      \u003ctd\u003e0.700812\u003c/td\u003e\n      \u003ctd\u003e66.367654\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-14 10:15:36\u003c/th\u003e\n      \u003ctd\u003e10.178150\u003c/td\u003e\n      \u003ctd\u003e72.582762\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-19 10:14:57\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e58.560388\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-22 10:21:15\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e54.872937\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-24 10:15:26\u003c/th\u003e\n      \u003ctd\u003e18.273513\u003c/td\u003e\n      \u003ctd\u003e49.479083\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-06-16 10:20:21\u003c/th\u003e\n      \u003ctd\u003e0.137543\u003c/td\u003e\n      \u003ctd\u003e6.388142\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-06-23 10:11:39\u003c/th\u003e\n      \u003ctd\u003e3.163479\u003c/td\u003e\n      \u003ctd\u003e3.645587\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                     cloud_percent  snow_percent\ntime                                            \n2018-02-08 10:11:53      14.107938     79.586701\n2018-02-11 10:25:59       4.827089     74.475260\n2018-02-13 10:15:59      18.384857     68.060348\n2018-02-21 10:20:33       0.000000     71.934766\n2018-02-28 10:10:21      12.765261     68.030633\n2018-03-08 10:22:41      10.734870     85.508841\n2018-03-20 10:10:21      11.095101     78.134669\n2018-03-23 10:20:21      14.219282     69.458655\n2018-03-25 10:15:11       4.466859     69.813520\n2018-04-02 10:24:35       4.460309     68.725578\n2018-04-07 10:20:20       0.700812     66.367654\n2018-04-14 10:15:36      10.178150     72.582762\n2018-04-19 10:14:57       0.000000     58.560388\n2018-04-22 10:21:15       0.000000     54.872937\n2018-04-24 10:15:26      18.273513     49.479083\n2018-06-16 10:20:21       0.137543      6.388142\n2018-06-23 10:11:39       3.163479      3.645587","content_type":"text/plain"}}},"children":[],"key":"R253ljuR3T"}],"key":"d048CFFw3g"}],"key":"x1YouSBaP8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sca_ts['snow_percent'].to_csv('s2_sca_ts_cloudfree.csv')","key":"eECSTtQsM6"},{"type":"outputs","id":"IoB3Qmj6QnhNP6ufZrrpg","children":[],"key":"uMER0VXGRL"}],"key":"qB0GfQue01"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sca_ts['snow_percent'].plot(marker='o')","key":"pqHO4A2TDC"},{"type":"outputs","id":"f90fqKv-xutWXCudOUxzx","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b22ecfa29db4f7b0a6e4cdb7d485d82a","path":"/cubes-and-clouds/build/b22ecfa29db4f7b0a6e4cdb7d485d82a.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"XH5IXePI7c"}],"key":"dRwSUXV8Ds"}],"key":"dwK1dwgws9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compare the evolution of SCA to runoff","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I0NlgBz6Oy"}],"identifier":"compare-the-evolution-of-sca-to-runoff","label":"Compare the evolution of SCA to runoff","html_id":"compare-the-evolution-of-sca-to-runoff","implicit":true,"key":"Qk8ln8dYVH"}],"key":"GWhSVaBJEN"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In alpine catchment snow represent a major contribution to the runoff during the melting season. As a qualitative analysis we will plot the runoff time series for the selected catchment toghether with the SCA time series we derived from Sentinel-2. As soon as the SCA decreases due to melting, the snow melt contribution implies an increase of the runoff.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PWtVZmRUT2"}],"key":"j3EwLSnPjf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Load the runoff time series stored in the csv file:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jw75PvF6uE"}],"key":"sn1YWkCeh2"}],"key":"kGmEmSsEIW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsc = pd.read_csv('ADO_DSC_ITH1_0025.csv', sep=',', index_col='Time', parse_dates=True)","key":"nnUobZGJL1"},{"type":"outputs","id":"9K4oxogI7Hi3l40Jj9q5v","children":[],"key":"P7JEwzm63g"}],"key":"LXJu38is0U"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsc","key":"vXqeplqfbK"},{"type":"outputs","id":"WtNiWuDsLccHlLUtukWr3","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":25,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003edischarge_m3_s\u003c/th\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003eTime\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1994-01-01 01:00:00\u003c/th\u003e\n      \u003ctd\u003e4.03\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1994-01-02 01:00:00\u003c/th\u003e\n      \u003ctd\u003e3.84\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1994-01-03 01:00:00\u003c/th\u003e\n      \u003ctd\u003e3.74\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1994-01-04 01:00:00\u003c/th\u003e\n      \u003ctd\u003e3.89\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1994-01-05 01:00:00\u003c/th\u003e\n      \u003ctd\u003e3.80\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e...\u003c/th\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2021-07-17 02:00:00\u003c/th\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2021-07-18 02:00:00\u003c/th\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2021-07-19 02:00:00\u003c/th\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2021-07-20 02:00:00\u003c/th\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2021-07-21 02:00:00\u003c/th\u003e\n      \u003ctd\u003eNaN\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e10064 rows × 1 columns\u003c/p\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                     discharge_m3_s\nTime                               \n1994-01-01 01:00:00            4.03\n1994-01-02 01:00:00            3.84\n1994-01-03 01:00:00            3.74\n1994-01-04 01:00:00            3.89\n1994-01-05 01:00:00            3.80\n...                             ...\n2021-07-17 02:00:00             NaN\n2021-07-18 02:00:00             NaN\n2021-07-19 02:00:00             NaN\n2021-07-20 02:00:00             NaN\n2021-07-21 02:00:00             NaN\n\n[10064 rows x 1 columns]","content_type":"text/plain"}}},"children":[],"key":"ri2JELbHkJ"}],"key":"DMWhfQj1TJ"}],"key":"NFUwVzmHzL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select the runoff time series accordingly with the time period we used to estimate the Sentinel-2 SCA","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ztkYiL7dmm"}],"key":"TUnkRcn0cT"}],"key":"XARyxSn9v7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsc = dsc.loc[start_date:end_date]\ndsc.plot()","key":"vOz6nzeeyP"},{"type":"outputs","id":"blWXj5tgYDlJFYGE2P7Xs","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0fea4cb7941ca5ff67f25e18df0efb12","path":"/cubes-and-clouds/build/0fea4cb7941ca5ff67f25e18df0efb12.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"zw1KxJRgLB"}],"key":"Iw7Ae6EfkN"}],"key":"zvjpx8QOGX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the runoff (left axes, blue line) toghether with the Sentinel-2 SCA (right axes, orange line)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aATgNqFcQZ"}],"key":"ZWVROJCtHc"}],"key":"IijArUs9wj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ax1 = dsc.discharge_m3_s.plot(label='Discharge', xlabel='', ylabel='Discharge (m$^3$/s)')\nax2 = sca_ts.snow_percent.plot(marker='o', secondary_y=True, label='SCA', xlabel='', ylabel='Snow cover area (%)')\n\nax1.legend(loc='center left', bbox_to_anchor=(0, 0.6))\nax2.legend(loc='center left', bbox_to_anchor=(0, 0.5))\n\nplt.show()","key":"ZGA3WRRfvO"},{"type":"outputs","id":"2otvOET-hqSQz8v0zYWS0","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"71fe6288debc9272e7f374a231b989de","path":"/cubes-and-clouds/build/71fe6288debc9272e7f374a231b989de.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"AIdgI3PG0S"}],"key":"q6gS589EVl"}],"key":"xOkJnl568N"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"UbKJn76Ldz"},{"type":"outputs","id":"9E7Sigt5NXJVf8pYlAqaJ","children":[],"key":"budeH8h6Jy"}],"key":"ndTgtNtfJX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"fYf2sBuhrw"},{"type":"outputs","id":"IrGfWpXWSdWSS_wEoIBdK","children":[],"key":"XB2so4KbwH"}],"key":"WVbnewQqc1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"DnhPp1SzWD"},{"type":"outputs","id":"Fdq6cu_efY_wRgASzW2SY","children":[],"key":"DoTzqsSbsB"}],"key":"VbrH3zql8r"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"OZufRptycS"},{"type":"outputs","id":"FbaLD02lwoYlIBoPZ7CNN","children":[],"key":"kAf6RjgO5U"}],"key":"yaLolgZAq6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"ipQCZ1hkGC"},{"type":"outputs","id":"eBm-G-3Dqh6ZNi1ePl5Me","children":[],"key":"Uf34kjILMD"}],"key":"IkUqDywcD7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap['snowmap'] = cube_s2snowmap.snowmap.where(cube_s2snowmap.CLM==0, 2) ","key":"uuQ5ZYiwR4"},{"type":"outputs","id":"ib_1JhVPZWRPT84SxP_aV","children":[],"key":"yGX7BTYhRc"}],"key":"Bb8CLpPq7V"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap.snowmap.sel(time='2018-04-02T10:24:35.000000000').plot.imshow()","key":"IbYDYjj2OV"},{"type":"outputs","id":"vr2xVT5jKKanmWoKJePd2","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"95f5fbc8ab4d6c15184a5cbf45dfa301","path":"/cubes-and-clouds/build/95f5fbc8ab4d6c15184a5cbf45dfa301.png"},"text/plain":{"content":"\u003cFigure size 640x480 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"s91KISlhji"}],"key":"L5VTjlBN68"}],"key":"X4QSboSgqJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked = mask_dataset_by_geometry(cube_s2snowmap, catchment_outline.iloc[0].geometry, save_geometry_mask=True)\ncube_s2snowmap_masked","key":"ONHsG5eNs6"},{"type":"outputs","id":"rX-bIi3neBmSXX_SoQpIY","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"b59183cb88c7759dd801f0a22cf672a5","path":"/cubes-and-clouds/build/b59183cb88c7759dd801f0a22cf672a5.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 58, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) float64 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    geometry_mask  (lat, lon) bool dask.array\u003cchunksize=(166, 191), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:40:08.516335\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:40:51.289454","content_type":"text/plain"}}},"children":[],"key":"Sl3Cbr3aqW"}],"key":"CzruFQ8g83"}],"key":"h5g8Ih2v3M"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked['CLM'] = cube_s2snowmap_masked.CLM == 1\ncube_s2snowmap_masked","key":"MmB1qRr7Ix"},{"type":"outputs","id":"DLWiHmrWX9JmoGJENDh3h","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"da303fd4eb4bba0a342560d5ad18e27e","path":"/cubes-and-clouds/build/da303fd4eb4bba0a342560d5ad18e27e.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 58, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) bool dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) float64 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    geometry_mask  (lat, lon) bool dask.array\u003cchunksize=(166, 191), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:40:08.516335\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:40:51.289454","content_type":"text/plain"}}},"children":[],"key":"Qk3g9wam9Q"}],"key":"vf9F7PKlG9"}],"key":"cSL0e6N2MC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"n_cloud = cube_s2snowmap_masked.CLM.sum(dim=['lat', 'lon'])\nn_valid = cube_s2snowmap_masked.geometry_mask.sum(dim=['lat', 'lon'])\n\ncube_s2snowmap_masked['cloud_percent'] = n_cloud / n_valid * 100\ncube_s2snowmap_masked","key":"Fg76MT6p4J"},{"type":"outputs","id":"q0j4vZun2gGmMiy2gOLJ0","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"5bc96caa370753945d42b1e5a4850d31","path":"/cubes-and-clouds/build/5bc96caa370753945d42b1e5a4850d31.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 58, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-01T10:22:37 ... 2018-06-28T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(58, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) bool dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) float64 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    geometry_mask  (lat, lon) bool dask.array\u003cchunksize=(166, 191), meta=np.ndarray\u003e\n    cloud_percent  (time) float64 dask.array\u003cchunksize=(1,), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:40:08.516335\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:40:51.289454","content_type":"text/plain"}}},"children":[],"key":"F4c3FDRGrp"}],"key":"LczB6boUFG"}],"key":"ZYZnXJfGpu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked = cube_s2snowmap_masked.sel(time=cube_s2snowmap_masked.cloud_percent \u003c 20)\ncube_s2snowmap_masked","key":"HhlMNLychU"},{"type":"outputs","id":"MIP5V1MgkhAcC6ypfLO_G","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"508d40d6af7e134daebce73b57f5bec0","path":"/cubes-and-clouds/build/508d40d6af7e134daebce73b57f5bec0.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 17, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-08T10:11:53 ... 2018-06-23T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(17, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) bool dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) float64 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    geometry_mask  (lat, lon) bool dask.array\u003cchunksize=(166, 191), meta=np.ndarray\u003e\n    cloud_percent  (time) float64 dask.array\u003cchunksize=(1,), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:40:08.516335\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:40:51.289454","content_type":"text/plain"}}},"children":[],"key":"Ty6FDMz2A5"}],"key":"WsFuNffkGQ"}],"key":"IUpz7mQctM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cube_s2snowmap_masked['snowmap'] = cube_s2snowmap_masked.snowmap == 1","key":"E5Nz5mi2MZ"},{"type":"outputs","id":"5034ApwTbbhl8Ydf4UAug","children":[],"key":"A0LJQHdkV1"}],"key":"xamMsgKw5Q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"n_snow = cube_s2snowmap_masked.snowmap.sum(dim=['lat', 'lon'])\n\ncube_s2snowmap_masked['snow_percent'] = n_snow / (n_valid - n_cloud) * 100\ncube_s2snowmap_masked","key":"qW4hUEBR3H"},{"type":"outputs","id":"4Ofh8eUBFXoP1PM2SXaHI","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"e542bd3f951924d165640c6c7ebd3f1d","path":"/cubes-and-clouds/build/e542bd3f951924d165640c6c7ebd3f1d.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:        (lat: 166, lon: 191, time: 17, bnds: 2)\nCoordinates:\n  * lat            (lat) float64 46.95 46.95 46.95 46.95 ... 46.66 46.66 46.66\n  * lon            (lon) float64 11.02 11.02 11.03 11.03 ... 11.36 11.36 11.36\n  * time           (time) datetime64[ns] 2018-02-08T10:11:53 ... 2018-06-23T1...\n    time_bnds      (time, bnds) datetime64[ns] dask.array\u003cchunksize=(17, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B03            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    B11            (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    CLM            (time, lat, lon) bool dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    NDSI           (time, lat, lon) float32 dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    snowmap        (time, lat, lon) bool dask.array\u003cchunksize=(1, 166, 191), meta=np.ndarray\u003e\n    geometry_mask  (lat, lon) bool dask.array\u003cchunksize=(166, 191), meta=np.ndarray\u003e\n    cloud_percent  (time) float64 dask.array\u003cchunksize=(1,), meta=np.ndarray\u003e\n    snow_percent   (time) float64 dask.array\u003cchunksize=(1,), meta=np.ndarray\u003e\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2023-02-17T09:40:08.516335\n    time_coverage_start:        2018-02-01T10:22:37+00:00\n    time_coverage_end:          2018-06-28T10:13:58+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.0018000000000000028\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.0017999999999999822\n    date_modified:              2023-02-17T09:40:51.289454","content_type":"text/plain"}}},"children":[],"key":"KG1KqwqvMm"}],"key":"XOlwWa4p8Z"}],"key":"zO0xeCKJ2M"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"sca_ts = cube_s2snowmap_masked[['cloud_percent', 'snow_percent']].to_dataframe()\nsca_ts","key":"yvzxOg2z0t"},{"type":"outputs","id":"G7gb2tVrlgpak5pq04_1D","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":22,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003ecloud_percent\u003c/th\u003e\n      \u003cth\u003esnow_percent\u003c/th\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003etime\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003e\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-08 10:11:53\u003c/th\u003e\n      \u003ctd\u003e14.107938\u003c/td\u003e\n      \u003ctd\u003e79.586701\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-11 10:25:59\u003c/th\u003e\n      \u003ctd\u003e4.827089\u003c/td\u003e\n      \u003ctd\u003e74.475260\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-13 10:15:59\u003c/th\u003e\n      \u003ctd\u003e18.384857\u003c/td\u003e\n      \u003ctd\u003e68.060348\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-21 10:20:33\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e71.934766\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-02-28 10:10:21\u003c/th\u003e\n      \u003ctd\u003e12.765261\u003c/td\u003e\n      \u003ctd\u003e68.030633\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-08 10:22:41\u003c/th\u003e\n      \u003ctd\u003e10.734870\u003c/td\u003e\n      \u003ctd\u003e85.508841\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-20 10:10:21\u003c/th\u003e\n      \u003ctd\u003e11.095101\u003c/td\u003e\n      \u003ctd\u003e78.134669\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-23 10:20:21\u003c/th\u003e\n      \u003ctd\u003e14.219282\u003c/td\u003e\n      \u003ctd\u003e69.458655\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-03-25 10:15:11\u003c/th\u003e\n      \u003ctd\u003e4.466859\u003c/td\u003e\n      \u003ctd\u003e69.813520\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-02 10:24:35\u003c/th\u003e\n      \u003ctd\u003e4.460309\u003c/td\u003e\n      \u003ctd\u003e68.725578\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-07 10:20:20\u003c/th\u003e\n      \u003ctd\u003e0.700812\u003c/td\u003e\n      \u003ctd\u003e66.367654\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-14 10:15:36\u003c/th\u003e\n      \u003ctd\u003e10.178150\u003c/td\u003e\n      \u003ctd\u003e72.582762\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-19 10:14:57\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e58.560388\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-22 10:21:15\u003c/th\u003e\n      \u003ctd\u003e0.000000\u003c/td\u003e\n      \u003ctd\u003e54.872937\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-04-24 10:15:26\u003c/th\u003e\n      \u003ctd\u003e18.273513\u003c/td\u003e\n      \u003ctd\u003e49.479083\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-06-16 10:20:21\u003c/th\u003e\n      \u003ctd\u003e0.137543\u003c/td\u003e\n      \u003ctd\u003e6.388142\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2018-06-23 10:11:39\u003c/th\u003e\n      \u003ctd\u003e3.163479\u003c/td\u003e\n      \u003ctd\u003e3.645587\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                     cloud_percent  snow_percent\ntime                                            \n2018-02-08 10:11:53      14.107938     79.586701\n2018-02-11 10:25:59       4.827089     74.475260\n2018-02-13 10:15:59      18.384857     68.060348\n2018-02-21 10:20:33       0.000000     71.934766\n2018-02-28 10:10:21      12.765261     68.030633\n2018-03-08 10:22:41      10.734870     85.508841\n2018-03-20 10:10:21      11.095101     78.134669\n2018-03-23 10:20:21      14.219282     69.458655\n2018-03-25 10:15:11       4.466859     69.813520\n2018-04-02 10:24:35       4.460309     68.725578\n2018-04-07 10:20:20       0.700812     66.367654\n2018-04-14 10:15:36      10.178150     72.582762\n2018-04-19 10:14:57       0.000000     58.560388\n2018-04-22 10:21:15       0.000000     54.872937\n2018-04-24 10:15:26      18.273513     49.479083\n2018-06-16 10:20:21       0.137543      6.388142\n2018-06-23 10:11:39       3.163479      3.645587","content_type":"text/plain"}}},"children":[],"key":"hAOIm8w9Dq"}],"key":"eBF1BKZCYw"}],"key":"SEuKFopkh5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"XmSHkp5qyj"},{"type":"outputs","id":"t8nxGJ5Y-MI_dqseyBxRt","children":[],"key":"Sn8Fxmmq5L"}],"key":"Nk3dzUq5gP"}],"key":"g8DvapJyf4"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"3.3 Data Sharing","url":"/lectures/data-sharing/data-sharing","group":"Exercise validation"},"next":{"title":"S1","url":"/lectures/master-asi-conae/test/s1","group":"Additional materials"}}},"domain":"http://localhost:3000"},"project":{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-25993f9e8d7c992ba8e8ec5353e21e5a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-e5117a2c6a1fcd1fb634956300260e46.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Basic EO workflow"},{"level":4,"title":"EO workflow with STAC"},{"level":4,"title":"EO workflow with openEO"},{"level":4,"title":"Data sharing and publishing"},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-6edcd30651bc09e2430138f360c507ea.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise validation"},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"level":4,"title":"Exercise data sharing"},{"title":"Additional materials","level":2},{"slug":"lectures.master-asi-conae.s2-sca","title":"Sentinel-2 snow cover area (SCA) time series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.master-asi-conae.test.s1","title":"S1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s2-snowcover-test","title":"Sentinel-2 snow cover","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.test-s1-s3","title":"Sentinel-1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.master-asi-conae.test.s3-ndsi","title":"List all the available dataset","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/cubes-and-clouds/build/manifest-7B0967AD.js";
import * as route0 from "/cubes-and-clouds/build/root-EDJFWIEV.js";
import * as route1 from "/cubes-and-clouds/build/routes/$-AD65NCUT.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/cubes-and-clouds/build/entry.client-PCJPW7TK.js");</script></body></html>