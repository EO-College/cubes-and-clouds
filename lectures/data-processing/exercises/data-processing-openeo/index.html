<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>3.1 Data Processing OpenEO - Cubes and Clouds Notebooks</title><meta property="og:title" content="3.1 Data Processing OpenEO - Cubes and Clouds Notebooks"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of Cubes and Clouds learning notebooks"/><meta property="og:description" content="Collection of Cubes and Clouds learning notebooks"/><meta name="keywords" content=""/><meta name="image" content="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg"/><meta property="og:image" content="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/app-MOQGDXHO.css"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/cubes-and-clouds/favicon.ico"/><link rel="stylesheet" href="/cubes-and-clouds/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/cubes-and-clouds/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 dark:text-gray-300 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="Cubes and Clouds Notebooks" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/cubes-and-clouds/">Cubes and Clouds Notebooks</a><a title="How to contribute" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/cubes-and-clouds/contributing">How to contribute</a><a title="Contributors" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/cubes-and-clouds/contributors">Contributors</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Lectures" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/cubes-and-clouds/lectures/readme">Lectures</a><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="myst-fm-block-subject flex-none pr-2 smallcaps">Cubes and Clouds learning materials</div><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/EO-college/cubes-and-clouds" title="GitHub Repository: EO-college/cubes-and-clouds" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/3.1_data_processing/exercises/31_data_processing_openeo.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">3.1 Data Processing OpenEO</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="TuYJ6kbjth" class="myst-jp-nb-block relative group/block"><img id="nA5Afn0ASg" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg" alt="Cubes &amp; Clouds logo" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/main/icons/cnc_3icons_process_circle.svg" class=""/></div><div id="FoZOqkWYKu" class="myst-jp-nb-block relative group/block"><img id="pmu8GPS3t2" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/7d92286654718ed077e8b148b8c89bdd.png" alt="openEO logo" data-canonical-url="https://openeo.org/images/openeo_logo.png" class=""/><h2 id="snow-cover-mapping-with-openeo" class="relative group"><span class="heading-text">Snow Cover mapping with openEO</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#snow-cover-mapping-with-openeo" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>In this exercise we will build a complete EO workflow on a cloud platform; from data access to obtaining the result. In this example we will analyse snow cover in the Alps.</p><p>We are going to follow these steps in our analysis:</p><ul><li><p>Load satellite collections</p></li><li><p>Specify the spatial, temporal extents and the features we are interested in</p></li><li><p>Process the satellite data to retrieve snow cover information</p></li><li><p>Aggregate information to get catchment statistics over time</p></li><li><p>Visualize and analyse the results</p></li></ul><p>More information on the openEO Python Client: <a target="_blank" rel="noreferrer" href="https://open-eo.github.io/openeo-python-client/index.html" class="link">https://<wbr/>open<wbr/>-eo<wbr/>.github<wbr/>.io<wbr/>/openeo<wbr/>-python<wbr/>-client<wbr/>/index<wbr/>.html<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a></p></div><div id="mlBEbObJNv" class="myst-jp-nb-block relative group/block"><h2 id="libraries" class="relative group"><span class="heading-text">Libraries</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#libraries" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="i8AsX62Ul3" class="myst-jp-nb-block relative group/block"><p>We start by creating the shared folders and data files needed to complete the exercise using the following shell commands</p></div><div id="OkU2kxGMFF" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># platform libraries
import openeo

# utility libraries
from datetime import date
import numpy as np
import xarray as xr
import rioxarray
import json
import pandas as pd
import matplotlib.pyplot as plt
import geopandas as gpd
import leafmap.foliumap as leafmap</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="qk5_XZNbpu7soSRHpqCFK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="XE9OVpBYsF" class="myst-jp-nb-block relative group/block"><h2 id="connect-to-a-cloud-platform" class="relative group"><span class="heading-text">Connect to a cloud platform</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#connect-to-a-cloud-platform" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Connect to the Copernicus Dataspace Ecosystem. Being connected allows for data discovery.</p></div><div id="LSJcfTdd31" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">conn = openeo.connect(&#x27;https://openeo.dataspace.copernicus.eu/&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="kVSjnhJQQTVE9v3oWLYJV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sErB69OiDl" class="myst-jp-nb-block relative group/block"><p>And login. Being logged in allows to use the full range of functionality including processing!</p></div><div id="U6NAOpOmFM" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">conn.authenticate_oidc()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="L9GtT-LzZyQlh11Mb0_0c" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="OS6lfCAbur" class="myst-jp-nb-block relative group/block"><p>Check if the login worked.</p></div><div id="LAjurZvofX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">conn.describe_account()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="poDfagMTL-47WcU51dulM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sbXhdgR61z" class="myst-jp-nb-block relative group/block"><h2 id="region-of-interest" class="relative group"><span class="heading-text">Region of Interest</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#region-of-interest" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="wfSh90mr3K" class="myst-jp-nb-block relative group/block"><p>Our region of interest is the Val Passiria Catchment in the South Tyrolian Alps (Italy). Let’s load the catchment area.</p></div><div id="WgHK2JLJhq" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">catchment_outline = gpd.read_file(&#x27;31_data/catchment_outline.geojson&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ebXpgzBNRXgxDiCQ7KfcK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="OxYu6KECKw" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">center = (float(catchment_outline.centroid.y), float(catchment_outline.centroid.x))
m = leafmap.Map(center=center, zoom=10)
m.add_vector(&#x27;31_data/catchment_outline.geojson&#x27;, layer_name=&quot;catchment&quot;)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="1XyV6fwymC1Su_bduFBIt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="qbJRqmiXSn" class="myst-jp-nb-block relative group/block"><p><strong>Quiz hint: Look closely at the end of the displayed catchment area to identify the outlet</strong></p></div><div id="Euozo98EMo" class="myst-jp-nb-block relative group/block"><h2 id="inspect-metadata" class="relative group"><span class="heading-text">Inspect Metadata</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#inspect-metadata" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We need to set the following configurations to define the content of the data cube we want to access:</p><ul><li><p>dataset name</p></li><li><p>band names</p></li><li><p>time range</p></li><li><p>the area of interest specifed via bounding box coordinates</p></li><li><p>spatial resolution</p></li></ul><p>To select the correct dataset we can first list all the available datasets.</p></div><div id="OmYLZtshrc" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(conn.list_collection_ids())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="s4777ufPpHyZ8QAtJsVg5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Mp0D7tczX6" class="myst-jp-nb-block relative group/block"><p>We want to use the Sentinel-2 L2A product. It’s name is <code>&#x27;SENTINEL2_L2A&#x27;</code>.</p><p>We get the metadata for this collection as follows. This is an important step to familiarize yourself with the data collection (e.g. learn the band names).</p></div><div id="Mc9u488n8g" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">conn.describe_collection(&quot;SENTINEL2_L2A&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="SxAKbVVjKBHC_97-mtUq7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ntyZTp03jA" class="myst-jp-nb-block relative group/block"><h2 id="define-a-workflow" class="relative group"><span class="heading-text">Define a workflow</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-a-workflow" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We will define our workflow now. And chain all the processes together we need for analyzing the snow cover in the catchment.</p><ul><li><p>Load a data cube with specific filters</p></li><li><p>Calculate the Normalized Difference Snow Index</p></li><li><p>Classify snow and no-snow using a threshold yielding the Snow Covered Area</p></li><li><p>Create and apply a cloud mask to remove cloudy pixels</p></li><li><p>Visualize one date of the snow map and crop it to the exact catchment outline</p></li><li><p>Calculate catchment statistics to get a timeseries on snow cover and cloud cover</p></li><li><p>Filter the time series by the cloud percentage and visualize the time series graph</p></li></ul></div><div id="GljigeadFy" class="myst-jp-nb-block relative group/block"><h3 id="define-the-data-cube" class="relative group"><span class="heading-text">Define the data cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-the-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We define all extents of our data cube. We use the catchment as spatial extent. As a time range we will focus on the snow melting season 2018, in particular from Febraury to June 2018. We are only interested in the green and short wave infrared band, band 3 and 11. And we directly remove time slices with a cloud cover &gt;= 90 %.</p></div><div id="OxSteXrHy0" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">bbox = catchment_outline.bounds.iloc[0]
bbox</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="o0P2mP82vObSh1DD3r1pB" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ElobTHP3Jd" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from openeo.processes import lte
collection      = &#x27;SENTINEL2_L2A&#x27;
spatial_extent  = {&#x27;west&#x27;:bbox[0],&#x27;east&#x27;:bbox[2],&#x27;south&#x27;:bbox[1],&#x27;north&#x27;:bbox[3],&#x27;crs&#x27;:4326}
temporal_extent = [&quot;2018-02-01&quot;, &quot;2018-06-30&quot;]
bands           = [&#x27;B03&#x27;, &#x27;B11&#x27;, &#x27;SCL&#x27;]
properties={&quot;eo:cloud_cover&quot;: lambda x: lte(x, 90)}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="MxTOS44gDwSu2Tx1YjwM_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RAkiKmQXnu" class="myst-jp-nb-block relative group/block"><h3 id="load-the-data-cube" class="relative group"><span class="heading-text">Load the data cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#load-the-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We have defined the extents we are interested in. Now we use these definitions to load the data cube.</p></div><div id="TNhtWjLrS3" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">s2 = conn.load_collection(collection,
                          spatial_extent=spatial_extent,
                          bands=bands,
                          temporal_extent=temporal_extent,
                          properties=properties)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="kw7-Ze36Y-SvdHd376ETj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="VGYNyF27zk" class="myst-jp-nb-block relative group/block"><h3 id="ndsi-normalized-difference-snow-index" class="relative group"><span class="heading-text">NDSI - Normalized Difference Snow Index</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#ndsi-normalized-difference-snow-index" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The Normalized Difference Snow Index (NDSI) is computed as:</p><div id="ORj5TvwWKk" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>N</mi><mi>D</mi><mi>S</mi><mi>I</mi><mo>=</mo><mfrac><mrow><mi>G</mi><mi>R</mi><mi>E</mi><mi>E</mi><mi>N</mi><mo>−</mo><mi>S</mi><mi>W</mi><mi>I</mi><mi>R</mi></mrow><mrow><mi>G</mi><mi>R</mi><mi>E</mi><mi>E</mi><mi>N</mi><mo>+</mo><mi>S</mi><mi>W</mi><mi>I</mi><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">NDSI = \frac {GREEN - SWIR} {GREEN +SWIR}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1297em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">GREEN</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">GREEN</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#ORj5TvwWKk" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->1<!-- -->)</a></div></div><p>We have created a Sentinel-2 data cube with bands B03 (green) and B11 (SWIR). We will use the green and SWIR band to calculate a the NDSI. This process is reducing the band dimension of the data cube to generate new information, the NDSI.</p></div><div id="y4P7MLPrb0" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">green = s2.band(&quot;B03&quot;)
swir = s2.band(&quot;B11&quot;)
ndsi = (green - swir) / (green + swir)
ndsi</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Ni_Hq6YbAb-smMIz9WJb5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NxHHg9erbT" class="myst-jp-nb-block relative group/block"><h3 id="creating-the-snow-map" class="relative group"><span class="heading-text">Creating the Snow Map</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#creating-the-snow-map" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>So far we have a time series map of NDSI values. We are intereseted in the presence of snow though. Ideally in a binary classification: snow and no snow.
To achieve this we are setting a threshold of 0.4 on the NDSI. This gives us a binary snow map.</p></div><div id="lAtbNWvEB3" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">snowmap = ( ndsi &gt; 0.4 ) * 1.0  # the addition of &quot;* 1.00&quot; is a workaround for a backend specific implementation problem. Once solved on the CDSE openEO backend it could be removed
snowmap</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="uvLKVN5hr5-VLtODoGL8y" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="V5VTd5oXwB" class="myst-jp-nb-block relative group/block"><h3 id="creating-a-cloud-mask" class="relative group"><span class="heading-text">Creating a cloud mask</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#creating-a-cloud-mask" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We are going to use the Scene Classification of Sentinel-2, called the “SCL” band,  for creating a cloud mask and then applying it to the NDSI. The values we are interested in are: <code>8 = cloud medium probability</code>, <code>9 = cloud high probability</code>, <code>3 = cloud shadow</code></p><p>Here is more information on the Scene Classification of Sentinel-2: <a target="_blank" rel="noreferrer" href="https://sentiwiki.copernicus.eu/web/s2-processing#S2-Processing-Scene-Classification" class="link">https://<wbr/>sentiwiki<wbr/>.copernicus<wbr/>.eu<wbr/>/web<wbr/>/s2<wbr/>-processing<wbr/>#S2<wbr/>-Processing<wbr/>-Scene<wbr/>-Classification<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a></p></div><div id="Ax3qwsGpIL" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">scl_band = s2.band(&quot;SCL&quot;)
cloud_mask = ( (scl_band == 8) | (scl_band == 9) | (scl_band == 3) ) * 1.0
cloud_mask</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ayjfjVpj53Le-Vukw8gbQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="d0BODM5mRA" class="myst-jp-nb-block relative group/block"><p>The SCL layer has a ground sample distance of 20 meter while the other bands have 10 meter GSD</p></div><div id="T3oPi8G3yo" class="myst-jp-nb-block relative group/block"><h3 id="applying-the-cloud-mask-to-the-snowmap" class="relative group"><span class="heading-text">Applying the cloud mask to the snowmap</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#applying-the-cloud-mask-to-the-snowmap" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We will mask out all pixels that are covered by clouds. This will result in: 0 = no_snow, 1 = snow, 2 = cloud</p></div><div id="KDVeN2zebQ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">snowmap_cloudfree = snowmap.mask(cloud_mask,replacement=2) # replacement is null by default
snowmap_cloudfree</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="tCum-bajX-cSIyz_vjSzJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="SLr1swc0In" class="myst-jp-nb-block relative group/block"><h3 id="mask-polygon-from-bounding-box-to-shape" class="relative group"><span class="heading-text">Mask Polygon: From Bounding Box to Shape</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#mask-polygon-from-bounding-box-to-shape" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We have a cloud masked snow map data cube now. In order to keep only pixels within the exact chatchment boundaries we mask to the outline of the catchment. Values outside of the boundaries are set to NA.</p></div><div id="DU4zhHdzG8" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">catchment_outline[&#x27;geometry&#x27;][0]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ptxOSx0Q-eNj6XC0ISTqe" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="gDP6N7Xn7T" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">snowmap_cloudfree_masked = snowmap_cloudfree.mask_polygon(catchment_outline[&#x27;geometry&#x27;][0])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="DDEoL-Ig7Tggpj4zGCyF_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dRjfrL3uO1" class="myst-jp-nb-block relative group/block"><h3 id="visualize-one-time-step-of-the-timeseries" class="relative group"><span class="heading-text">Visualize one time step of the timeseries</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualize-one-time-step-of-the-timeseries" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s have a first look at a time slice of our snow map. So far we have not computed anything. We have only defined a set of functions that are going to be applied in sequence. This makes up our workflow or processing graph.
To reduce the data volume which we are going to download we are only selecting one time step of our data cube.</p><p><strong>In order to start the processing we have to tell the cloud platform specifically that we want to execute our workflow. In this case we want to start the processing directly without registering a job on the backend. This solution is good for small amounts of data. For larger processing tasks batch jobs are preferred (we’ll do that later).</strong></p></div><div id="VK85RThtt5" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">snowmap_cloudfree_1d = snowmap_cloudfree_masked.filter_temporal(&#x27;2018-02-10&#x27;, &#x27;2018-02-12&#x27;)
snowmap_cloudfree_1d.download(&#x27;31_results/snowmap_cloudfree_1d.nc&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Ijs4QJGOQVPVLdONn_x4c" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tCb7qJWFqm" class="myst-jp-nb-block relative group/block"><p>Once the processing is done on the cloud and the data is downloaded we can load the file into our working environment and plot it!</p><p>The area of interest is spread across two S2 tiles. This is visibile in the northern part of the plot because we chose one specific acquisition date where there is not data available for the northern tile.</p></div><div id="hgcq5951eb" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">xr.open_dataarray(&#x27;31_results/snowmap_cloudfree_1d.nc&#x27;,decode_coords=&quot;all&quot;)[0].plot.imshow()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="rRWtG-jAP4nSXnGnwQCBz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mb2YgtJLaS" class="myst-jp-nb-block relative group/block"><h2 id="calculate-catchment-statistics" class="relative group"><span class="heading-text">Calculate Catchment Statistics</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#calculate-catchment-statistics" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We are looking at the snow cover of a region over time and want to extract aggregated catchment statistics on snow cover and cloud cover. We do this by counting all the pixels in the catchment, counting the pixels that are covered by snow and the pixels covered by clouds.</p><p>Ultimately we are interested in the <strong>snow covered area (SCA)</strong> within the catchment. We count all snow covered pixels within the catchment for each time step. Multiplied by the pixel size that would be the snow covered area. The snow pixel count divided by the total number of pixels in the catchment is the percentage of pixels covered with snow. We will use this number.</p><p>We need to make sure that the information content meets our expected quality. Therefore, we calculate the <strong>cloud percentage</strong> for the catchment for each timestep. We use this information to filter the timeseries. All timesteps that have a cloud coverage of over 25% will be discarded.</p><p>We are going to</p><ul><li><p>Get number of pixels in the catchment: total, clouds, snow.</p></li><li><p>Combine the three aggregated pixel counts into one data cube.</p></li><li><p>Calculate cloud and snow percentages</p></li><li><p>Filter cloudy time steps with the cloud percentage</p></li><li><p>Plot the resulting time series</p></li></ul></div><div id="lr0KTai2lA" class="myst-jp-nb-block relative group/block"><p><strong>Quiz hint: remember the pixel counts here for the final exercise</strong></p></div><div id="bQEkEqtyRC" class="myst-jp-nb-block relative group/block"><h3 id="count-pixels-and-aggregate-spatially-to-the-catchment" class="relative group"><span class="heading-text">Count pixels and aggregate spatially to the catchment</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#count-pixels-and-aggregate-spatially-to-the-catchment" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="kjtJQlzDuV" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># number of all pixels
n_catchment = ((snowmap_cloudfree &gt; -1) * 1.0).add_dimension(name=&quot;bands&quot;,type=&quot;bands&quot;,label=&quot;n_catchment&quot;)

# number of cloud pixels (no function needed, mask already created before)
n_cloud = cloud_mask.add_dimension(name=&quot;bands&quot;,type=&quot;bands&quot;,label=&quot;n_cloud&quot;)

# number of snow pixels
n_snow = ((snowmap_cloudfree == 1) * 1.0).add_dimension(name=&quot;bands&quot;,type=&quot;bands&quot;,label=&quot;n_snow&quot;)

# combine the binary data cubes into one data cube
n_catchment_cloud_snow = n_catchment.merge_cubes(n_cloud).merge_cubes(n_snow)

# aggregate to catchment
n_pixels = n_catchment_cloud_snow.aggregate_spatial(geometries = catchment_outline[&#x27;geometry&#x27;][0], reducer = &#x27;sum&#x27;)
n_pixels</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="TFpRVLYzSAyE0catAxFgJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="EDfZenPSu3" class="myst-jp-nb-block relative group/block"><h3 id="register-a-batch-job-for-processing" class="relative group"><span class="heading-text">Register a batch job for processing</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#register-a-batch-job-for-processing" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We are starting the processing now with a batch job. This registers our job on the backend in our user space and assigns further information to the job, such as an ID, the job status, the process graph and further metadata. First we specifiy the end of our process graph with <code>save_result()</code> and specifiy the format (since we aggregated over the spatial dimension we will receive three arrays of data. So JSON is a suitable format). Then we create the batch job and start it.</p></div><div id="jKueswXxZG" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Define the end of the process graph and the output format
n_pixels_json = n_pixels.save_result(format=&quot;JSON&quot;)
# Create a batch job
job = n_pixels_json.create_job(title=&quot;n_pixels_json&quot;)
# start the job and wait till it finishes
job.start_and_wait()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="hg5MzeGzRG3Wqr_vsRT4q" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zgK245HOC1" class="myst-jp-nb-block relative group/block"><p>Now we can check the status of our job. We can download the result once the job has finished.</p></div><div id="kAtd0rn11H" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">job.status()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Zn3wmi54PrvENLY5b_xFy" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nwjH3jEMce" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">if job.status() == &quot;finished&quot;:
    results = job.get_results()
    results.download_files(&quot;31_results/&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="uQmC3Fpca74QNKHnuTyXF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="DOeChTTKzF" class="myst-jp-nb-block relative group/block"><p><strong>Quick hint: take a look at the job description: e.g. <code>job.describe_job()</code></strong></p></div><div id="qVk6iuWFbP" class="myst-jp-nb-block relative group/block"><h3 id="load-the-resulting-time-series" class="relative group"><span class="heading-text">Load the resulting time series</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#load-the-resulting-time-series" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s load the result. It contains the total number of pixels in the catchment, number of cloud and snow pixels.</p></div><div id="Kr2s3mddcX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># load the result
with open(&quot;31_results/timeseries.json&quot;,&quot;r&quot;) as file:
    n_pixels_json = json.load(file)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Wo24EcqXNVe-4vHaDIDoY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zl4OPOAFr8" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># check the first 5 entries to check the data structure.
list(n_pixels_json.items())[:3] # careful unsorted dates due to JSON format</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="sag7D-NHHcB5jynNLUHmj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="XgbmE4fnqv" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">len(n_pixels_json)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="IIOXPk93VyukO77dmeVf5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Zxs5XDxPl4" class="myst-jp-nb-block relative group/block"><p><strong><em>Quick hint: what is the length of the time series JSON?</em></strong>
<code>len(n_pixels_json)</code></p></div><div id="N5cExtT8b0" class="myst-jp-nb-block relative group/block"><p>Now we do some data wrangling to get a structured data frame.</p></div><div id="K6ypC278Qn" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Create a Pandas DataFrame to hold the values
dates = [k for k in n_pixels_json]
n_catchment_vals = [n_pixels_json[k][0][0] for k in n_pixels_json]
n_cloud_vals = [n_pixels_json[k][0][1] for k in n_pixels_json]
n_snow_vals = [n_pixels_json[k][0][2] for k in n_pixels_json]

data = {
        &quot;time&quot;:pd.to_datetime(dates),
        &quot;n_catchment_vals&quot;:n_catchment_vals,
        &quot;n_cloud_vals&quot;:n_cloud_vals,
        &quot;n_snow_vals&quot;:n_snow_vals
       }
df = pd.DataFrame(data=data).set_index(&quot;time&quot;)
# Sort the values by date
df = df.sort_values(axis=0,by=&quot;time&quot;)
df[:3]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="2GZ6YwJgYKcZtIZ-jD2Ic" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GxxwJ6wMNm" class="myst-jp-nb-block relative group/block"><p>Compute the total number of snow pixels in the selected temporal period:</p></div><div id="wVawXfwBdz" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df.n_snow_vals.sum()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="PsOFDyaDx3SDN6q_qWdUG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="y55OeMNeF0" class="myst-jp-nb-block relative group/block"><h3 id="calculate-the-cloud-percentage-for-filtering-time-steps" class="relative group"><span class="heading-text">Calculate the cloud percentage for filtering time steps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#calculate-the-cloud-percentage-for-filtering-time-steps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Divide the number of cloudy pixels by the number of total pixels = cloud percentage</p></div><div id="Sap3gV2F9L" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">perc_cloud = df[&quot;n_cloud_vals&quot;].values / df[&quot;n_catchment_vals&quot;].values * 100
df[&quot;perc_cloud&quot;] = perc_cloud
df[:3]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="slMUYV2zFwdmRhO05c0BZ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dFbUfrebn3" class="myst-jp-nb-block relative group/block"><p><strong>Quick hint: The sum of the n_catchment_vals should give an overall idea of the total number of pixels in the datacube for the whole time-series</strong> <code>df.n_catchment_vals.sum()</code></p></div><div id="kljaPCxPJX" class="myst-jp-nb-block relative group/block"><p><strong>Quick hint: a filter of the snow values can give an idea of when the maximum snow cover occurred</strong> <code>df.where(df.n_snow_vals == df.n_snow_vals.max())</code></p></div><div id="m5YHcc4h0Q" class="myst-jp-nb-block relative group/block"><p><strong>Quick hint: a simplified approach for converting from pixel count to square kilometres is to use this simplified formula::</strong></p><p><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>A</mi><mi>r</mi><mi>e</mi><mi>a</mi><mo stretchy="false">(</mo><mi>k</mi><msup><mi>m</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><mo>=</mo><mo stretchy="false">(</mo><mfrac><mrow><mi>S</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>a</mi><mi>l</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>p</mi><mi>i</mi><mi>x</mi><mi>e</mi><mi>l</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mn>1</mn><mo separator="true">,</mo><mn>000</mn><mo separator="true">,</mo><mn>000</mn></mrow></mfrac><mo stretchy="false">)</mo><mo>×</mo><mtext>Total pixel count</mtext></mrow><annotation encoding="application/x-tex">{{Area (km^2)} = (\frac{Spatial resolution (meters/pixel)^2}{1,000,000})\times{\text{Total pixel count}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.59em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal">re</span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1089em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">000</span><span class="mpunct mtight">,</span><span class="mord mtight">000</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Sp</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">ia</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">reso</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">ers</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord text"><span class="mord">Total pixel count</span></span></span></span></span></span></span></span></p></div><div id="qSxxqD8lYG" class="myst-jp-nb-block relative group/block"><p>Plot the timeseries and the cloud threshold of 25%. If the cloud cover is higher the timestep will be excluded later on.</p><p>Plot the <strong>cloud percentage</strong> with the threshold.</p></div><div id="E23iElT2GT" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df.plot(y=&quot;perc_cloud&quot;,rot=45,kind=&quot;line&quot;,marker=&#x27;o&#x27;)
plt.axhline(y = 25, color = &quot;r&quot;, linestyle = &quot;-&quot;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="JsPKjYzq9dlkGgExo4Qbh" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="HHnwKEut0o" class="myst-jp-nb-block relative group/block"><h3 id="calculate-the-snow-percentage" class="relative group"><span class="heading-text">Calculate the snow percentage</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#calculate-the-snow-percentage" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Divide the number of snow pixels by the number of total pixels = snow percentage</p></div><div id="I4E8WQI1Pg" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">perc_snow = df[&quot;n_snow_vals&quot;].values / df[&quot;n_catchment_vals&quot;].values * 100
df[&quot;perc_snow&quot;] = perc_snow
df[:3]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="MWkcls2ZTefquRQHpiwmS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="AxlhxN5TUg" class="myst-jp-nb-block relative group/block"><p>Plot the <strong>unfiltered snow percentage</strong></p></div><div id="M18WzlZFSj" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df.plot(y=&quot;perc_snow&quot;,rot=45,kind=&quot;line&quot;,marker=&#x27;o&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="8AnXKLDLyl163MQWJaU-M" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="QcGKQ3AizC" class="myst-jp-nb-block relative group/block"><h3 id="filter-out-cloudy-time-steps" class="relative group"><span class="heading-text">Filter out cloudy time steps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#filter-out-cloudy-time-steps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Keep only the dates with cloud coverage less than the threshold</p></div><div id="lTNEnFfMt3" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df_filtered = df.loc[df[&quot;perc_cloud&quot;]&lt;25]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="cwVXRRxbhILsLe67zc1EQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="lbcB4PoMaw" class="myst-jp-nb-block relative group/block"><h3 id="plot-and-save-the-cloud-free-snow-percentage-time-series" class="relative group"><span class="heading-text">Plot and save the cloud free snow percentage time series</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-and-save-the-cloud-free-snow-percentage-time-series" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Plot the <strong>cloud filtered snow percentage</strong></p></div><div id="Xv0Kyvumtm" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df_filtered.plot(y=&quot;perc_snow&quot;,rot=45,kind=&quot;line&quot;,marker=&#x27;o&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="iG9VgDmaD_zd3eDz8yg5n" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RqS8MhmMKR" class="myst-jp-nb-block relative group/block"><p>Save the <strong>cloud filtered snow percentage</strong></p></div><div id="C4JKhCdKYB" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">df_filtered.to_csv(&quot;31_results/filtered_snow_perc.csv&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="OY7Jo9g-0a0qBrDQ5-8ne" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div class="myst-backmatter-parts"></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/cubes-and-clouds/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-CH4FVTDV.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/root-SIO6LUTY.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-FAHZZXAC.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/routes/$-PRP77N34.js"/><script>window.__remixContext = {"url":"/lectures/data-processing/exercises/data-processing-openeo","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-31a8c1d3a4d9975a0cb29a0653d87420.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-e597f38591b7b668aa07d7f0612298e0.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/cubes-and-clouds"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-31a8c1d3a4d9975a0cb29a0653d87420.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-e597f38591b7b668aa07d7f0612298e0.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"page":{"version":3,"kind":"Notebook","sha256":"99ad7a8f8c969a958b6e42434aa054bd74b585a462b28384da58c4069ef035cb","slug":"lectures.data-processing.exercises.data-processing-openeo","location":"/lectures/3.1_data_processing/exercises/31_data_processing_openeo.ipynb","dependencies":[],"frontmatter":{"title":"3.1 Data Processing OpenEO","content_includes_title":false,"kernelspec":{"name":"conda-env-cubes-and-clouds-cubes-and-clouds-cubes_and_clouds_new-py","display_name":"cubes-and-clouds-cubes-and-clouds-cubes_and_clouds_new","language":"python"},"github":"https://github.com/EO-college/cubes-and-clouds","subject":"Cubes and Clouds learning materials","numbering":{"title":{"offset":3}},"source_url":"https://github.com/EO-college/cubes-and-clouds/blob/main/lectures/3.1_data_processing/exercises/31_data_processing_openeo.ipynb","edit_url":"https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/3.1_data_processing/exercises/31_data_processing_openeo.ipynb","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","exports":[{"format":"ipynb","filename":"31_data_processing_openeo.ipynb","url":"/cubes-and-clouds/build/31_data_processing_o-7bf885fcc3ac68eac6a14452f927e942.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","children":[{"type":"image","style":{"float":"center","marginRight":"10px","marginLeft":"10px","maxHeight":"250px"},"url":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","alt":"Cubes \u0026 Clouds logo","key":"nA5Afn0ASg","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/main/icons/cnc_3icons_process_circle.svg"}],"key":"IKJge160WI"}],"key":"TuYJ6kbjth"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"image","style":{"float":"center","marginRight":"10px","maxHeight":"100px"},"url":"/cubes-and-clouds/build/7d92286654718ed077e8b148b8c89bdd.png","alt":"openEO logo","key":"pmu8GPS3t2","urlSource":"https://openeo.org/images/openeo_logo.png"}],"key":"EWIkrA30h1"},{"type":"heading","depth":2,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Snow Cover mapping with openEO","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jHkrSjYqSJ"}],"identifier":"snow-cover-mapping-with-openeo","label":"Snow Cover mapping with openEO","html_id":"snow-cover-mapping-with-openeo","implicit":true,"key":"YUfAPIUWXf"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In this exercise we will build a complete EO workflow on a cloud platform; from data access to obtaining the result. In this example we will analyse snow cover in the Alps.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YA6WXxoj3Z"}],"key":"y3BMYHqFvJ"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"We are going to follow these steps in our analysis:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Y0AqWydxHR"}],"key":"OIVd7KYR3o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Load satellite collections","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"RfI5HA57ZR"}],"key":"g0rJ0IC2WV"}],"key":"iSk6Vczjuz"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Specify the spatial, temporal extents and the features we are interested in","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Hork2jDfH1"}],"key":"ctwJ8vW7j1"}],"key":"oO0agxoLJn"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Process the satellite data to retrieve snow cover information","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"YEosqpRX6c"}],"key":"c9owqVRVH3"}],"key":"M7LKbDbaS1"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Aggregate information to get catchment statistics over time","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"jPJh3yo1q4"}],"key":"nNzqvVZ0RE"}],"key":"peH1F9EHQ0"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Visualize and analyse the results","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"jqFEULws6P"}],"key":"G95M9PuVN8"}],"key":"d0M23L235s"}],"key":"iHH4IZZOzk"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"More information on the openEO Python Client: ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xcnDOAvtux"},{"type":"link","url":"https://open-eo.github.io/openeo-python-client/index.html","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"https://​open​-eo​.github​.io​/openeo​-python​-client​/index​.html","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"HX3u37UBxg"}],"urlSource":"https://open-eo.github.io/openeo-python-client/index.html","key":"HLE2W25SFh"}],"key":"Q7FxXWXCLk"}],"visibility":"show","key":"FoZOqkWYKu"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qY7NwdsdEx"}],"identifier":"libraries","label":"Libraries","html_id":"libraries","implicit":true,"key":"L9oHp0LsRb"}],"visibility":"show","key":"mlBEbObJNv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We start by creating the shared folders and data files needed to complete the exercise using the following shell commands","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BseIC59ovu"}],"key":"NPnTNuX9hm"}],"key":"i8AsX62Ul3"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# platform libraries\nimport openeo\n\n# utility libraries\nfrom datetime import date\nimport numpy as np\nimport xarray as xr\nimport rioxarray\nimport json\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport geopandas as gpd\nimport leafmap.foliumap as leafmap","visibility":"show","key":"dngEDNnm2W"},{"type":"outputs","id":"qk5_XZNbpu7soSRHpqCFK","children":[],"visibility":"show","key":"PinC9Cd2If"}],"visibility":"show","key":"OkU2kxGMFF"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connect to a cloud platform","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pr2mxtDX98"}],"identifier":"connect-to-a-cloud-platform","label":"Connect to a cloud platform","html_id":"connect-to-a-cloud-platform","implicit":true,"key":"zJ1jugYEqS"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Connect to the Copernicus Dataspace Ecosystem. Being connected allows for data discovery.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mGBWy52VJI"}],"key":"rs579AtE0H"}],"visibility":"show","key":"XE9OVpBYsF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"conn = openeo.connect('https://openeo.dataspace.copernicus.eu/')","visibility":"show","key":"p9DbcpEjn9"},{"type":"outputs","id":"kVSjnhJQQTVE9v3oWLYJV","children":[],"visibility":"show","key":"E4GBM5WsFy"}],"visibility":"show","key":"LSJcfTdd31"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"And login. Being logged in allows to use the full range of functionality including processing!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yv5QKgDK1E"}],"key":"twaDTA5bav"}],"key":"sErB69OiDl"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"conn.authenticate_oidc()","visibility":"show","key":"TQAQV21jX5"},{"type":"outputs","id":"L9GtT-LzZyQlh11Mb0_0c","children":[],"visibility":"show","key":"yPLEFY9deI"}],"visibility":"show","key":"U6NAOpOmFM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check if the login worked.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dEUedp636w"}],"key":"NeX5gWptvU"}],"key":"OS6lfCAbur"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"conn.describe_account()","visibility":"show","key":"QQEIoA9zsL"},{"type":"outputs","id":"poDfagMTL-47WcU51dulM","children":[],"visibility":"show","key":"PkI4KVlCFR"}],"visibility":"show","key":"LAjurZvofX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Region of Interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h0aM4nYAl7"}],"identifier":"region-of-interest","label":"Region of Interest","html_id":"region-of-interest","implicit":true,"key":"jXOTM1i8MD"}],"key":"sbXhdgR61z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Our region of interest is the Val Passiria Catchment in the South Tyrolian Alps (Italy). Let’s load the catchment area.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NB0Pe6Pwtq"}],"key":"DxW7rB8iku"}],"key":"wfSh90mr3K"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"catchment_outline = gpd.read_file('31_data/catchment_outline.geojson')","visibility":"show","key":"IhxFlS1Bp2"},{"type":"outputs","id":"ebXpgzBNRXgxDiCQ7KfcK","children":[],"visibility":"show","key":"yhKQPg688m"}],"visibility":"show","key":"WgHK2JLJhq"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"center = (float(catchment_outline.centroid.y), float(catchment_outline.centroid.x))\nm = leafmap.Map(center=center, zoom=10)\nm.add_vector('31_data/catchment_outline.geojson', layer_name=\"catchment\")\nm","visibility":"show","key":"FWtmkYkBzZ"},{"type":"outputs","id":"1XyV6fwymC1Su_bduFBIt","children":[],"visibility":"show","key":"WfxnDYaCUx"}],"visibility":"show","key":"OxYu6KECKw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quiz hint: Look closely at the end of the displayed catchment area to identify the outlet","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"an9r5JClM4"}],"key":"lt3GPBXGk5"}],"key":"rt2SaB6i4D"}],"key":"qbJRqmiXSn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspect Metadata","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iLpRi1cG7L"}],"identifier":"inspect-metadata","label":"Inspect Metadata","html_id":"inspect-metadata","implicit":true,"key":"FB1P6XEWL9"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We need to set the following configurations to define the content of the data cube we want to access:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bWD4KUoyjf"}],"key":"wENzw26AiX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"dataset name","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jszd0msR11"}],"key":"WwLfrWMvqE"}],"key":"wKMqUVgIDr"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"band names","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"alFpZCU4SL"}],"key":"V2P2deuSQT"}],"key":"pauAzRZMjT"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"time range","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"prnBSvRryj"}],"key":"N0dQLYZz53"}],"key":"CmFQuYVBuY"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"the area of interest specifed via bounding box coordinates","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kDYFl5Q7h1"}],"key":"vBJlLR24mj"}],"key":"ERAMZKQj2i"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"spatial resolution","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SkfJ0ofkK1"}],"key":"mOkuefBa1F"}],"key":"hiM4I2TiER"}],"key":"nHYpTF25DH"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"To select the correct dataset we can first list all the available datasets.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DyDXirC5ro"}],"key":"FPldLtu6zb"}],"key":"Euozo98EMo"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(conn.list_collection_ids())","visibility":"show","key":"tmmm8d95mI"},{"type":"outputs","id":"s4777ufPpHyZ8QAtJsVg5","children":[],"visibility":"show","key":"qjFORDC43Q"}],"visibility":"show","key":"OmYLZtshrc"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We want to use the Sentinel-2 L2A product. It’s name is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DS2slEFzAs"},{"type":"inlineCode","value":"'SENTINEL2_L2A'","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pqNsUiAhU8"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZWxdkdTj4Y"}],"key":"SXYZkt0xwT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We get the metadata for this collection as follows. This is an important step to familiarize yourself with the data collection (e.g. learn the band names).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wNATty90y1"}],"key":"gbB3ybPsC7"}],"key":"Mp0D7tczX6"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"conn.describe_collection(\"SENTINEL2_L2A\")","visibility":"show","key":"uC5LxKx7ES"},{"type":"outputs","id":"SxAKbVVjKBHC_97-mtUq7","children":[],"visibility":"show","key":"vlEj6TkAiv"}],"visibility":"show","key":"Mc9u488n8g"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define a workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tBBOAbhKbD"}],"identifier":"define-a-workflow","label":"Define a workflow","html_id":"define-a-workflow","implicit":true,"key":"YU3ShiHQzN"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will define our workflow now. And chain all the processes together we need for analyzing the snow cover in the catchment.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"g9qqzYqJsx"}],"key":"DhlMlSjF5E"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Load a data cube with specific filters","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"r2txPie5Lu"}],"key":"z49vd6Pkem"}],"key":"St7S3IcuVg"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate the Normalized Difference Snow Index","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hvhvedR283"}],"key":"ay35RLS1j4"}],"key":"AUtcVWLs6A"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Classify snow and no-snow using a threshold yielding the Snow Covered Area","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"iGVfGIk3TT"}],"key":"bFFIjZXRm6"}],"key":"HqpXa79CpZ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create and apply a cloud mask to remove cloudy pixels","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FASiXBXdCt"}],"key":"VOIDjJ49jv"}],"key":"e4wPfFzloS"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Visualize one date of the snow map and crop it to the exact catchment outline","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VCLp7AMiVE"}],"key":"OUW4GC4Tzb"}],"key":"D7v8l03DAp"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate catchment statistics to get a timeseries on snow cover and cloud cover","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zaboMuquiJ"}],"key":"AcpYqN5Van"}],"key":"AljivZOagu"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Filter the time series by the cloud percentage and visualize the time series graph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ZoYhs9oEHU"}],"key":"BNfX8IiZHR"}],"key":"xT0xjwvNV3"}],"key":"qhOcVFjfQJ"}],"key":"ntyZTp03jA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define the data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hOo6AnMSsb"}],"identifier":"define-the-data-cube","label":"Define the data cube","html_id":"define-the-data-cube","implicit":true,"key":"uloYUCWKlT"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We define all extents of our data cube. We use the catchment as spatial extent. As a time range we will focus on the snow melting season 2018, in particular from Febraury to June 2018. We are only interested in the green and short wave infrared band, band 3 and 11. And we directly remove time slices with a cloud cover \u003e= 90 %.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xWQzPmPG7q"}],"key":"Ex8ZGBippL"}],"key":"GljigeadFy"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"bbox = catchment_outline.bounds.iloc[0]\nbbox","visibility":"show","key":"PMf6iPGDSu"},{"type":"outputs","id":"o0P2mP82vObSh1DD3r1pB","children":[],"visibility":"show","key":"XWVvAhfHTA"}],"visibility":"show","key":"OxSteXrHy0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from openeo.processes import lte\ncollection      = 'SENTINEL2_L2A'\nspatial_extent  = {'west':bbox[0],'east':bbox[2],'south':bbox[1],'north':bbox[3],'crs':4326}\ntemporal_extent = [\"2018-02-01\", \"2018-06-30\"]\nbands           = ['B03', 'B11', 'SCL']\nproperties={\"eo:cloud_cover\": lambda x: lte(x, 90)}","visibility":"show","key":"b0bDkjqgAS"},{"type":"outputs","id":"MxTOS44gDwSu2Tx1YjwM_","children":[],"visibility":"show","key":"D14UCf7kjg"}],"visibility":"show","key":"ElobTHP3Jd"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load the data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YhULTCnoSM"}],"identifier":"load-the-data-cube","label":"Load the data cube","html_id":"load-the-data-cube","implicit":true,"key":"XweuTnLCuN"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We have defined the extents we are interested in. Now we use these definitions to load the data cube.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qUvHgQUIXn"}],"key":"jrKtR4cqj8"}],"visibility":"show","key":"RAkiKmQXnu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"s2 = conn.load_collection(collection,\n                          spatial_extent=spatial_extent,\n                          bands=bands,\n                          temporal_extent=temporal_extent,\n                          properties=properties)","visibility":"show","key":"QiIJDY35E7"},{"type":"outputs","id":"kw7-Ze36Y-SvdHd376ETj","children":[],"visibility":"show","key":"f9NDtHxBXZ"}],"visibility":"show","key":"TNhtWjLrS3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"NDSI - Normalized Difference Snow Index","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"twg3kXajO6"}],"identifier":"ndsi-normalized-difference-snow-index","label":"NDSI - Normalized Difference Snow Index","html_id":"ndsi-normalized-difference-snow-index","implicit":true,"key":"aRF7gHCEll"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The Normalized Difference Snow Index (NDSI) is computed as:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kKg66AyXDQ"}],"key":"c9XOxm5n25"},{"type":"math","value":"NDSI = \\frac {GREEN - SWIR} {GREEN +SWIR}","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmi\u003eD\u003c/mi\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003eG\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eW\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmi\u003eG\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eE\u003c/mi\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003eW\u003c/mi\u003e\u003cmi\u003eI\u003c/mi\u003e\u003cmi\u003eR\u003c/mi\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eNDSI = \\frac {GREEN - SWIR} {GREEN +SWIR}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eD\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.1297em;vertical-align:-0.7693em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3603em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eW\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.00773em;\"\u003eR\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eGREEN\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05764em;\"\u003eS\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.13889em;\"\u003eW\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.07847em;\"\u003eI\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.00773em;\"\u003eR\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.7693em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"1","key":"ORj5TvwWKk"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We have created a Sentinel-2 data cube with bands B03 (green) and B11 (SWIR). We will use the green and SWIR band to calculate a the NDSI. This process is reducing the band dimension of the data cube to generate new information, the NDSI.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cZxFgBX5zy"}],"key":"JEQyFJKvqa"}],"key":"VGYNyF27zk"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"green = s2.band(\"B03\")\nswir = s2.band(\"B11\")\nndsi = (green - swir) / (green + swir)\nndsi","visibility":"show","key":"VkFEXv3khq"},{"type":"outputs","id":"Ni_Hq6YbAb-smMIz9WJb5","children":[],"visibility":"show","key":"I7Vek4XuZY"}],"visibility":"show","key":"y4P7MLPrb0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating the Snow Map","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ehYz6cVTgr"}],"identifier":"creating-the-snow-map","label":"Creating the Snow Map","html_id":"creating-the-snow-map","implicit":true,"key":"Gdme8vlE9p"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"So far we have a time series map of NDSI values. We are intereseted in the presence of snow though. Ideally in a binary classification: snow and no snow.\nTo achieve this we are setting a threshold of 0.4 on the NDSI. This gives us a binary snow map.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HBdqBnSS6E"}],"key":"dKHtYuBMDy"}],"key":"NxHHg9erbT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"snowmap = ( ndsi \u003e 0.4 ) * 1.0  # the addition of \"* 1.00\" is a workaround for a backend specific implementation problem. Once solved on the CDSE openEO backend it could be removed\nsnowmap","visibility":"show","key":"uKOrxQIM8J"},{"type":"outputs","id":"uvLKVN5hr5-VLtODoGL8y","children":[],"visibility":"show","key":"qZB0fOx51F"}],"visibility":"show","key":"lAtbNWvEB3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a cloud mask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sM9Tt7dCq4"}],"identifier":"creating-a-cloud-mask","label":"Creating a cloud mask","html_id":"creating-a-cloud-mask","implicit":true,"key":"GNLOWOFOqj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We are going to use the Scene Classification of Sentinel-2, called the “SCL” band,  for creating a cloud mask and then applying it to the NDSI. The values we are interested in are: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"q4OoFugLIw"},{"type":"inlineCode","value":"8 = cloud medium probability","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fUYERWpBl9"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XADn4VePFN"},{"type":"inlineCode","value":"9 = cloud high probability","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lxqNFxndRV"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YQnONMy3Hj"},{"type":"inlineCode","value":"3 = cloud shadow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rY7kvm1yjJ"}],"key":"avYNsja8Pk"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Here is more information on the Scene Classification of Sentinel-2: ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dcaE7qURcR"},{"type":"link","url":"https://sentiwiki.copernicus.eu/web/s2-processing#S2-Processing-Scene-Classification","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​sentiwiki​.copernicus​.eu​/web​/s2​-processing​#S2​-Processing​-Scene​-Classification","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ThITcDIdEl"}],"urlSource":"https://sentiwiki.copernicus.eu/web/s2-processing#S2-Processing-Scene-Classification","key":"t0PMpn6mrU"}],"key":"u5Ix4Pe0tp"}],"key":"V5VTd5oXwB"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"scl_band = s2.band(\"SCL\")\ncloud_mask = ( (scl_band == 8) | (scl_band == 9) | (scl_band == 3) ) * 1.0\ncloud_mask","visibility":"show","key":"UMq9Rp1GRQ"},{"type":"outputs","id":"ayjfjVpj53Le-Vukw8gbQ","children":[],"visibility":"show","key":"d8EGtMrMYu"}],"visibility":"show","key":"Ax3qwsGpIL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The SCL layer has a ground sample distance of 20 meter while the other bands have 10 meter GSD","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CiUNHw3Zdt"}],"key":"uwoeOphSDz"}],"key":"d0BODM5mRA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Applying the cloud mask to the snowmap","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x4Q3LAPzj5"}],"identifier":"applying-the-cloud-mask-to-the-snowmap","label":"Applying the cloud mask to the snowmap","html_id":"applying-the-cloud-mask-to-the-snowmap","implicit":true,"key":"qXearlYJRP"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will mask out all pixels that are covered by clouds. This will result in: 0 = no_snow, 1 = snow, 2 = cloud","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GoeUzZQrdn"}],"key":"qWnBItdQu9"}],"key":"T3oPi8G3yo"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"snowmap_cloudfree = snowmap.mask(cloud_mask,replacement=2) # replacement is null by default\nsnowmap_cloudfree","visibility":"show","key":"NkDruFbUbX"},{"type":"outputs","id":"tCum-bajX-cSIyz_vjSzJ","children":[],"visibility":"show","key":"rXwizXgoSZ"}],"visibility":"show","key":"KDVeN2zebQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Mask Polygon: From Bounding Box to Shape","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"orb8nhUfyK"}],"identifier":"mask-polygon-from-bounding-box-to-shape","label":"Mask Polygon: From Bounding Box to Shape","html_id":"mask-polygon-from-bounding-box-to-shape","implicit":true,"key":"dlp6cNlbbH"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We have a cloud masked snow map data cube now. In order to keep only pixels within the exact chatchment boundaries we mask to the outline of the catchment. Values outside of the boundaries are set to NA.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SGzg2cGXtD"}],"key":"heZFzGkp8u"}],"key":"SLr1swc0In"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"catchment_outline['geometry'][0]","visibility":"show","key":"si7C3WIsDB"},{"type":"outputs","id":"ptxOSx0Q-eNj6XC0ISTqe","children":[],"visibility":"show","key":"aOAeKQjEQm"}],"visibility":"show","key":"DU4zhHdzG8"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"snowmap_cloudfree_masked = snowmap_cloudfree.mask_polygon(catchment_outline['geometry'][0])","visibility":"show","key":"nZD5rWZDjm"},{"type":"outputs","id":"DDEoL-Ig7Tggpj4zGCyF_","children":[],"visibility":"show","key":"sHJZWVS0sA"}],"visibility":"show","key":"gDP6N7Xn7T"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize one time step of the timeseries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dtnxStQoJR"}],"identifier":"visualize-one-time-step-of-the-timeseries","label":"Visualize one time step of the timeseries","html_id":"visualize-one-time-step-of-the-timeseries","implicit":true,"key":"zmPe2gWWi6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s have a first look at a time slice of our snow map. So far we have not computed anything. We have only defined a set of functions that are going to be applied in sequence. This makes up our workflow or processing graph.\nTo reduce the data volume which we are going to download we are only selecting one time step of our data cube.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"j9B13diz8Z"}],"key":"Fx4YBoUnxz"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In order to start the processing we have to tell the cloud platform specifically that we want to execute our workflow. In this case we want to start the processing directly without registering a job on the backend. This solution is good for small amounts of data. For larger processing tasks batch jobs are preferred (we’ll do that later).","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BwYG9IkqhW"}],"key":"c0ZNRGpBDU"}],"key":"Xzc9ltrpBZ"}],"key":"dRjfrL3uO1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"snowmap_cloudfree_1d = snowmap_cloudfree_masked.filter_temporal('2018-02-10', '2018-02-12')\nsnowmap_cloudfree_1d.download('31_results/snowmap_cloudfree_1d.nc')","visibility":"show","key":"ubuoMXjIch"},{"type":"outputs","id":"Ijs4QJGOQVPVLdONn_x4c","children":[],"visibility":"show","key":"v9sg7zOlLs"}],"visibility":"show","key":"VK85RThtt5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Once the processing is done on the cloud and the data is downloaded we can load the file into our working environment and plot it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XwzwnagM9Q"}],"key":"tGaQs8OXXd"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The area of interest is spread across two S2 tiles. This is visibile in the northern part of the plot because we chose one specific acquisition date where there is not data available for the northern tile.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"psc3eYQT5F"}],"key":"CI2J758V6d"}],"key":"tCb7qJWFqm"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"xr.open_dataarray('31_results/snowmap_cloudfree_1d.nc',decode_coords=\"all\")[0].plot.imshow()","visibility":"show","key":"sNeBFjkB4N"},{"type":"outputs","id":"rRWtG-jAP4nSXnGnwQCBz","children":[],"visibility":"show","key":"J87RsK22bn"}],"visibility":"show","key":"hgcq5951eb"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Catchment Statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ziheWXgxXW"}],"identifier":"calculate-catchment-statistics","label":"Calculate Catchment Statistics","html_id":"calculate-catchment-statistics","implicit":true,"key":"j5kWnQ8BNk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We are looking at the snow cover of a region over time and want to extract aggregated catchment statistics on snow cover and cloud cover. We do this by counting all the pixels in the catchment, counting the pixels that are covered by snow and the pixels covered by clouds.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qfUpSDgnS1"}],"key":"eega9WIbmQ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Ultimately we are interested in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xmOwPlLZ3U"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"snow covered area (SCA)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pYwgTHb7Ap"}],"key":"u583aRgcYy"},{"type":"text","value":" within the catchment. We count all snow covered pixels within the catchment for each time step. Multiplied by the pixel size that would be the snow covered area. The snow pixel count divided by the total number of pixels in the catchment is the percentage of pixels covered with snow. We will use this number.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qqUn6broGS"}],"key":"qWDA9sHiLK"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"We need to make sure that the information content meets our expected quality. Therefore, we calculate the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"j9ojv6i5JE"},{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"cloud percentage","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vsAnUNtsD7"}],"key":"Dtm6z1MNd6"},{"type":"text","value":" for the catchment for each timestep. We use this information to filter the timeseries. All timesteps that have a cloud coverage of over 25% will be discarded.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fYBZssXIsr"}],"key":"E48TVgwRs7"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"We are going to","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sBJxCly7fg"}],"key":"FfdUma9Nv3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Get number of pixels in the catchment: total, clouds, snow.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"OAHse9YHiq"}],"key":"e1FbGQ4ywh"}],"key":"BepdMSWH1f"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Combine the three aggregated pixel counts into one data cube.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"cp4x7XGo5C"}],"key":"rXlycjRnwm"}],"key":"KqViiNXM0E"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate cloud and snow percentages","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"sXqj7CyKUj"}],"key":"jNrf9yIY1Y"}],"key":"asIkuyj51K"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Filter cloudy time steps with the cloud percentage","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"PTCYVmZCW9"}],"key":"CxEwiQeW3R"}],"key":"BuwkIhk0A2"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Plot the resulting time series","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"eNbkuitfMS"}],"key":"i2YuJ7NHmj"}],"key":"spWamFDoMy"}],"key":"b18bgA8OjR"}],"visibility":"show","key":"mb2YgtJLaS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quiz hint: remember the pixel counts here for the final exercise","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Kc93LZEh7g"}],"key":"WOuy2HIDv2"}],"key":"Q7eUjTo2Ly"}],"key":"lr0KTai2lA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Count pixels and aggregate spatially to the catchment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hgxAVOqcxG"}],"identifier":"count-pixels-and-aggregate-spatially-to-the-catchment","label":"Count pixels and aggregate spatially to the catchment","html_id":"count-pixels-and-aggregate-spatially-to-the-catchment","implicit":true,"key":"PPpgCl5cHY"}],"key":"bQEkEqtyRC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# number of all pixels\nn_catchment = ((snowmap_cloudfree \u003e -1) * 1.0).add_dimension(name=\"bands\",type=\"bands\",label=\"n_catchment\")\n\n# number of cloud pixels (no function needed, mask already created before)\nn_cloud = cloud_mask.add_dimension(name=\"bands\",type=\"bands\",label=\"n_cloud\")\n\n# number of snow pixels\nn_snow = ((snowmap_cloudfree == 1) * 1.0).add_dimension(name=\"bands\",type=\"bands\",label=\"n_snow\")\n\n# combine the binary data cubes into one data cube\nn_catchment_cloud_snow = n_catchment.merge_cubes(n_cloud).merge_cubes(n_snow)\n\n# aggregate to catchment\nn_pixels = n_catchment_cloud_snow.aggregate_spatial(geometries = catchment_outline['geometry'][0], reducer = 'sum')\nn_pixels","visibility":"show","key":"RDTvyCABZc"},{"type":"outputs","id":"TFpRVLYzSAyE0catAxFgJ","children":[],"visibility":"show","key":"dEgVPQcEYe"}],"visibility":"show","key":"kjtJQlzDuV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Register a batch job for processing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f0QfTNuvtG"}],"identifier":"register-a-batch-job-for-processing","label":"Register a batch job for processing","html_id":"register-a-batch-job-for-processing","implicit":true,"key":"bBnmoKnq8J"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We are starting the processing now with a batch job. This registers our job on the backend in our user space and assigns further information to the job, such as an ID, the job status, the process graph and further metadata. First we specifiy the end of our process graph with ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gscALR2WIi"},{"type":"inlineCode","value":"save_result()","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dQLalEZF6G"},{"type":"text","value":" and specifiy the format (since we aggregated over the spatial dimension we will receive three arrays of data. So JSON is a suitable format). Then we create the batch job and start it.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"QP7rjnSuXA"}],"key":"vawhcozEZC"}],"key":"EDfZenPSu3"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the end of the process graph and the output format\nn_pixels_json = n_pixels.save_result(format=\"JSON\")\n# Create a batch job\njob = n_pixels_json.create_job(title=\"n_pixels_json\")\n# start the job and wait till it finishes\njob.start_and_wait()","visibility":"show","key":"ZOTWrpT865"},{"type":"outputs","id":"hg5MzeGzRG3Wqr_vsRT4q","children":[],"visibility":"show","key":"LFIZ7YMmS1"}],"visibility":"show","key":"jKueswXxZG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can check the status of our job. We can download the result once the job has finished.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BL2fR32GiP"}],"key":"YXJPYOjocO"}],"key":"zgK245HOC1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"job.status()","visibility":"show","key":"rI0jDMUnmX"},{"type":"outputs","id":"Zn3wmi54PrvENLY5b_xFy","children":[],"visibility":"show","key":"bgXN19wLZm"}],"visibility":"show","key":"kAtd0rn11H"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"if job.status() == \"finished\":\n    results = job.get_results()\n    results.download_files(\"31_results/\")","visibility":"show","key":"jJ9oUX9gdM"},{"type":"outputs","id":"uQmC3Fpca74QNKHnuTyXF","children":[],"visibility":"show","key":"dkklxxz2ET"}],"visibility":"show","key":"nwjH3jEMce"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick hint: take a look at the job description: e.g. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pamRBLt7D8"},{"type":"inlineCode","value":"job.describe_job()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h927OEUGMn"}],"key":"JyC3wo4KxZ"}],"key":"ZqcR1DkbYw"}],"visibility":"show","key":"DOeChTTKzF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load the resulting time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KGWIWN246i"}],"identifier":"load-the-resulting-time-series","label":"Load the resulting time series","html_id":"load-the-resulting-time-series","implicit":true,"key":"UrguecFU9S"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Let’s load the result. It contains the total number of pixels in the catchment, number of cloud and snow pixels.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RLa6qkm8kH"}],"key":"YojxOh1Gn6"}],"key":"qVk6iuWFbP"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# load the result\nwith open(\"31_results/timeseries.json\",\"r\") as file:\n    n_pixels_json = json.load(file)","visibility":"show","key":"jYShMZlS5u"},{"type":"outputs","id":"Wo24EcqXNVe-4vHaDIDoY","children":[],"visibility":"show","key":"zhJBE6BiA7"}],"visibility":"show","key":"Kr2s3mddcX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# check the first 5 entries to check the data structure.\nlist(n_pixels_json.items())[:3] # careful unsorted dates due to JSON format","visibility":"show","key":"wc28lM4YTU"},{"type":"outputs","id":"sag7D-NHHcB5jynNLUHmj","children":[],"visibility":"show","key":"E2T8WXfoAi"}],"visibility":"show","key":"zl4OPOAFr8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"len(n_pixels_json)","key":"T9HVBIH1QI"},{"type":"outputs","id":"IIOXPk93VyukO77dmeVf5","children":[],"key":"ry4jsKWAmA"}],"key":"XgbmE4fnqv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick hint: what is the length of the time series JSON?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jOhmcjkcb5"}],"key":"i6OnCr3kLF"}],"key":"KGbBArVnzP"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gO6N0lXBd9"},{"type":"inlineCode","value":"len(n_pixels_json)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rQVrJoKyvl"}],"key":"j0fSBSwRhg"}],"key":"Zxs5XDxPl4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we do some data wrangling to get a structured data frame.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RCcnjQka3H"}],"key":"DDwcdbRXKW"}],"key":"N5cExtT8b0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create a Pandas DataFrame to hold the values\ndates = [k for k in n_pixels_json]\nn_catchment_vals = [n_pixels_json[k][0][0] for k in n_pixels_json]\nn_cloud_vals = [n_pixels_json[k][0][1] for k in n_pixels_json]\nn_snow_vals = [n_pixels_json[k][0][2] for k in n_pixels_json]\n\ndata = {\n        \"time\":pd.to_datetime(dates),\n        \"n_catchment_vals\":n_catchment_vals,\n        \"n_cloud_vals\":n_cloud_vals,\n        \"n_snow_vals\":n_snow_vals\n       }\ndf = pd.DataFrame(data=data).set_index(\"time\")\n# Sort the values by date\ndf = df.sort_values(axis=0,by=\"time\")\ndf[:3]","visibility":"show","key":"JgKmBstlvy"},{"type":"outputs","id":"2GZ6YwJgYKcZtIZ-jD2Ic","children":[],"visibility":"show","key":"mLyATE8fi1"}],"visibility":"show","key":"K6ypC278Qn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compute the total number of snow pixels in the selected temporal period:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H7C5QReb6w"}],"key":"C4ghZqg7IK"}],"key":"GxxwJ6wMNm"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df.n_snow_vals.sum()","visibility":"show","key":"VJXSFTLrJt"},{"type":"outputs","id":"PsOFDyaDx3SDN6q_qWdUG","children":[],"visibility":"show","key":"sXffpxjrIq"}],"visibility":"show","key":"wVawXfwBdz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate the cloud percentage for filtering time steps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aFVI6ILZcz"}],"identifier":"calculate-the-cloud-percentage-for-filtering-time-steps","label":"Calculate the cloud percentage for filtering time steps","html_id":"calculate-the-cloud-percentage-for-filtering-time-steps","implicit":true,"key":"bmFplU8J97"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Divide the number of cloudy pixels by the number of total pixels = cloud percentage","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"egcJ1sKysc"}],"key":"dZ90zZUamy"}],"key":"y55OeMNeF0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"perc_cloud = df[\"n_cloud_vals\"].values / df[\"n_catchment_vals\"].values * 100\ndf[\"perc_cloud\"] = perc_cloud\ndf[:3]","visibility":"show","key":"NsOAbTlNT3"},{"type":"outputs","id":"slMUYV2zFwdmRhO05c0BZ","children":[],"visibility":"show","key":"X7yWAKJf81"}],"visibility":"show","key":"Sap3gV2F9L"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick hint: The sum of the n_catchment_vals should give an overall idea of the total number of pixels in the datacube for the whole time-series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r6HiytqG3x"}],"key":"St5u7YcTKR"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XzUkdtWd7h"},{"type":"inlineCode","value":"df.n_catchment_vals.sum()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EhX2rBE0vF"}],"key":"VO4w8wpLSL"}],"visibility":"show","key":"dFbUfrebn3"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick hint: a filter of the snow values can give an idea of when the maximum snow cover occurred","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NZAYq1fm2H"}],"key":"IkI1p3G78z"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xpzm0wDB5b"},{"type":"inlineCode","value":"df.where(df.n_snow_vals == df.n_snow_vals.max())","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kNWjrxiKig"}],"key":"imZcwUaGeM"}],"visibility":"show","key":"kljaPCxPJX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quick hint: a simplified approach for converting from pixel count to square kilometres is to use this simplified formula::","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XRaeomxVWo"}],"key":"Z8djKwWNQp"}],"key":"YnS4nkf6xY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineMath","value":"{{Area (km^2)} = (\\frac{Spatial resolution (meters/pixel)^2}{1,000,000})\\times{\\text{Total pixel count}}}","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmsup\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ea\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmi\u003eu\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003eo\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmsup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmn\u003e000\u003c/mn\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmn\u003e000\u003c/mn\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmtext\u003eTotal pixel count\u003c/mtext\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e{{Area (km^2)} = (\\frac{Spatial resolution (meters/pixel)^2}{1,000,000})\\times{\\text{Total pixel count}}}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.59em;vertical-align:-0.4811em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003eA\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ere\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ea\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.1089em;\"\u003e\u003cspan style=\"top:-2.655em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003cspan class=\"mpunct mtight\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e000\u003c/span\u003e\u003cspan class=\"mpunct mtight\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e000\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.485em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eSp\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ea\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eia\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ereso\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eu\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eo\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003cspan class=\"mopen mtight\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003em\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eers\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e/\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ep\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ex\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mclose mtight\"\u003e\u003cspan class=\"mclose mtight\"\u003e)\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8913em;\"\u003e\u003cspan style=\"top:-2.931em;margin-right:0.0714em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.5em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size3 size1 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.4811em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eTotal pixel count\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"X3k5ev1o0z"}],"key":"jw3gwMrSkT"}],"key":"m5YHcc4h0Q"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the timeseries and the cloud threshold of 25%. If the cloud cover is higher the timestep will be excluded later on.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HP6S1vpJ2H"}],"key":"aCfFEVsgNU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Plot the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EosI9aS62r"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"cloud percentage","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JuXfKVTpnJ"}],"key":"cCq1rlnk7f"},{"type":"text","value":" with the threshold.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"piM1e2Bhay"}],"key":"Ybt3pPuPA7"}],"key":"qSxxqD8lYG"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df.plot(y=\"perc_cloud\",rot=45,kind=\"line\",marker='o')\nplt.axhline(y = 25, color = \"r\", linestyle = \"-\")\nplt.show()","visibility":"show","key":"U14BSyTosh"},{"type":"outputs","id":"JsPKjYzq9dlkGgExo4Qbh","children":[],"visibility":"show","key":"jACZzCEyGJ"}],"visibility":"show","key":"E23iElT2GT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate the snow percentage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vnTQLGHA0s"}],"identifier":"calculate-the-snow-percentage","label":"Calculate the snow percentage","html_id":"calculate-the-snow-percentage","implicit":true,"key":"NAAwwXMr24"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Divide the number of snow pixels by the number of total pixels = snow percentage","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"VHruAOVDRt"}],"key":"NOijC09eK4"}],"key":"HHnwKEut0o"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"perc_snow = df[\"n_snow_vals\"].values / df[\"n_catchment_vals\"].values * 100\ndf[\"perc_snow\"] = perc_snow\ndf[:3]","visibility":"show","key":"IKXD30Lo06"},{"type":"outputs","id":"MWkcls2ZTefquRQHpiwmS","children":[],"visibility":"show","key":"HQJoT3aoGw"}],"visibility":"show","key":"I4E8WQI1Pg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xLlK6VSNHt"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"unfiltered snow percentage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PELrRPkhqO"}],"key":"XdbNgxvVPm"}],"key":"ZCagpXnZ3S"}],"key":"AxlhxN5TUg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df.plot(y=\"perc_snow\",rot=45,kind=\"line\",marker='o')\nplt.show()","visibility":"show","key":"b2ASUwRT6t"},{"type":"outputs","id":"8AnXKLDLyl163MQWJaU-M","children":[],"visibility":"show","key":"bHMoDg6RUA"}],"visibility":"show","key":"M18WzlZFSj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Filter out cloudy time steps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eTG9XBC5ZX"}],"identifier":"filter-out-cloudy-time-steps","label":"Filter out cloudy time steps","html_id":"filter-out-cloudy-time-steps","implicit":true,"key":"tk2PYzuGMb"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Keep only the dates with cloud coverage less than the threshold","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"MVtIkI3oO3"}],"key":"OfdgDl3puY"}],"key":"QcGKQ3AizC"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df_filtered = df.loc[df[\"perc_cloud\"]\u003c25]","visibility":"show","key":"lJ7JaqgPhg"},{"type":"outputs","id":"cwVXRRxbhILsLe67zc1EQ","children":[],"visibility":"show","key":"d5Xu0vllCc"}],"visibility":"show","key":"lTNEnFfMt3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot and save the cloud free snow percentage time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RFyPEuPoxf"}],"identifier":"plot-and-save-the-cloud-free-snow-percentage-time-series","label":"Plot and save the cloud free snow percentage time series","html_id":"plot-and-save-the-cloud-free-snow-percentage-time-series","implicit":true,"key":"pRx4iXagFi"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Plot the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jnN0WEPSei"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"cloud filtered snow percentage","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"k8sye6ha23"}],"key":"sU3AXYxkme"}],"key":"UG0OARQ0bh"}],"key":"lbcB4PoMaw"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df_filtered.plot(y=\"perc_snow\",rot=45,kind=\"line\",marker='o')\nplt.show()","visibility":"show","key":"FCdKrtzZlC"},{"type":"outputs","id":"iG9VgDmaD_zd3eDz8yg5n","children":[],"visibility":"show","key":"dEvNWs4TNA"}],"visibility":"show","key":"Xv0Kyvumtm"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Save the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QqpCKlVNAS"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"cloud filtered snow percentage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KBslROmJCZ"}],"key":"bbGy7nNmwL"}],"key":"RzuwTWbCTN"}],"visibility":"show","key":"RqS8MhmMKR"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df_filtered.to_csv(\"31_results/filtered_snow_perc.csv\")","visibility":"show","key":"xnbqF8DQch"},{"type":"outputs","id":"OY7Jo9g-0a0qBrDQ5-8ne","children":[],"visibility":"show","key":"FVf3Fa6BTR"}],"visibility":"show","key":"C4JKhCdKYB"}],"key":"j6aj5fszLu"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"3.1 Data Processing","url":"/lectures/data-processing/data-processing","group":"Process \u0026 Share"},"next":{"title":"3.1 Data Processing Pangeo","url":"/lectures/data-processing/exercises/data-processing-pangeo","group":"Process \u0026 Share"}}},"domain":"http://localhost:3000"},"project":{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-31a8c1d3a4d9975a0cb29a0653d87420.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-5c21ccf8d7d08c71d71603fb41554b25.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-e597f38591b7b668aa07d7f0612298e0.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/cubes-and-clouds/build/manifest-3595279D.js";
import * as route0 from "/cubes-and-clouds/build/root-SIO6LUTY.js";
import * as route1 from "/cubes-and-clouds/build/routes/$-PRP77N34.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/cubes-and-clouds/build/entry.client-PCJPW7TK.js");</script></body></html>