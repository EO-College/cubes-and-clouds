<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>2.4 Scaling with Pangeo - Cubes and Clouds Notebooks</title><meta property="og:title" content="2.4 Scaling with Pangeo - Cubes and Clouds Notebooks"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of Cubes and Clouds learning notebooks"/><meta property="og:description" content="Collection of Cubes and Clouds learning notebooks"/><meta name="keywords" content=""/><meta name="image" content="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg"/><meta property="og:image" content="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/app-MOQGDXHO.css"/><link rel="stylesheet" href="/cubes-and-clouds/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/cubes-and-clouds/favicon.ico"/><link rel="stylesheet" href="/cubes-and-clouds/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/cubes-and-clouds/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 dark:text-gray-300 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="Cubes and Clouds Notebooks" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/cubes-and-clouds/">Cubes and Clouds Notebooks</a><a title="How to contribute" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/cubes-and-clouds/contributing">How to contribute</a><a title="Contributors" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/cubes-and-clouds/contributors">Contributors</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Lectures" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/cubes-and-clouds/lectures/readme">Lectures</a><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="myst-fm-block-subject flex-none pr-2 smallcaps">Cubes and Clouds learning materials</div><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/EO-college/cubes-and-clouds" title="GitHub Repository: EO-college/cubes-and-clouds" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/2.4_formats_and_performance/exercises/24_dask.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">2.4 Scaling with Pangeo</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="iRwkPdlsxS" class="myst-jp-nb-block relative group/block"><img id="oKMmAhUHe9" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg" alt="Cubes &amp; Clouds logo" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/main/icons/cnc_3icons_process_circle.svg" class=""/></div><div id="u6xi7gK1sR" class="myst-jp-nb-block relative group/block"><img id="WWGVFNUe03" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/0f8adf2e4ec0feb14584840545a0ae3a.png" alt="Pangeo logo" data-canonical-url="https://raw.githubusercontent.com/pangeo-data/pangeo.io/refs/heads/main/public/Pangeo-assets/pangeo_logo.png" class=""/></div><div id="QtZDJnkMy6" class="myst-jp-nb-block relative group/block"><h2 id="parallel-computing-with-dask" class="relative group"><span class="heading-text">Parallel computing with Dask</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#parallel-computing-with-dask" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="rTeMac4QSx" class="myst-jp-nb-block relative group/block"><div class="alert alert-info"><em></em><strong>Overview</strong> <br/><br/><strong>Questions</strong><ul><li><p>What is Dask?</p></li><li><p>How can I parallelize my data analysis with Dask?</p></li></ul><strong>Objectives</strong><ul><li><p>Learn about Dask</p></li><li><p>Learn about Dask Gateway, Dask Client, Scheduler, Workers</p></li><li><p>Understand out-of-core and speed-up limitations</p></li></ul></div></div><div id="aOyydv4usv" class="myst-jp-nb-block relative group/block"><h2 id="context" class="relative group"><span class="heading-text">Context</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#context" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We will be using <a target="_blank" rel="noreferrer" href="https://docs.dask.org/" class="link">Dask<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> with <a target="_blank" rel="noreferrer" href="https://docs.xarray.dev/en/stable/" class="link">Xarray<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> to parallelize our data analysis.  We will continue to use the NDVI example.</p></div><div id="dpYP8SeUdP" class="myst-jp-nb-block relative group/block"><h2 id="parallelize-with-dask" class="relative group"><span class="heading-text">Parallelize with Dask</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#parallelize-with-dask" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="fAho3TuZFO" class="myst-jp-nb-block relative group/block"><p>We know from the previous exercise <strong>2.4_chunking</strong> that chunking is key to analyzing large data sets. In this exercise, we will learn how to parallelize our data analysis using <a target="_blank" rel="noreferrer" href="https://docs.dask.org/" class="link">Dask<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> on our chunked dataset.</p></div><div id="OAVl7Ia6U6" class="myst-jp-nb-block relative group/block"><h3 id="what-is-dask" class="relative group"><span class="heading-text">What is <a target="_blank" rel="noreferrer" href="https://docs.dask.org/" class="link">Dask<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> ?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-is-dask" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p><strong>Dask</strong> is a powerful and flexible library for parallel computing in Python. It enables users to scale their computations effortlessly while working with large datasets that exceed available memory.</p><ul><li><p>With minimal code changes, Dask accelerates existing Python libraries such as NumPy, Pandas, and Scikit-learn.</p></li><li><p>Designed for processing massive datasets, Dask is widely used in Earth Science and other data-intensive fields.</p></li><li><p>It scales effortlessly from a single laptop to clusters, cloud environments, and HPC systems.</p></li><li><p>Dask bridges the gap between exploratory analysis and large-scale production workflows.</p></li></ul></div><div id="AFo2buBwls" class="myst-jp-nb-block relative group/block"><h4 id="how-does-dask-scale-and-accelerate-your-data-analysis" class="relative group"><span class="heading-text">How does Dask scale and accelerate your data analysis?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-does-dask-scale-and-accelerate-your-data-analysis" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/stable/10-minutes-to-dask.html" class="link">Dask proposes different abstractions to distribute your computation<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>. In this <em>Dask Introduction</em> section, we will focus on <a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/stable/array.html" class="link">Dask Array<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> which is widely used in the Pangeo ecosystem as a backend of Xarray.</p><p>The chunks of a Dask Array are standard NumPy arrays. By transforming large datasets into Dask Arrays and utilizing chunks, a large array is handled as many smaller NumPy arrays. This allows us to compute each of these chunks independently.</p><p><img id="L95GBRnpEu" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/8476ef8dfea9da4ad663e93b475cbbe7.svg" alt="Dask and Numpy" data-canonical-url="https://examples.dask.org/_images/dask-array-black-text.svg" class=""/><br/><em>Image source: Dask documentation (© 2025 Dask core developers, BSD-3 Licensed).</em></p></div><div id="FWFZzZxcwe" class="myst-jp-nb-block relative group/block"><div class="alert alert-info"><em></em><strong>Note</strong><br/><ul><li><p>Xarray uses Dask Arrays instead of Numpy when chunking is enabled, and thus all Xarray operations are performed through Dask, which enables distributed processing.</p></li></ul></div></div><div id="QLBm40nWG6" class="myst-jp-nb-block relative group/block"><h4 id="how-does-xarray-with-dask-distribute-data-analysis" class="relative group"><span class="heading-text">How does Xarray with Dask distribute data analysis?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-does-xarray-with-dask-distribute-data-analysis" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>When we use chunks with Xarray, the real computation is only done when needed or explicitly requested, usually by invoking the <code>compute()</code> or <code>load()</code> functions. Dask generates a <strong>task graph</strong> describing the computations to be performed. When using <a target="_blank" rel="noreferrer" href="https://distributed.dask.org/en/stable/" class="link">Dask Distributed<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>, a <strong>Scheduler</strong> distributes these tasks across several <strong>Workers</strong>.</p><img id="HjD2l3Q0eP" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/be3fbd3e89d036a01dd22375bae5e36e.png" alt="Xarray with dask" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dask-xarray-explained.png" class=""/></div><div id="zM67FdqxwS" class="myst-jp-nb-block relative group/block"><h4 id="what-is-a-dask-distributed-cluster" class="relative group"><span class="heading-text">What is a Dask Distributed cluster?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-is-a-dask-distributed-cluster" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>A Dask Distributed cluster is made up of two main components:</p><ul><li><p>A <strong>Scheduler</strong>, responsible for handling the computation graph and distributing tasks to Workers.</p></li><li><p>One or several <strong>Workers</strong>, which compute individual tasks and store results and data in distributed memory (RAM and/or the worker’s local disk).</p></li></ul><p>A user typically needs <strong>Client</strong> and <strong>Cluster</strong> objects, as shown below, to use Dask Distributed.</p><img id="pifTRT6FuT" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/5f88b4250ac348093751d7c8111d1944.png" alt="Dask Distributed Cluster" data-canonical-url="https://user-images.githubusercontent.com/306380/66413985-27111600-e9be-11e9-9995-8f418ff48f8a.png" class=""/></div><div id="ukgRkEG6Zu" class="myst-jp-nb-block relative group/block"><h4 id="where-can-we-deploy-a-dask-distributed-cluster" class="relative group"><span class="heading-text">Where can we deploy a Dask distributed cluster?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#where-can-we-deploy-a-dask-distributed-cluster" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p><a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/stable/deploying.html" class="link">Dask distributed clusters can be deployed on your laptop or on distributed infrastructures (Cloud, HPC centers, Hadoop, etc.).<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>  Dask distributed <code>Cluster</code> object is responsible of deploying and scaling a Dask Cluster on the underlying resources.</p><p><img id="pifRHus0vC" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/5bb4678f8c7e666155eecf57b9320e34.svg" alt="Dask Cluster deployment" data-canonical-url="https://docs.dask.org/en/stable/_images/dask-cluster-manager.svg" class=""/><em>Image source: Dask documentation (© 2025 Dask core developers, BSD-3 Licensed).</em></p></div><div id="H9lflzmhOj" class="myst-jp-nb-block relative group/block"><blockquote><p>Tip<br/>A Dask <code>Cluster</code> can be created on a single machine (e.g. your laptop), which means you do not need dedicated computing resources. This corresponds to <strong>Vertical scaling</strong> as described in lecture <a class="link" href="/cubes-and-clouds/lectures/formats-and-performance/formats-and-performance">2.4 Formats and Performance</a>.</p><p>However, the speed up is limited to the resources of your single machine. This is where <strong>horizontal scaling</strong> comes in.  By adding resources from other machines, you can expand your computing power!</p></blockquote></div><div id="ad3MTDtuRQ" class="myst-jp-nb-block relative group/block"><h3 id="dask-distributed-client" class="relative group"><span class="heading-text">Dask distributed Client</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-distributed-client" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The Dask distributed <code>Client</code> is what allows you to interact with Dask distributed Clusters. When using Dask distributed, you always need to create a <code>Client</code> object. Once a <code>Client</code> has been created, it will be used by default by each call to a Dask API, even if you do not explicitly use it.</p><p>No matter the Dask API (e.g. Arrays, Dataframes, Delayed, Futures, etc.) that you use, under the hood, Dask will create a Directed Acyclic Graph (DAG) of tasks by analysing the code. Client will be responsible to submit this DAG to the Scheduler along with the final result you want to compute. The Client will also gather results from the Workers, and aggregate it back in its underlying Python process.</p><p>Using <code>Client()</code> function with no argument, you will create a local Dask cluster with a number of workers and threads per worker corresponding to the number of cores in the ‘local’ machine. The ‘local’ machine is the jupyterlab you are using in the Cloud, and the number of cores is the number of cores available in the cloud instance (not on your laptop).</p></div><div id="Td0o2Sseli" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask_gateway import JupyterHubAuth, Gateway
gateway = Gateway()
cluster_options = gateway.cluster_options()
cluster = gateway.new_cluster(cluster_options=cluster_options)
cluster.scale(3)  # create a local dask cluster on the local machine specifying 3
client = cluster.get_client()
client</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="zyk1wFdhv_l-IUvrxknRt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="IIgiJEUSH7" class="myst-jp-nb-block relative group/block"><p>Inspecting the <code>Cluster Info</code> section above gives us information about the created cluster: we have 2 or 4 workers and the same number of threads (e.g. 1 thread per worker).</p></div><div id="hHNgOkAWwQ" class="myst-jp-nb-block relative group/block"><div class="alert alert-warning"><em></em><strong>Go further</strong><br/><ul><li><p>You can also create a local cluster with the `LocalCluster` constructor and use `n_workers` and `threads_per_worker` to manually specify the number of processes and threads you want to use. For instance, we could use `n_workers=2` and `threads_per_worker=2`.</p></li><li><p>This is sometimes preferable (in terms of performance), or when you run this tutorial on your PC, you can avoid dask to use all your resources you have on your PC!</p></li></ul></div></div><div id="hemCiVQUot" class="myst-jp-nb-block relative group/block"><h3 id="dask-dashboard" class="relative group"><span class="heading-text">Dask Dashboard</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-dashboard" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Dask comes with a really handy interface: the Dask Dashboard. It is a web interface that you can open in a separate tab of your browser.</p><p>We will learn how to use it through the <a target="_blank" rel="noreferrer" href="https://github.com/dask/dask-labextension" class="link">dask jupyterlab extension<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.</p><p>To use Dask Dashboard through jupyterlab extension,
you just need to click on the orange icon shown in the following figure,</p><img id="DTt1gj0l7D" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/13301335bb11e404715202634c4bb6c0.png" alt="Dask.array" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dashboardlink.png" class=""/><p>You can click several buttons marked with blue arrows in the following images, and then drag and drop them wherever you want.</p><img id="x6aopkafrY" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/7cd9c2228eabbba5874d10af09e69bf8.png" alt="Dask.array" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dasklab.png" class=""/><img id="Nvy7XK158X" style="margin-left:auto;margin-right:auto" src="/cubes-and-clouds/build/4ab5130b44730782abf1860db4574b53.png" alt="Dask.array" data-canonical-url="https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/exampledasklab.png" class=""/><p>It’s really helpful to understand your computation and how it’s distributed.</p></div><div id="JHb9BTnAKA" class="myst-jp-nb-block relative group/block"><h2 id="dask-distributed-computations-on-our-dataset" class="relative group"><span class="heading-text">Dask Distributed computations on our dataset</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-distributed-computations-on-our-dataset" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Let’s open the Zarr dataset we’ve prepared in <a class="link" href="/cubes-and-clouds/lectures/formats-and-performance/exercises/chunking">previous chunking excersise</a>, select a single location over time, visualize the task graph generated by Dask, and observe the Dask Dashboard.</p></div><div id="cxrdftLElX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import xarray as xr
ndvi = xr.open_zarr(&#x27;test.zarr&#x27;)
ndvi</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="2FrKCt7JCADnaZozp1-BU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="Fa6rawAswj" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi[&#x27;data&#x27;].mean(dim=&#x27;x&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="UZ-AoN_f1fsmDjdRGsNAQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="YMfYVfopdq" class="myst-jp-nb-block relative group/block"><h2 id="did-you-notice-something-on-the-dask-dashboard-when-running-the-two-previous-cells" class="relative group"><span class="heading-text">Did you notice something on the Dask Dashboard when running the two previous cells?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#did-you-notice-something-on-the-dask-dashboard-when-running-the-two-previous-cells" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We didn’t actually ‘compute’ anything. Instead, we built a Dask task graph, with its size indicated as a count above, but we didn’t ask Dask to return a result.</p><p>You can check the ‘Dask graph’ to see how many layers it contains, which will help you estimate the complexity of your computation.</p><p>It shows that you have ‘4 graphs’. This can be optimized in the following steps.</p><p>Let’s try to plot the Dask graph before computation and understand what the Dask workers will do to compute the result we asked for.</p></div><div id="kGRcAuFUIU" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi[&#x27;data&#x27;].mean(dim=&#x27;x&#x27;).data.visualize()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="TQrzHfxjEj3k6PcmDzC7-" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/a78728d610c2e609a5f1add6ab18f2e7.png" alt="&lt;IPython.core.display.Image object&gt;"/></div></div></div><div id="CHJBsPDAhR" class="myst-jp-nb-block relative group/block"><p>Let’s average the time dimension and see how it differs</p></div><div id="L0H6ik10jx" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi[&#x27;data&#x27;].mean(dim=&#x27;time&#x27;).data.visualize()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="q-qAKOTzg2ySI4p_IetAL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cubes-and-clouds/build/34ac92f8bda7f141afe66629fa929a72.png" alt="&lt;IPython.core.display.Image object&gt;"/></div></div></div><div id="nnH04cfW8R" class="myst-jp-nb-block relative group/block"><h3 id="lets-compute-on-the-dask-workers" class="relative group"><span class="heading-text">Let’s compute on the Dask workers</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#lets-compute-on-the-dask-workers" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="Lf4AtxDPer" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi[&#x27;data&#x27;].mean(dim=&#x27;time&#x27;).compute()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="aTSZ2yXbBf9IRzcr0-Z6s" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="g7s31TyXkR" class="myst-jp-nb-block relative group/block"><p>Calling compute on our Xarray object triggered the execution on Dask Cluster side.</p><p>You should be able to see how Dask is working on Dask Dashboard.</p></div><div id="msy7ssvLCt" class="myst-jp-nb-block relative group/block"><h3 id="lets-try-a-bigger-computation" class="relative group"><span class="heading-text">Let’s try a bigger computation</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#lets-try-a-bigger-computation" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We will re-use the procedure we’ve learned in the previous chunking notebook.</p></div><div id="u52nf28rqR" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">### Load data using stackstac (with specific chunk) 
import stackstac
import pystac_client
import geopandas as gpd
from shapely.geometry import mapping
import numpy as np
import warnings
import rioxarray

warnings.filterwarnings(&quot;ignore&quot;)
warnings.simplefilter(&quot;ignore&quot;, RuntimeWarning)

aoi = gpd.read_file(&#x27;./assets/catchment_outline.geojson&#x27;, crs=&quot;EPGS:4326&quot;)
aoi_geojson = mapping(aoi.iloc[0].geometry)
URL = &quot;https://earth-search.aws.element84.com/v1&quot;
catalog = pystac_client.Client.open(URL)
items = catalog.search(
    intersects=aoi_geojson,
    collections=[&quot;sentinel-2-l2a&quot;],
    datetime=&quot;2019-02-01/2019-03-28&quot;,
    query= {&quot;proj:epsg&quot;: dict(eq=32632)}
).item_collection()

ds = stackstac.stack(items,
                     assets=[&#x27;red&#x27;,&#x27;nir&#x27;],
                     chunksize=(1,2,1024,1024),
                     epsg = 32632
                    )
ds</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="chzzry2ALtfj2XaMuKjo0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="we7NRjMZxw" class="myst-jp-nb-block relative group/block"><p>By inspecting any of the variables in the representation above, you’ll see that the data array represents <strong>over 188 GiB of data</strong>, which is much more than the available memory on this notebook server or the Dask Local Cluster we created earlier. But thanks to chunking, we can still analyze it!</p></div><div id="rBxncPBtfi" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">## Computing the NDVI
def NDVI(data):
    red = data.sel(band=&quot;red&quot;)
    nir = data.sel(band=&quot;nir&quot;)
    ndvi = (nir - red)/(nir + red)
    return ndvi

ndvi_xr = NDVI(ds)

## Clip the data
aoi_utm32 = aoi.to_crs(epsg=32632)
geom_utm32 = aoi_utm32.iloc[0][&#x27;geometry&#x27;]
ndvi_xr.rio.write_crs(&quot;EPSG:32632&quot;, inplace=True)
ndvi_xr.rio.set_nodata(np.nan, inplace=True)
ndvi_xr = ndvi_xr.rio.clip([geom_utm32])
ndvi_xr.rio.set_nodata(np.nan, inplace=True)

ndvi_xr = ndvi_xr.groupby(ndvi_xr.time.dt.floor(&#x27;D&#x27;)).max(skipna=True)
ndvi_xr = ndvi_xr.chunk({&quot;floor&quot;: 1, &quot;y&quot;: 2048, &quot;x&quot;: 2048})
ndvi_xr</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Pj6fDJVszprXcy2odbLu3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="fWDz6kaeBP" class="myst-jp-nb-block relative group/block"><p>Perform the same steps as in the previous exercise to convert to a Dataset and clean out problematic attributes</p></div><div id="NrSekcRdQb" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi_xr = ndvi_xr.to_dataset(name=&#x27;data&#x27;)

def remove_attrs(obj, to_remove):
    new = obj.copy()
    new.attrs = {k: v for k, v in obj.attrs.items() if k not in to_remove}
    return new

def encode(obj):
    object_coords = [name for name, coord in obj.coords.items() if coord.dtype.kind == &quot;O&quot;]
    return obj.drop_vars(object_coords).pipe(remove_attrs, [&quot;spec&quot;, &quot;transform&quot;])

ndvi_xr = ndvi_xr.pipe(encode)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="kyt12bBmdHV13cX6Xgc-0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ZVFFyL2LtF" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from dask.diagnostics import ProgressBar
ndvi_w = ndvi_xr.persist()
with ProgressBar():
    ndvi_w.to_zarr(&quot;ndvi.zarr&quot;, mode=&quot;w&quot;, consolidated=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ASuvEcjLIB3Ge36xO-x_l" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-error"><div><pre class="myst-jp-error-output text-sm font-thin font-system jupyter-error"><code><span style="color:rgb(187, 0, 0)">---------------------------------------------------------------------------</span><span>
</span><span style="color:rgb(187, 0, 0)">FutureCancelledError</span><span>                      Traceback (most recent call last)
</span><span style="color:rgb(0, 187, 187)">Cell</span><span style="color:rgb(0, 187, 187)"> </span><span style="color:rgb(0, 187, 0)">In[11]</span><span style="color:rgb(0, 187, 0)">, line 4</span><span>
</span><span style="color:rgb(0, 187, 0)">      2</span><span> ndvi_w = ndvi_xr.persist()
</span><span style="color:rgb(0, 187, 0)">      3</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">with</span><span> ProgressBar():
</span><span style="color:rgb(0, 187, 0)">----&gt; </span><span style="color:rgb(0, 187, 0)">4</span><span>     </span><span style="background-color:rgb(187, 187, 0)">ndvi_w</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">to_zarr</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&quot;</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">ndvi.zarr</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&quot;</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">mode</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&quot;</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">w</span><span style="background-color:rgb(187, 187, 0);color:rgb(187, 187, 0)">&quot;</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">consolidated</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0);font-weight:bold">True</span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/core/dataset.py:2364</span><span>, in </span><span style="color:rgb(0, 187, 187)">Dataset.to_zarr</span><span style="color:rgb(0, 0, 187)">(self, store, chunk_store, mode, synchronizer, group, encoding, compute, consolidated, append_dim, region, safe_chunks, align_chunks, storage_options, zarr_version, zarr_format, write_empty_chunks, chunkmanager_store_kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">   2186</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">&quot;&quot;&quot;Write dataset contents to a zarr group.</span><span>
</span><span style="color:rgb(0, 187, 0)">   2187</span><span> 
</span><span style="color:rgb(0, 187, 0)">   2188</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">Zarr chunks are determined in the following way:</span><span>
</span><span style="color:rgb(0, 187, 0)">   (...)</span><span style="color:rgb(0, 187, 0)">   2360</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">    The I/O user guide, with more details and examples.</span><span>
</span><span style="color:rgb(0, 187, 0)">   2361</span><span> </span><span style="color:rgb(187, 187, 0);font-style:italic">&quot;&quot;&quot;</span><span>
</span><span style="color:rgb(0, 187, 0)">   2362</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">from</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">xarray</span><span style="color:rgb(0, 0, 187);font-weight:bold">.</span><span style="color:rgb(0, 0, 187);font-weight:bold">backends</span><span style="color:rgb(0, 0, 187);font-weight:bold">.</span><span style="color:rgb(0, 0, 187);font-weight:bold">api</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span> to_zarr
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">2364</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0)">to_zarr</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">  </span><span style="background-color:rgb(187, 187, 0);color:rgb(95, 135, 135);font-style:italic"># type: ignore[call-overload,misc]</span><span>
</span><span style="color:rgb(0, 187, 0)">   2365</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2366</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">store</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">store</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2367</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">chunk_store</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">chunk_store</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2368</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">storage_options</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">storage_options</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2369</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">mode</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">mode</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2370</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">synchronizer</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">synchronizer</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2371</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">group</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">group</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2372</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">encoding</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">encoding</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2373</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2374</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">consolidated</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">consolidated</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2375</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">append_dim</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">append_dim</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2376</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">region</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">region</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2377</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">safe_chunks</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">safe_chunks</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2378</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">zarr_version</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">zarr_version</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2379</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">zarr_format</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">zarr_format</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2380</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">write_empty_chunks</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">write_empty_chunks</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2381</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">chunkmanager_store_kwargs</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">chunkmanager_store_kwargs</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">   2382</span><span> </span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/backends/api.py:2464</span><span>, in </span><span style="color:rgb(0, 187, 187)">to_zarr</span><span style="color:rgb(0, 0, 187)">(dataset, store, chunk_store, mode, synchronizer, group, encoding, compute, consolidated, append_dim, region, safe_chunks, align_chunks, storage_options, zarr_version, zarr_format, write_empty_chunks, chunkmanager_store_kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">   2462</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">try</span><span>:
</span><span style="color:rgb(0, 187, 0)">   2463</span><span>     dump_to_store(dataset, zstore, writer, encoding=encoding)
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">2464</span><span>     writes = </span><span style="background-color:rgb(187, 187, 0)">writer</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">sync</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">   2465</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">chunkmanager_store_kwargs</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">chunkmanager_store_kwargs</span><span>
</span><span style="color:rgb(0, 187, 0)">   2466</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">   2467</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">finally</span><span>:
</span><span style="color:rgb(0, 187, 0)">   2468</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> compute:

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/backends/common.py:412</span><span>, in </span><span style="color:rgb(0, 187, 187)">ArrayWriter.sync</span><span style="color:rgb(0, 0, 187)">(self, compute, chunkmanager_store_kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    409</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> chunkmanager_store_kwargs </span><span style="color:rgb(175, 0, 255);font-weight:bold">is</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">None</span><span>:
</span><span style="color:rgb(0, 187, 0)">    410</span><span>     chunkmanager_store_kwargs = {}
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">412</span><span> delayed_store = </span><span style="background-color:rgb(187, 187, 0)">chunkmanager</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">store</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">    413</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">sources</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    414</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">targets</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    415</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">lock</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">lock</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    416</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    417</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">flush</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0);font-weight:bold">True</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    418</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">regions</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0);color:rgb(0, 135, 0)">self</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">regions</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    419</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">chunkmanager_store_kwargs</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    420</span><span> </span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    421</span><span> </span><span style="color:rgb(0, 135, 0)">self</span><span>.sources = []
</span><span style="color:rgb(0, 187, 0)">    422</span><span> </span><span style="color:rgb(0, 135, 0)">self</span><span>.targets = []

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/namedarray/daskmanager.py:247</span><span>, in </span><span style="color:rgb(0, 187, 187)">DaskManager.store</span><span style="color:rgb(0, 0, 187)">(self, sources, targets, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    239</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">def</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187)">store</span><span>(
</span><span style="color:rgb(0, 187, 0)">    240</span><span>     </span><span style="color:rgb(0, 135, 0)">self</span><span>,
</span><span style="color:rgb(0, 187, 0)">    241</span><span>     sources: Any | Sequence[Any],
</span><span style="color:rgb(0, 187, 0)">    242</span><span>     targets: Any,
</span><span style="color:rgb(0, 187, 0)">    243</span><span>     **kwargs: Any,
</span><span style="color:rgb(0, 187, 0)">    244</span><span> ) -&gt; Any:
</span><span style="color:rgb(0, 187, 0)">    245</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">from</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">dask</span><span style="color:rgb(0, 0, 187);font-weight:bold">.</span><span style="color:rgb(0, 0, 187);font-weight:bold">array</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span> store
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">247</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="background-color:rgb(187, 187, 0)">store</span><span style="background-color:rgb(187, 187, 0)">(</span><span>
</span><span style="color:rgb(0, 187, 0)">    248</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">sources</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">sources</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    249</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">targets</span><span style="background-color:rgb(187, 187, 0)">=</span><span style="background-color:rgb(187, 187, 0)">targets</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    250</span><span> </span><span style="background-color:rgb(187, 187, 0)">        </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">,</span><span>
</span><span style="color:rgb(0, 187, 0)">    251</span><span> </span><span style="background-color:rgb(187, 187, 0)">    </span><span style="background-color:rgb(187, 187, 0)">)</span><span>

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/dask/array/core.py:1221</span><span>, in </span><span style="color:rgb(0, 187, 187)">store</span><span style="color:rgb(0, 0, 187)">(***failed resolving arguments***)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1218</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> </span><span style="color:rgb(175, 0, 255);font-weight:bold">not</span><span> return_stored:
</span><span style="color:rgb(0, 187, 0)">   1219</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">import</span><span style="color:rgb(undefined, undefined, undefined)"> </span><span style="color:rgb(0, 0, 187);font-weight:bold">dask</span><span>
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">1221</span><span>     </span><span style="background-color:rgb(187, 187, 0)">dask</span><span style="background-color:rgb(187, 187, 0)">.</span><span style="background-color:rgb(187, 187, 0)">compute</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">arrays</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">   1222</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">None</span><span>
</span><span style="color:rgb(0, 187, 0)">   1223</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">else</span><span>:

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/dask/base.py:681</span><span>, in </span><span style="color:rgb(0, 187, 187)">compute</span><span style="color:rgb(0, 0, 187)">(traverse, optimize_graph, scheduler, get, *args, **kwargs)</span><span>
</span><span style="color:rgb(0, 187, 0)">    678</span><span>     expr = expr.optimize()
</span><span style="color:rgb(0, 187, 0)">    679</span><span>     keys = </span><span style="color:rgb(0, 135, 0)">list</span><span>(flatten(expr.__dask_keys__()))
</span><span style="color:rgb(0, 187, 0)">--&gt; </span><span style="color:rgb(0, 187, 0)">681</span><span>     results = </span><span style="background-color:rgb(187, 187, 0)">schedule</span><span style="background-color:rgb(187, 187, 0)">(</span><span style="background-color:rgb(187, 187, 0)">expr</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">keys</span><span style="background-color:rgb(187, 187, 0)">,</span><span style="background-color:rgb(187, 187, 0)"> </span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">*</span><span style="background-color:rgb(187, 187, 0)">kwargs</span><span style="background-color:rgb(187, 187, 0)">)</span><span>
</span><span style="color:rgb(0, 187, 0)">    683</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">return</span><span> repack(results)

</span><span style="color:rgb(0, 187, 187)">File </span><span style="color:rgb(0, 187, 0)">/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/distributed/client.py:2420</span><span>, in </span><span style="color:rgb(0, 187, 187)">Client._gather</span><span style="color:rgb(0, 0, 187)">(self, futures, errors, direct, local_worker)</span><span>
</span><span style="color:rgb(0, 187, 0)">   2418</span><span>     exception = st.exception
</span><span style="color:rgb(0, 187, 0)">   2419</span><span>     traceback = st.traceback
</span><span style="color:rgb(0, 187, 0)">-&gt; </span><span style="color:rgb(0, 187, 0)">2420</span><span>     </span><span style="color:rgb(0, 135, 0);font-weight:bold">raise</span><span> exception.with_traceback(traceback)
</span><span style="color:rgb(0, 187, 0)">   2421</span><span> </span><span style="color:rgb(0, 135, 0);font-weight:bold">if</span><span> errors == </span><span style="color:rgb(187, 187, 0)">&quot;</span><span style="color:rgb(187, 187, 0)">skip</span><span style="color:rgb(187, 187, 0)">&quot;</span><span>:
</span><span style="color:rgb(0, 187, 0)">   2422</span><span>     bad_keys.add(key)

</span><span style="color:rgb(187, 0, 0)">FutureCancelledError</span><span>: finalize-hlgfinalizecompute-7bcd06d0559948638d7f848a63af28f9 cancelled for reason: scheduler-connection-lost.
Client lost the connection to the scheduler. Please check your connection and re-run your work.</span></code></pre></div></div></div></div><div id="HuWkw1CjKy" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
import numpy
with np.errstate(all=&quot;ignore&quot;):
    ndvi_xr.to_zarr(&#x27;ndvi.zarr&#x27;,mode=&#x27;w&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="gTvnX4NrhEECwKi12HOge" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="aaF57TJcbu" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="lV9Nu2tiNXQIHEx-X4isi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Qj3MeKlGe4" class="myst-jp-nb-block relative group/block"><h3 id="close-client-to-terminate-local-dask-cluster" class="relative group"><span class="heading-text">Close client to terminate local dask cluster</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#close-client-to-terminate-local-dask-cluster" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="Zi6gA0N7xi" class="myst-jp-nb-block relative group/block"><p>The <code>Client</code> and associated <code>LocalCluster</code> object will be automatically closed when your Python session ends. When using Jupyter notebooks, we recommend to close it explicitely whenever you are done with your local Dask cluster.</p></div><div id="rJPuc0QiVO" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">client.close()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="rxMingwlE45CUUh-PdFZw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="JGrs1n95SI" class="myst-jp-nb-block relative group/block"><h2 id="conclusion" class="relative group"><span class="heading-text">Conclusion</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#conclusion" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="BJ2b6be0qO" class="myst-jp-nb-block relative group/block"><p>In this exercise, we created a Dask cluster on a single machine, which is equivalent to vertical scaling as described in <strong>2.4 Formats and Performance</strong>.</p><p>However, the speedup is limited to the resources of your single machine. This is where horizontal scaling comes in. By adding resources from other machines, you can expand your computing power! In the case of dask, you can use the <a target="_blank" rel="noreferrer" href="https://gateway.dask.org/#dask-gateway" class="link">Dask Gatway<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.<br/>The Pangeo community hosts tutorials using <a class="link" href="/cubes-and-clouds&#x27;https://pangeo-eosc.vm.fedcloud.eu/hub/&#x27;">Pangeo@EOSC</a>. With the Pangeo EOSC deployment, you can learn how to use Dask Gateway to manage Dask clusters over Kubernetes, allowing us to run our data analysis in parallel, e.g. distribute tasks across multiple workers.
If you are a user of HPC center, you can also consider using <a target="_blank" rel="noreferrer" href="https://docs.dask.org/en/stable/deploying-hpc.html#high-performance-computers" class="link">Dask-jobque<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> or Dask HPC for this.</p></div><div id="PAsPOGQIaM" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="aQA0M7WpgyLJAvty-xlax" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div class="myst-backmatter-parts"></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/cubes-and-clouds/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-CH4FVTDV.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/root-SIO6LUTY.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/_shared/chunk-FAHZZXAC.js"/><link rel="modulepreload" href="/cubes-and-clouds/build/routes/$-PRP77N34.js"/><script>window.__remixContext = {"url":"/lectures/formats-and-performance/exercises/dask","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-08486cbd2d486f82b036201d3747b990.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-919a85a31be922540a1aca72038c7b60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/cubes-and-clouds"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-08486cbd2d486f82b036201d3747b990.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-919a85a31be922540a1aca72038c7b60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}]},"page":{"version":3,"kind":"Notebook","sha256":"e4872f8a7dc7ea373cedaa741ad82c315e3880bf5067dc7a5229a20675a5a22a","slug":"lectures.formats-and-performance.exercises.dask","location":"/lectures/2.4_formats_and_performance/exercises/24_dask.ipynb","dependencies":[],"frontmatter":{"title":"2.4 Scaling with Pangeo","content_includes_title":false,"kernelspec":{"name":"conda-env-cubes-and-clouds-cubes-and-clouds-pangeo-dask-py","display_name":"cubes-and-clouds-cubes-and-clouds-pangeo-dask","language":"python"},"github":"https://github.com/EO-college/cubes-and-clouds","subject":"Cubes and Clouds learning materials","numbering":{"title":{"offset":3}},"source_url":"https://github.com/EO-college/cubes-and-clouds/blob/main/lectures/2.4_formats_and_performance/exercises/24_dask.ipynb","edit_url":"https://github.com/EO-college/cubes-and-clouds/edit/main/lectures/2.4_formats_and_performance/exercises/24_dask.ipynb","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","exports":[{"format":"ipynb","filename":"24_dask.ipynb","url":"/cubes-and-clouds/build/24_dask-6ae0e48f1a3a01781c9b9cee1a67f80b.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"image","style":{"float":"center","marginRight":"10px"},"url":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","alt":"Cubes \u0026 Clouds logo","key":"oKMmAhUHe9","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/main/icons/cnc_3icons_process_circle.svg"}],"key":"qSCBmYm1Eh"}],"key":"iRwkPdlsxS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"image","style":{"float":"center","marginRight":"10px"},"url":"/cubes-and-clouds/build/0f8adf2e4ec0feb14584840545a0ae3a.png","alt":"Pangeo logo","key":"WWGVFNUe03","urlSource":"https://raw.githubusercontent.com/pangeo-data/pangeo.io/refs/heads/main/public/Pangeo-assets/pangeo_logo.png"}],"key":"bXMlUNXPih"}],"key":"u6xi7gK1sR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Parallel computing with Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AcIqwP7h9I"}],"identifier":"parallel-computing-with-dask","label":"Parallel computing with Dask","html_id":"parallel-computing-with-dask","implicit":true,"key":"hXVqhm1SAs"}],"key":"QtZDJnkMy6"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-info","children":[{"type":"emphasis","children":[],"key":"kw30WGLuAL"},{"type":"strong","children":[{"type":"text","value":"Overview","key":"mLsgY0wKNw"}],"key":"owvLVk3FV8"},{"type":"text","value":" ","key":"hdQWxBDWTt"},{"type":"break","key":"WrJpw2l4pz"},{"type":"break","key":"KpwP1Lo2Ux"},{"type":"strong","children":[{"type":"text","value":"Questions","key":"jzShBglrIs"}],"key":"XGNEVd6AI7"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"What is Dask?","key":"XctmzI1KGt"}],"key":"FZ6xWw1qZ6"}],"key":"xkUbMTrShM"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"How can I parallelize my data analysis with Dask?","key":"hENaPuZIlK"}],"key":"Tb6IbuEiPc"}],"key":"R5RAwtfHWS"}],"key":"YoendEllxC"},{"type":"strong","children":[{"type":"text","value":"Objectives","key":"KeR1ahBqkw"}],"key":"rZGI4AFG6n"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Learn about Dask","key":"pQrCQ84Uti"}],"key":"B3NNgxDYtv"}],"key":"cX5Hmseijw"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Learn about Dask Gateway, Dask Client, Scheduler, Workers","key":"nXFxpBaZTF"}],"key":"OSjaSGmAdN"}],"key":"Rl9d5u9GFy"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Understand out-of-core and speed-up limitations","key":"tz7D5QFq7i"}],"key":"eVVCjKhPYH"}],"key":"eZ3ystlNHo"}],"key":"bhQdQ4OACh"}],"key":"jM5HAQpJ1W"}],"key":"rTeMac4QSx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Context","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NNA1ZxaHpL"}],"identifier":"context","label":"Context","html_id":"context","implicit":true,"key":"BKYAXGnUYl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We will be using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YbFGTCGa4S"},{"type":"link","url":"https://docs.dask.org/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"f1ko5yqKlM"}],"urlSource":"https://docs.dask.org/","key":"GhJFLlSOCv"},{"type":"text","value":" with ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CtrmJtCHm1"},{"type":"link","url":"https://docs.xarray.dev/en/stable/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mJkgRls3JP"}],"urlSource":"https://docs.xarray.dev/en/stable/","key":"YBPuTGvMld"},{"type":"text","value":" to parallelize our data analysis.  We will continue to use the NDVI example.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lYKRqIWVLd"}],"key":"INKyoQmAxa"}],"key":"aOyydv4usv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Parallelize with Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cG0YTrwhju"}],"identifier":"parallelize-with-dask","label":"Parallelize with Dask","html_id":"parallelize-with-dask","implicit":true,"key":"TgQ0xoPgMg"}],"key":"dpYP8SeUdP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We know from the previous exercise ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W79QgMHWhA"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.4_chunking","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qwgM0Max9J"}],"key":"ijIT5zwE8t"},{"type":"text","value":" that chunking is key to analyzing large data sets. In this exercise, we will learn how to parallelize our data analysis using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fkzk0XPDCj"},{"type":"link","url":"https://docs.dask.org/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GBbX0m1Mgl"}],"urlSource":"https://docs.dask.org/","key":"gvoi9ZQuy4"},{"type":"text","value":" on our chunked dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nyb5Pg7tyA"}],"key":"Pb7m5KGHIe"}],"key":"fAho3TuZFO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c4akxaPGBc"},{"type":"link","url":"https://docs.dask.org/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mS6sZrnbP3"}],"urlSource":"https://docs.dask.org/","key":"ZdbSW0H9Mj"},{"type":"text","value":" ?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zjBDG43rbo"}],"identifier":"what-is-dask","label":"What is Dask ?","html_id":"what-is-dask","implicit":true,"key":"qZCmQXNjJE"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LTRcu1So64"}],"key":"mbXWOwhcUE"},{"type":"text","value":" is a powerful and flexible library for parallel computing in Python. It enables users to scale their computations effortlessly while working with large datasets that exceed available memory.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bz8aPZlebb"}],"key":"ocARcorqKI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"With minimal code changes, Dask accelerates existing Python libraries such as NumPy, Pandas, and Scikit-learn.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rgTfKZktup"}],"key":"SPZ3wDUtmw"}],"key":"EcSVeBr8wY"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Designed for processing massive datasets, Dask is widely used in Earth Science and other data-intensive fields.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QeG4Hzo2jX"}],"key":"iIFpwqPhds"}],"key":"TItVOLkDZ0"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"It scales effortlessly from a single laptop to clusters, cloud environments, and HPC systems.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PWqMFv2ctJ"}],"key":"OBVOf8vJs2"}],"key":"cUrLEkAj9G"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Dask bridges the gap between exploratory analysis and large-scale production workflows.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CpP91zhrEw"}],"key":"VcFazmGy12"}],"key":"nys8G5HTje"}],"key":"NUb65hYo9p"}],"key":"OAVl7Ia6U6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How does Dask scale and accelerate your data analysis?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K6t8r25fdt"}],"identifier":"how-does-dask-scale-and-accelerate-your-data-analysis","label":"How does Dask scale and accelerate your data analysis?","html_id":"how-does-dask-scale-and-accelerate-your-data-analysis","implicit":true,"key":"Yt1E1PQfFQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://docs.dask.org/en/stable/10-minutes-to-dask.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask proposes different abstractions to distribute your computation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pcWG7uNETT"}],"urlSource":"https://docs.dask.org/en/stable/10-minutes-to-dask.html","key":"WEv8zMGQXr"},{"type":"text","value":". In this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QVxRkJDXGp"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Introduction","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZQJEAyNyRX"}],"key":"jxydHYSZ2r"},{"type":"text","value":" section, we will focus on ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FTQXMMecml"},{"type":"link","url":"https://docs.dask.org/en/stable/array.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Array","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BS7vcbg347"}],"urlSource":"https://docs.dask.org/en/stable/array.html","key":"BVfDwWnmkJ"},{"type":"text","value":" which is widely used in the Pangeo ecosystem as a backend of Xarray.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L8ffXkaCJc"}],"key":"Rv11zG7PiE"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The chunks of a Dask Array are standard NumPy arrays. By transforming large datasets into Dask Arrays and utilizing chunks, a large array is handled as many smaller NumPy arrays. This allows us to compute each of these chunks independently.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mVyjzo9zyV"}],"key":"wdKsMZUQqn"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"image","url":"/cubes-and-clouds/build/8476ef8dfea9da4ad663e93b475cbbe7.svg","alt":"Dask and Numpy","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"L95GBRnpEu","urlSource":"https://examples.dask.org/_images/dask-array-black-text.svg"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WMrjcaJZVL"},{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Image source: Dask documentation (© 2025 Dask core developers, BSD-3 Licensed).","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oZvB5rOsMe"}],"key":"N1IG2XAHZl"}],"key":"Nr1KuWNGeE"}],"key":"AFo2buBwls"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-info","children":[{"type":"emphasis","children":[],"key":"jIV072l7hj"},{"type":"strong","children":[{"type":"text","value":"Note","key":"mIz1yvHZhK"}],"key":"bSGN0DIT6o"},{"type":"break","key":"QciXHqEXn1"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Xarray uses Dask Arrays instead of Numpy when chunking is enabled, and thus all Xarray operations are performed through Dask, which enables distributed processing.","key":"Pz5poEvOr9"}],"key":"v8h3phbyTC"}],"key":"qNyphJBuwZ"}],"key":"zbuORbJdla"}],"key":"amXFsd9A2p"}],"key":"FWFZzZxcwe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How does Xarray with Dask distribute data analysis?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DN2hVp4awQ"}],"identifier":"how-does-xarray-with-dask-distribute-data-analysis","label":"How does Xarray with Dask distribute data analysis?","html_id":"how-does-xarray-with-dask-distribute-data-analysis","implicit":true,"key":"dLjjjniQWK"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When we use chunks with Xarray, the real computation is only done when needed or explicitly requested, usually by invoking the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eO78GxT5cm"},{"type":"inlineCode","value":"compute()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BClQheagft"},{"type":"text","value":" or ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aKbiJR16pt"},{"type":"inlineCode","value":"load()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DtyePbvuo9"},{"type":"text","value":" functions. Dask generates a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FWaof41lEM"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"task graph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Re3FZEY5sC"}],"key":"JiGKNDqfvz"},{"type":"text","value":" describing the computations to be performed. When using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zfXYupfHkv"},{"type":"link","url":"https://distributed.dask.org/en/stable/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Distributed","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LTF9Rs8hk8"}],"urlSource":"https://distributed.dask.org/en/stable/","key":"vioWSPN72U"},{"type":"text","value":", a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EAcxaKGbNs"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scheduler","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"B6y2UbnFXI"}],"key":"gOgDR9jvZP"},{"type":"text","value":" distributes these tasks across several ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AlbPmYPTEQ"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Workers","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dh9IEqHiCK"}],"key":"i140B3D23Y"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rstzlkpyci"}],"key":"Am2Xq8X7EN"},{"type":"image","url":"/cubes-and-clouds/build/be3fbd3e89d036a01dd22375bae5e36e.png","alt":"Xarray with dask","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HjD2l3Q0eP","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dask-xarray-explained.png"}],"key":"QLBm40nWG6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is a Dask Distributed cluster?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jj8WIYOQ0B"}],"identifier":"what-is-a-dask-distributed-cluster","label":"What is a Dask Distributed cluster?","html_id":"what-is-a-dask-distributed-cluster","implicit":true,"key":"sjUlvfiUWf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A Dask Distributed cluster is made up of two main components:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TwN3T6bQWC"}],"key":"v8HmHNxwLi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kTdaDgayvh"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Scheduler","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jJkpymw6Zy"}],"key":"c075ZKIEJQ"},{"type":"text","value":", responsible for handling the computation graph and distributing tasks to Workers.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"k2bpj3gtyf"}],"key":"MvhrNHO3f8"}],"key":"br9t34onL2"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One or several ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qjdYSUfyvF"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Workers","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"z0OaSQC3wB"}],"key":"HIdzUknqaj"},{"type":"text","value":", which compute individual tasks and store results and data in distributed memory (RAM and/or the worker’s local disk).","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"pkUeeu8Fr7"}],"key":"BXzJgwZoRT"}],"key":"DKUQtUyeBg"}],"key":"k8e2iSyrls"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"A user typically needs ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Q1ELwmNHhv"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Client","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"giQ5L5MXXr"}],"key":"wEWR0mPqAD"},{"type":"text","value":" and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WnV0WL7pwK"},{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Cluster","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"g3JYyMhoqM"}],"key":"fqnVfhI5xN"},{"type":"text","value":" objects, as shown below, to use Dask Distributed.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"G2ZBj88ywb"}],"key":"e0sJPvzcbf"},{"type":"image","url":"/cubes-and-clouds/build/5f88b4250ac348093751d7c8111d1944.png","alt":"Dask Distributed Cluster","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"pifTRT6FuT","urlSource":"https://user-images.githubusercontent.com/306380/66413985-27111600-e9be-11e9-9995-8f418ff48f8a.png"}],"key":"zM67FdqxwS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Where can we deploy a Dask distributed cluster?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U0OTJ2ME2D"}],"identifier":"where-can-we-deploy-a-dask-distributed-cluster","label":"Where can we deploy a Dask distributed cluster?","html_id":"where-can-we-deploy-a-dask-distributed-cluster","implicit":true,"key":"lECRhIFaZZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://docs.dask.org/en/stable/deploying.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask distributed clusters can be deployed on your laptop or on distributed infrastructures (Cloud, HPC centers, Hadoop, etc.).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jkt5s0IEA0"}],"urlSource":"https://docs.dask.org/en/stable/deploying.html","key":"JL5idkTisF"},{"type":"text","value":"  Dask distributed ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RTiY0inwUQ"},{"type":"inlineCode","value":"Cluster","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uCrFt7lx6d"},{"type":"text","value":" object is responsible of deploying and scaling a Dask Cluster on the underlying resources.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GtQKaTKpGm"}],"key":"cZ0909klyT"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"image","url":"/cubes-and-clouds/build/5bb4678f8c7e666155eecf57b9320e34.svg","alt":"Dask Cluster deployment","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pifRHus0vC","urlSource":"https://docs.dask.org/en/stable/_images/dask-cluster-manager.svg"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Image source: Dask documentation (© 2025 Dask core developers, BSD-3 Licensed).","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"adzzanM9o1"}],"key":"fwZdhoHPBB"}],"key":"zMvX3aUHLk"}],"key":"ukgRkEG6Zu"},{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":1,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Tip","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PnTRL0niel"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zVB7B9sHPO"},{"type":"text","value":"A Dask ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YO9lJNveEx"},{"type":"inlineCode","value":"Cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SBpqy9V6wV"},{"type":"text","value":" can be created on a single machine (e.g. your laptop), which means you do not need dedicated computing resources. This corresponds to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ey7Y7JgfHn"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Vertical scaling","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oZ9B6Qkp4I"}],"key":"Pvtvdm3u4A"},{"type":"text","value":" as described in lecture ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iCg80dN8NT"},{"type":"link","url":"/lectures/formats-and-performance/formats-and-performance","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.4 Formats and Performance","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ExzpBZiwqt"}],"urlSource":"../2.4_formats_and_performance.md","dataUrl":"/lectures.formats-and-performance.formats-and-performance.json","internal":true,"protocol":"file","key":"WYgCLuXWTf"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x1LGGqN2I8"}],"key":"t2kHxGFxqp"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"However, the speed up is limited to the resources of your single machine. This is where ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"t2UvZCr9Ap"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"horizontal scaling","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"aZuYoJ0CKa"}],"key":"WSo6F75IHv"},{"type":"text","value":" comes in.  By adding resources from other machines, you can expand your computing power!","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"MdOS42H9P9"}],"key":"drEwquc9mc"}],"key":"E1MCGH1bKo"}],"key":"H9lflzmhOj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask distributed Client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j3RmbE0Mx4"}],"identifier":"dask-distributed-client","label":"Dask distributed Client","html_id":"dask-distributed-client","implicit":true,"key":"N2qvc7wud7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Dask distributed ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jo6tZs0Vv9"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eeDo74iCVw"},{"type":"text","value":" is what allows you to interact with Dask distributed Clusters. When using Dask distributed, you always need to create a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ygxe4p8gwq"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QGkJ0XFEOS"},{"type":"text","value":" object. Once a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QPSNIJGEg8"},{"type":"inlineCode","value":"Client","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vhW2nBX2cu"},{"type":"text","value":" has been created, it will be used by default by each call to a Dask API, even if you do not explicitly use it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GxRR03cHml"}],"key":"e9p1z45cZ5"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"No matter the Dask API (e.g. Arrays, Dataframes, Delayed, Futures, etc.) that you use, under the hood, Dask will create a Directed Acyclic Graph (DAG) of tasks by analysing the code. Client will be responsible to submit this DAG to the Scheduler along with the final result you want to compute. The Client will also gather results from the Workers, and aggregate it back in its underlying Python process.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S0TXp69d39"}],"key":"rez7uq5UgU"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Using ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kFAg8p0RFf"},{"type":"inlineCode","value":"Client()","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"U4JrEWJY8k"},{"type":"text","value":" function with no argument, you will create a local Dask cluster with a number of workers and threads per worker corresponding to the number of cores in the ‘local’ machine. The ‘local’ machine is the jupyterlab you are using in the Cloud, and the number of cores is the number of cores available in the cloud instance (not on your laptop).","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aIP6Ms7CAk"}],"key":"Nwpuuz2vny"}],"key":"ad3MTDtuRQ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from dask_gateway import JupyterHubAuth, Gateway\ngateway = Gateway()\ncluster_options = gateway.cluster_options()\ncluster = gateway.new_cluster(cluster_options=cluster_options)\ncluster.scale(3)  # create a local dask cluster on the local machine specifying 3\nclient = cluster.get_client()\nclient","visibility":"show","key":"a28AeejV5N"},{"type":"outputs","id":"zyk1wFdhv_l-IUvrxknRt","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":1,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n    \u003cdiv style=\"width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;\"\u003e \u003c/div\u003e\n    \u003cdiv style=\"margin-left: 48px;\"\u003e\n        \u003ch3 style=\"margin-bottom: 0px;\"\u003eClient\u003c/h3\u003e\n        \u003cp style=\"color: #9D9D9D; margin-bottom: 0px;\"\u003eClient-f149272f-05be-11f1-82f7-0255ac10009f\u003c/p\u003e\n        \u003ctable style=\"width: 100%; text-align: left;\"\u003e\n\n        \u003ctr\u003e\n        \n            \u003ctd style=\"text-align: left;\"\u003e\u003cstrong\u003eConnection method:\u003c/strong\u003e Cluster object\u003c/td\u003e\n            \u003ctd style=\"text-align: left;\"\u003e\u003cstrong\u003eCluster type:\u003c/strong\u003e dask_gateway.GatewayCluster\u003c/td\u003e\n        \n        \u003c/tr\u003e\n\n        \n            \u003ctr\u003e\n                \u003ctd style=\"text-align: left;\"\u003e\n                    \u003cstrong\u003eDashboard: \u003c/strong\u003e \u003ca href=\"https://hub.earthcode.eox.at/services/eoxhub-gateway/cubes-and-clouds/traefik-dask-gateway/clusters/cubes-and-clouds.2c86221c2f1a4c72acb054d2ad2da70f/status\" target=\"_blank\"\u003ehttps://hub.earthcode.eox.at/services/eoxhub-gateway/cubes-and-clouds/traefik-dask-gateway/clusters/cubes-and-clouds.2c86221c2f1a4c72acb054d2ad2da70f/status\u003c/a\u003e\n                \u003c/td\u003e\n                \u003ctd style=\"text-align: left;\"\u003e\u003c/td\u003e\n            \u003c/tr\u003e\n        \n\n        \u003c/table\u003e\n\n        \n\n        \n            \u003cdetails\u003e\n            \u003csummary style=\"margin-bottom: 20px;\"\u003e\u003ch3 style=\"display: inline;\"\u003eCluster Info\u003c/h3\u003e\u003c/summary\u003e\n            \u003cdiv style='background-color: #f2f2f2; display: inline-block; padding: 10px; border: 1px solid #999999;'\u003e\n  \u003ch3\u003eGatewayCluster\u003c/h3\u003e\n  \u003cul\u003e\n    \u003cli\u003e\u003cb\u003eName: \u003c/b\u003ecubes-and-clouds.2c86221c2f1a4c72acb054d2ad2da70f\n    \u003cli\u003e\u003cb\u003eDashboard: \u003c/b\u003e\u003ca href='https://hub.earthcode.eox.at/services/eoxhub-gateway/cubes-and-clouds/traefik-dask-gateway/clusters/cubes-and-clouds.2c86221c2f1a4c72acb054d2ad2da70f/status' target='_blank'\u003ehttps://hub.earthcode.eox.at/services/eoxhub-gateway/cubes-and-clouds/traefik-dask-gateway/clusters/cubes-and-clouds.2c86221c2f1a4c72acb054d2ad2da70f/status\u003c/a\u003e\n  \u003c/ul\u003e\n\u003c/div\u003e\n\n            \u003c/details\u003e\n        \n\n    \u003c/div\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cClient: 'tls://172.16.0.66:8786' processes=0 threads=0, memory=0 B\u003e","content_type":"text/plain"}}},"children":[],"key":"YbJU9t2b1Q"}],"visibility":"show","key":"v72Yss9lRV"}],"visibility":"show","key":"Td0o2Sseli"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspecting the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bKFGYQFqVr"},{"type":"inlineCode","value":"Cluster Info","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MO4yUweNDY"},{"type":"text","value":" section above gives us information about the created cluster: we have 2 or 4 workers and the same number of threads (e.g. 1 thread per worker).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Lf9wC0QQsx"}],"key":"REN9PjN3tf"}],"key":"IIgiJEUSH7"},{"type":"block","kind":"notebook-content","children":[{"type":"div","class":"alert alert-warning","children":[{"type":"emphasis","children":[],"key":"oVFQSRl6PV"},{"type":"strong","children":[{"type":"text","value":"Go further","key":"ZqHjvWNKhE"}],"key":"peEuYUSPLH"},{"type":"break","key":"WUiA1SitKB"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You can also create a local cluster with the `LocalCluster` constructor and use `n_workers` and `threads_per_worker` to manually specify the number of processes and threads you want to use. For instance, we could use `n_workers=2` and `threads_per_worker=2`.","key":"TAQ4CuwseN"}],"key":"gnz5xAJKLI"}],"key":"Jk9kjwdayf"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This is sometimes preferable (in terms of performance), or when you run this tutorial on your PC, you can avoid dask to use all your resources you have on your PC!","key":"BRxfCve3Q4"}],"key":"CSaq6gi5bn"}],"key":"Y8Q2VQmFFG"}],"key":"jiv0iD3uaH"}],"key":"ECh9Gux15V"}],"key":"hHNgOkAWwQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Dashboard","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kNpWtDdea9"}],"identifier":"dask-dashboard","label":"Dask Dashboard","html_id":"dask-dashboard","implicit":true,"key":"khOt5Ju7z0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask comes with a really handy interface: the Dask Dashboard. It is a web interface that you can open in a separate tab of your browser.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"f3BJHjqQEJ"}],"key":"Lc1x2xLrLQ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will learn how to use it through the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TC8mW6Z1lZ"},{"type":"link","url":"https://github.com/dask/dask-labextension","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"dask jupyterlab extension","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pu0rFxQxYs"}],"urlSource":"https://github.com/dask/dask-labextension","error":true,"key":"GgASEyXoLp"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"d018VqWMJj"}],"key":"MWLtB7Gk0P"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"To use Dask Dashboard through jupyterlab extension,\nyou just need to click on the orange icon shown in the following figure,","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VTjNjq8Gcm"}],"key":"JR5mQAjkup"},{"type":"image","url":"/cubes-and-clouds/build/13301335bb11e404715202634c4bb6c0.png","alt":"Dask.array","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DTt1gj0l7D","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dashboardlink.png"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"You can click several buttons marked with blue arrows in the following images, and then drag and drop them wherever you want.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"xaVAjo9JmN"}],"key":"AukHiQIWMy"},{"type":"image","url":"/cubes-and-clouds/build/7cd9c2228eabbba5874d10af09e69bf8.png","alt":"Dask.array","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"x6aopkafrY","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/dasklab.png"},{"type":"image","url":"/cubes-and-clouds/build/4ab5130b44730782abf1860db4574b53.png","alt":"Dask.array","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Nvy7XK158X","urlSource":"https://raw.githubusercontent.com/EO-College/cubes-and-clouds/refs/heads/main/lectures/2.4_formats_and_performance/exercises/assets/exampledasklab.png"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"It’s really helpful to understand your computation and how it’s distributed.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"fE6d47nTnU"}],"key":"ssN7qtzxCg"}],"key":"hemCiVQUot"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dask Distributed computations on our dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"boQFHF5KEa"}],"identifier":"dask-distributed-computations-on-our-dataset","label":"Dask Distributed computations on our dataset","html_id":"dask-distributed-computations-on-our-dataset","implicit":true,"key":"NP5P6aegW0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s open the Zarr dataset we’ve prepared in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nVxf6Lqa6u"},{"type":"link","url":"/lectures/formats-and-performance/exercises/chunking","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"previous chunking excersise","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z9Milzip5z"}],"urlSource":"./24_chunking.ipynb","dataUrl":"/lectures.formats-and-performance.exercises.chunking.json","internal":true,"protocol":"file","key":"jKqAqgIVPa"},{"type":"text","value":", select a single location over time, visualize the task graph generated by Dask, and observe the Dask Dashboard.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LTvtxVAfof"}],"key":"eBe7uRBUPH"}],"key":"JHb9BTnAKA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nndvi = xr.open_zarr('test.zarr')\nndvi","visibility":"show","key":"YUG8TYkZBW"},{"type":"outputs","id":"2FrKCt7JCADnaZozp1-BU","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"812b9c096b38c45cef792f5a74133dc6","path":"/cubes-and-clouds/build/812b9c096b38c45cef792f5a74133dc6.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e Size: 211MB\nDimensions:                                  (time: 3, y: 3341, x: 2630)\nCoordinates: (12/33)\n    constellation                            \u003cU10 40B ...\n    created                                  (time) \u003cU24 288B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:boa_offset_applied           (time) bool 3B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:payload_id                   (time) \u003cU74 888B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:s3_path                      (time) \u003cU79 948B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    eo:cloud_cover                           (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    ...                                       ...\n  * time                                     (time) datetime64[ns] 24B 2019-0...\n    updated                                  (time) \u003cU24 288B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    view:sun_azimuth                         (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    view:sun_elevation                       (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n  * x                                        (x) float64 21kB 6.543e+05 ... 6...\n  * y                                        (y) float64 27kB 5.202e+06 ... 5...\nData variables:\n    data                                     (time, y, x) float64 211MB dask.array\u003cchunksize=(1, 3341, 2630), meta=np.ndarray\u003e\n    spatial_ref                              int64 8B ...","content_type":"text/plain"}}},"children":[],"key":"kNlr05sMoo"}],"visibility":"show","key":"sNcX19r0kq"}],"visibility":"show","key":"cxrdftLElX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ndvi['data'].mean(dim='x')","visibility":"show","key":"viVqDJMaRP"},{"type":"outputs","id":"UZ-AoN_f1fsmDjdRGsNAQ","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"4f804197ed6af80e3f9198f23c247013","path":"/cubes-and-clouds/build/4f804197ed6af80e3f9198f23c247013.html"},"text/plain":{"content":"\u003cxarray.DataArray 'data' (time: 3, y: 3341)\u003e Size: 80kB\ndask.array\u003cmean_agg-aggregate, shape=(3, 3341), dtype=float64, chunksize=(1, 3341), chunktype=numpy.ndarray\u003e\nCoordinates: (12/32)\n    constellation                            \u003cU10 40B ...\n    created                                  (time) \u003cU24 288B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:boa_offset_applied           (time) bool 3B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:payload_id                   (time) \u003cU74 888B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    earthsearch:s3_path                      (time) \u003cU79 948B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    eo:cloud_cover                           (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    ...                                       ...\n    s2:sequence                              (time) \u003cU1 12B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n  * time                                     (time) datetime64[ns] 24B 2019-0...\n    updated                                  (time) \u003cU24 288B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    view:sun_azimuth                         (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n    view:sun_elevation                       (time) float64 24B dask.array\u003cchunksize=(3,), meta=np.ndarray\u003e\n  * y                                        (y) float64 27kB 5.202e+06 ... 5...","content_type":"text/plain"}}},"children":[],"key":"XBqFH7kjPq"}],"visibility":"show","key":"AhUBp6bvMi"}],"visibility":"show","key":"Fa6rawAswj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Did you notice something on the Dask Dashboard when running the two previous cells?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b5DTxnHd6C"}],"identifier":"did-you-notice-something-on-the-dask-dashboard-when-running-the-two-previous-cells","label":"Did you notice something on the Dask Dashboard when running the two previous cells?","html_id":"did-you-notice-something-on-the-dask-dashboard-when-running-the-two-previous-cells","implicit":true,"key":"Ff7kDE3lVF"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We didn’t actually ‘compute’ anything. Instead, we built a Dask task graph, with its size indicated as a count above, but we didn’t ask Dask to return a result.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tUkSa6UlFN"}],"key":"tsbp9mXA8C"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"You can check the ‘Dask graph’ to see how many layers it contains, which will help you estimate the complexity of your computation.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dEmVuE9RDT"}],"key":"LtO2qlXrKH"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"It shows that you have ‘4 graphs’. This can be optimized in the following steps.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xQu2He8D8T"}],"key":"tCjO5hKPRP"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Let’s try to plot the Dask graph before computation and understand what the Dask workers will do to compute the result we asked for.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"N4zam6v6DB"}],"key":"iFMWELjelE"}],"key":"YMfYVfopdq"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ndvi['data'].mean(dim='x').data.visualize()","visibility":"show","key":"iUJcd0JaJ5"},{"type":"outputs","id":"TQrzHfxjEj3k6PcmDzC7-","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a78728d610c2e609a5f1add6ab18f2e7","path":"/cubes-and-clouds/build/a78728d610c2e609a5f1add6ab18f2e7.png"},"text/plain":{"content":"\u003cIPython.core.display.Image object\u003e","content_type":"text/plain"}}},"children":[],"key":"KfwAbPKzyM"}],"visibility":"show","key":"J5fksYC27u"}],"visibility":"show","key":"kGRcAuFUIU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s average the time dimension and see how it differs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"y3oacUlyaA"}],"key":"ar0nBABycS"}],"key":"CHJBsPDAhR"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ndvi['data'].mean(dim='time').data.visualize()","visibility":"show","key":"VuWIwdEoIh"},{"type":"outputs","id":"q-qAKOTzg2ySI4p_IetAL","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"34ac92f8bda7f141afe66629fa929a72","path":"/cubes-and-clouds/build/34ac92f8bda7f141afe66629fa929a72.png"},"text/plain":{"content":"\u003cIPython.core.display.Image object\u003e","content_type":"text/plain"}}},"children":[],"key":"ZnXym4012V"}],"visibility":"show","key":"KRJ0KSPGjl"}],"visibility":"show","key":"L0H6ik10jx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s compute on the Dask workers","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pGiMJrenvl"}],"identifier":"lets-compute-on-the-dask-workers","label":"Let’s compute on the Dask workers","html_id":"lets-compute-on-the-dask-workers","implicit":true,"key":"EkLvuGILjS"}],"key":"nnH04cfW8R"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ndvi['data'].mean(dim='time').compute()","visibility":"show","key":"jo0eNI02b5"},{"type":"outputs","id":"aTSZ2yXbBf9IRzcr0-Z6s","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"347413654911640ae6eb0465e76f4112","path":"/cubes-and-clouds/build/347413654911640ae6eb0465e76f4112.html"},"text/plain":{"content":"\u003cxarray.DataArray 'data' (y: 3341, x: 2630)\u003e Size: 70MB\narray([[nan, nan, nan, ..., nan, nan, nan],\n       [nan, nan, nan, ..., nan, nan, nan],\n       [nan, nan, nan, ..., nan, nan, nan],\n       ...,\n       [nan, nan, nan, ..., nan, nan, nan],\n       [nan, nan, nan, ..., nan, nan, nan],\n       [nan, nan, nan, ..., nan, nan, nan]], shape=(3341, 2630))\nCoordinates:\n    constellation                            \u003cU10 40B 'sentinel-2'\n    epsg                                     int64 8B 32632\n    gsd                                      int64 8B 10\n    instruments                              \u003cU3 12B 'msi'\n    mgrs:latitude_band                       \u003cU1 4B 'T'\n    mgrs:utm_zone                            int64 8B 32\n    proj:epsg                                int64 8B 32632\n    s2:datatake_type                         \u003cU8 32B 'INS-NOBS'\n    s2:product_type                          \u003cU7 28B 'S2MSI2A'\n    s2:saturated_defective_pixel_percentage  int64 8B 0\n  * x                                        (x) float64 21kB 6.543e+05 ... 6...\n  * y                                        (y) float64 27kB 5.202e+06 ... 5...","content_type":"text/plain"}}},"children":[],"key":"ezTTmROtxy"}],"visibility":"show","key":"Tc7lFjZtnt"}],"visibility":"show","key":"Lf4AtxDPer"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calling compute on our Xarray object triggered the execution on Dask Cluster side.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CWKRy1HS4J"}],"key":"JoBTS0dY5z"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You should be able to see how Dask is working on Dask Dashboard.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QuC6Tg6DpN"}],"key":"o8kP7qbpan"}],"key":"g7s31TyXkR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s try a bigger computation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K7VD0RRQw5"}],"identifier":"lets-try-a-bigger-computation","label":"Let’s try a bigger computation","html_id":"lets-try-a-bigger-computation","implicit":true,"key":"po5BXyfSEA"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We will re-use the procedure we’ve learned in the previous chunking notebook.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bIvOnKkpOT"}],"key":"AZye4oOGU0"}],"key":"msy7ssvLCt"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"### Load data using stackstac (with specific chunk) \nimport stackstac\nimport pystac_client\nimport geopandas as gpd\nfrom shapely.geometry import mapping\nimport numpy as np\nimport warnings\nimport rioxarray\n\nwarnings.filterwarnings(\"ignore\")\nwarnings.simplefilter(\"ignore\", RuntimeWarning)\n\naoi = gpd.read_file('./assets/catchment_outline.geojson', crs=\"EPGS:4326\")\naoi_geojson = mapping(aoi.iloc[0].geometry)\nURL = \"https://earth-search.aws.element84.com/v1\"\ncatalog = pystac_client.Client.open(URL)\nitems = catalog.search(\n    intersects=aoi_geojson,\n    collections=[\"sentinel-2-l2a\"],\n    datetime=\"2019-02-01/2019-03-28\",\n    query= {\"proj:epsg\": dict(eq=32632)}\n).item_collection()\n\nds = stackstac.stack(items,\n                     assets=['red','nir'],\n                     chunksize=(1,2,1024,1024),\n                     epsg = 32632\n                    )\nds","visibility":"show","key":"RDb8nXqJ4J"},{"type":"outputs","id":"chzzry2ALtfj2XaMuKjo0","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"e4c7a9e28db50c01108386be5f6dc26e","path":"/cubes-and-clouds/build/e4c7a9e28db50c01108386be5f6dc26e.html"},"text/plain":{"content":"\u003cxarray.DataArray 'stackstac-aa62f8e6578d5768117ad9dea72fd911' (time: 56,\n                                                                band: 2,\n                                                                y: 83380,\n                                                                x: 15048)\u003e Size: 1TB\ndask.array\u003cfetch_raster_window, shape=(56, 2, 83380, 15048), dtype=float64, chunksize=(1, 2, 1024, 1024), chunktype=numpy.ndarray\u003e\nCoordinates: (12/52)\n  * time                                     (time) datetime64[ns] 448B 2019-...\n    id                                       (time) \u003cU24 5kB 'S2B_32TPT_20190...\n  * band                                     (band) \u003cU3 24B 'red' 'nir'\n  * x                                        (x) float64 120kB 5.982e+05 ... ...\n  * y                                        (y) float64 667kB 5.303e+06 ... ...\n    s2:high_proba_clouds_percentage          (time) object 448B 28.474605 ......\n    ...                                       ...\n    proj:centroid                            (time) object 448B None ... None\n    s2:tile_id                               (time) object 448B None ... None\n    view:azimuth                             (time) object 448B None ... None\n    proj:shape                               object 8B {10980}\n    gsd                                      int64 8B 10\n    epsg                                     int64 8B 32632\nAttributes:\n    spec:           RasterSpec(epsg=32632, bounds=(598150.5065312386, 5087469...\n    crs:            epsg:32632\n    transform:      | 7.68, 0.00, 598150.51|\\n| 0.00,-2.58, 5302980.29|\\n| 0....\n    resolution_xy:  (7.681990477386707, 2.584686340731679)","content_type":"text/plain"}}},"children":[],"key":"zlcVmYgB94"}],"visibility":"show","key":"pBjDRSVERV"}],"visibility":"show","key":"u52nf28rqR"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"By inspecting any of the variables in the representation above, you’ll see that the data array represents ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"plDb5sxvTK"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"over 188 GiB of data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qGV6tisXep"}],"key":"HGFo93gBF6"},{"type":"text","value":", which is much more than the available memory on this notebook server or the Dask Local Cluster we created earlier. But thanks to chunking, we can still analyze it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DXRKwfPM5R"}],"key":"ovbFS5xF90"}],"key":"we7NRjMZxw"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"## Computing the NDVI\ndef NDVI(data):\n    red = data.sel(band=\"red\")\n    nir = data.sel(band=\"nir\")\n    ndvi = (nir - red)/(nir + red)\n    return ndvi\n\nndvi_xr = NDVI(ds)\n\n## Clip the data\naoi_utm32 = aoi.to_crs(epsg=32632)\ngeom_utm32 = aoi_utm32.iloc[0]['geometry']\nndvi_xr.rio.write_crs(\"EPSG:32632\", inplace=True)\nndvi_xr.rio.set_nodata(np.nan, inplace=True)\nndvi_xr = ndvi_xr.rio.clip([geom_utm32])\nndvi_xr.rio.set_nodata(np.nan, inplace=True)\n\nndvi_xr = ndvi_xr.groupby(ndvi_xr.time.dt.floor('D')).max(skipna=True)\nndvi_xr = ndvi_xr.chunk({\"floor\": 1, \"y\": 2048, \"x\": 2048})\nndvi_xr","visibility":"show","key":"Krs3MgNtvH"},{"type":"outputs","id":"Pj6fDJVszprXcy2odbLu3","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"aafaa7b662530192335ef2d33a923252","path":"/cubes-and-clouds/build/aafaa7b662530192335ef2d33a923252.html"},"text/plain":{"content":"\u003cxarray.DataArray 'stackstac-aa62f8e6578d5768117ad9dea72fd911' (floor: 23,\n                                                                y: 12926,\n                                                                x: 3423)\u003e Size: 8GB\ndask.array\u003crechunk-merge, shape=(23, 12926, 3423), dtype=float64, chunksize=(1, 2048, 2048), chunktype=numpy.ndarray\u003e\nCoordinates: (12/15)\n  * x                                        (x) float64 27kB 6.543e+05 ... 6...\n  * y                                        (y) float64 103kB 5.202e+06 ... ...\n    proj:code                                \u003cU10 40B 'EPSG:32632'\n    s2:datatake_type                         \u003cU8 32B 'INS-NOBS'\n    constellation                            \u003cU10 40B 'sentinel-2'\n    instruments                              \u003cU3 12B 'msi'\n    ...                                       ...\n    mgrs:utm_zone                            int64 8B 32\n    proj:shape                               object 8B {10980}\n    gsd                                      int64 8B 10\n    epsg                                     int64 8B 32632\n    spatial_ref                              int64 8B 0\n  * floor                                    (floor) datetime64[ns] 184B 2019...\nAttributes:\n    _FillValue:  nan","content_type":"text/plain"}}},"children":[],"key":"AtgqSbWaSu"}],"visibility":"show","key":"KIAm91gxtU"}],"visibility":"show","key":"rBxncPBtfi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Perform the same steps as in the previous exercise to convert to a Dataset and clean out problematic attributes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EZefqPfJRM"}],"key":"PVYh7pCZ61"}],"key":"fWDz6kaeBP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ndvi_xr = ndvi_xr.to_dataset(name='data')\n\ndef remove_attrs(obj, to_remove):\n    new = obj.copy()\n    new.attrs = {k: v for k, v in obj.attrs.items() if k not in to_remove}\n    return new\n\ndef encode(obj):\n    object_coords = [name for name, coord in obj.coords.items() if coord.dtype.kind == \"O\"]\n    return obj.drop_vars(object_coords).pipe(remove_attrs, [\"spec\", \"transform\"])\n\nndvi_xr = ndvi_xr.pipe(encode)","key":"wfnUx7QAGr"},{"type":"outputs","id":"kyt12bBmdHV13cX6Xgc-0","children":[],"key":"dvHVuc7yUA"}],"key":"NrSekcRdQb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dask.diagnostics import ProgressBar\nndvi_w = ndvi_xr.persist()\nwith ProgressBar():\n    ndvi_w.to_zarr(\"ndvi.zarr\", mode=\"w\", consolidated=True)","key":"jI6N5Mj8HH"},{"type":"outputs","id":"ASuvEcjLIB3Ge36xO-x_l","children":[{"type":"output","jupyter_data":{"ename":"FutureCancelledError","evalue":"finalize-hlgfinalizecompute-7bcd06d0559948638d7f848a63af28f9 cancelled for reason: scheduler-connection-lost.\nClient lost the connection to the scheduler. Please check your connection and re-run your work.","output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mFutureCancelledError\u001b[39m                      Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[11]\u001b[39m\u001b[32m, line 4\u001b[39m\n\u001b[32m      2\u001b[39m ndvi_w = ndvi_xr.persist()\n\u001b[32m      3\u001b[39m \u001b[38;5;28;01mwith\u001b[39;00m ProgressBar():\n\u001b[32m----\u003e \u001b[39m\u001b[32m4\u001b[39m     \u001b[43mndvi_w\u001b[49m\u001b[43m.\u001b[49m\u001b[43mto_zarr\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mndvi.zarr\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mw\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mTrue\u001b[39;49;00m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/core/dataset.py:2364\u001b[39m, in \u001b[36mDataset.to_zarr\u001b[39m\u001b[34m(self, store, chunk_store, mode, synchronizer, group, encoding, compute, consolidated, append_dim, region, safe_chunks, align_chunks, storage_options, zarr_version, zarr_format, write_empty_chunks, chunkmanager_store_kwargs)\u001b[39m\n\u001b[32m   2186\u001b[39m \u001b[38;5;250m\u001b[39m\u001b[33;03m\"\"\"Write dataset contents to a zarr group.\u001b[39;00m\n\u001b[32m   2187\u001b[39m \n\u001b[32m   2188\u001b[39m \u001b[33;03mZarr chunks are determined in the following way:\u001b[39;00m\n\u001b[32m   (...)\u001b[39m\u001b[32m   2360\u001b[39m \u001b[33;03m    The I/O user guide, with more details and examples.\u001b[39;00m\n\u001b[32m   2361\u001b[39m \u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m   2362\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mxarray\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mbackends\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mapi\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m to_zarr\n\u001b[32m-\u003e \u001b[39m\u001b[32m2364\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mto_zarr\u001b[49m\u001b[43m(\u001b[49m\u001b[43m  \u001b[49m\u001b[38;5;66;43;03m# type: ignore[call-overload,misc]\u001b[39;49;00m\n\u001b[32m   2365\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m   2366\u001b[39m \u001b[43m    \u001b[49m\u001b[43mstore\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2367\u001b[39m \u001b[43m    \u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m=\u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2368\u001b[39m \u001b[43m    \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2369\u001b[39m \u001b[43m    \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2370\u001b[39m \u001b[43m    \u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m=\u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2371\u001b[39m \u001b[43m    \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m=\u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2372\u001b[39m \u001b[43m    \u001b[49m\u001b[43mencoding\u001b[49m\u001b[43m=\u001b[49m\u001b[43mencoding\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2373\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m=\u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2374\u001b[39m \u001b[43m    \u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m=\u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2375\u001b[39m \u001b[43m    \u001b[49m\u001b[43mappend_dim\u001b[49m\u001b[43m=\u001b[49m\u001b[43mappend_dim\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2376\u001b[39m \u001b[43m    \u001b[49m\u001b[43mregion\u001b[49m\u001b[43m=\u001b[49m\u001b[43mregion\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2377\u001b[39m \u001b[43m    \u001b[49m\u001b[43msafe_chunks\u001b[49m\u001b[43m=\u001b[49m\u001b[43msafe_chunks\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2378\u001b[39m \u001b[43m    \u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2379\u001b[39m \u001b[43m    \u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2380\u001b[39m \u001b[43m    \u001b[49m\u001b[43mwrite_empty_chunks\u001b[49m\u001b[43m=\u001b[49m\u001b[43mwrite_empty_chunks\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2381\u001b[39m \u001b[43m    \u001b[49m\u001b[43mchunkmanager_store_kwargs\u001b[49m\u001b[43m=\u001b[49m\u001b[43mchunkmanager_store_kwargs\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   2382\u001b[39m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/backends/api.py:2464\u001b[39m, in \u001b[36mto_zarr\u001b[39m\u001b[34m(dataset, store, chunk_store, mode, synchronizer, group, encoding, compute, consolidated, append_dim, region, safe_chunks, align_chunks, storage_options, zarr_version, zarr_format, write_empty_chunks, chunkmanager_store_kwargs)\u001b[39m\n\u001b[32m   2462\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m   2463\u001b[39m     dump_to_store(dataset, zstore, writer, encoding=encoding)\n\u001b[32m-\u003e \u001b[39m\u001b[32m2464\u001b[39m     writes = \u001b[43mwriter\u001b[49m\u001b[43m.\u001b[49m\u001b[43msync\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m   2465\u001b[39m \u001b[43m        \u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m=\u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mchunkmanager_store_kwargs\u001b[49m\u001b[43m=\u001b[49m\u001b[43mchunkmanager_store_kwargs\u001b[49m\n\u001b[32m   2466\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   2467\u001b[39m \u001b[38;5;28;01mfinally\u001b[39;00m:\n\u001b[32m   2468\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m compute:\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/backends/common.py:412\u001b[39m, in \u001b[36mArrayWriter.sync\u001b[39m\u001b[34m(self, compute, chunkmanager_store_kwargs)\u001b[39m\n\u001b[32m    409\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m chunkmanager_store_kwargs \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    410\u001b[39m     chunkmanager_store_kwargs = {}\n\u001b[32m--\u003e \u001b[39m\u001b[32m412\u001b[39m delayed_store = \u001b[43mchunkmanager\u001b[49m\u001b[43m.\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    413\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43msources\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    414\u001b[39m \u001b[43m    \u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mtargets\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    415\u001b[39m \u001b[43m    \u001b[49m\u001b[43mlock\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mlock\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    416\u001b[39m \u001b[43m    \u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m=\u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    417\u001b[39m \u001b[43m    \u001b[49m\u001b[43mflush\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mTrue\u001b[39;49;00m\u001b[43m,\u001b[49m\n\u001b[32m    418\u001b[39m \u001b[43m    \u001b[49m\u001b[43mregions\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mregions\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    419\u001b[39m \u001b[43m    \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mchunkmanager_store_kwargs\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    420\u001b[39m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    421\u001b[39m \u001b[38;5;28mself\u001b[39m.sources = []\n\u001b[32m    422\u001b[39m \u001b[38;5;28mself\u001b[39m.targets = []\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/xarray/namedarray/daskmanager.py:247\u001b[39m, in \u001b[36mDaskManager.store\u001b[39m\u001b[34m(self, sources, targets, **kwargs)\u001b[39m\n\u001b[32m    239\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mstore\u001b[39m(\n\u001b[32m    240\u001b[39m     \u001b[38;5;28mself\u001b[39m,\n\u001b[32m    241\u001b[39m     sources: Any | Sequence[Any],\n\u001b[32m    242\u001b[39m     targets: Any,\n\u001b[32m    243\u001b[39m     **kwargs: Any,\n\u001b[32m    244\u001b[39m ) -\u003e Any:\n\u001b[32m    245\u001b[39m     \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mdask\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01marray\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m store\n\u001b[32m--\u003e \u001b[39m\u001b[32m247\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mstore\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    248\u001b[39m \u001b[43m        \u001b[49m\u001b[43msources\u001b[49m\u001b[43m=\u001b[49m\u001b[43msources\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    249\u001b[39m \u001b[43m        \u001b[49m\u001b[43mtargets\u001b[49m\u001b[43m=\u001b[49m\u001b[43mtargets\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    250\u001b[39m \u001b[43m        \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    251\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/dask/array/core.py:1221\u001b[39m, in \u001b[36mstore\u001b[39m\u001b[34m(***failed resolving arguments***)\u001b[39m\n\u001b[32m   1218\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m return_stored:\n\u001b[32m   1219\u001b[39m     \u001b[38;5;28;01mimport\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mdask\u001b[39;00m\n\u001b[32m-\u003e \u001b[39m\u001b[32m1221\u001b[39m     \u001b[43mdask\u001b[49m\u001b[43m.\u001b[49m\u001b[43mcompute\u001b[49m\u001b[43m(\u001b[49m\u001b[43marrays\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1222\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m\n\u001b[32m   1223\u001b[39m \u001b[38;5;28;01melse\u001b[39;00m:\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/dask/base.py:681\u001b[39m, in \u001b[36mcompute\u001b[39m\u001b[34m(traverse, optimize_graph, scheduler, get, *args, **kwargs)\u001b[39m\n\u001b[32m    678\u001b[39m     expr = expr.optimize()\n\u001b[32m    679\u001b[39m     keys = \u001b[38;5;28mlist\u001b[39m(flatten(expr.__dask_keys__()))\n\u001b[32m--\u003e \u001b[39m\u001b[32m681\u001b[39m     results = \u001b[43mschedule\u001b[49m\u001b[43m(\u001b[49m\u001b[43mexpr\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mkeys\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    683\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m repack(results)\n\n\u001b[36mFile \u001b[39m\u001b[32m/home/conda/cubes-and-clouds/7f8203a7-1770295160-39-pangeo-dask/lib/python3.11/site-packages/distributed/client.py:2420\u001b[39m, in \u001b[36mClient._gather\u001b[39m\u001b[34m(self, futures, errors, direct, local_worker)\u001b[39m\n\u001b[32m   2418\u001b[39m     exception = st.exception\n\u001b[32m   2419\u001b[39m     traceback = st.traceback\n\u001b[32m-\u003e \u001b[39m\u001b[32m2420\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m exception.with_traceback(traceback)\n\u001b[32m   2421\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m errors == \u001b[33m\"\u001b[39m\u001b[33mskip\u001b[39m\u001b[33m\"\u001b[39m:\n\u001b[32m   2422\u001b[39m     bad_keys.add(key)\n\n\u001b[31mFutureCancelledError\u001b[39m: finalize-hlgfinalizecompute-7bcd06d0559948638d7f848a63af28f9 cancelled for reason: scheduler-connection-lost.\nClient lost the connection to the scheduler. Please check your connection and re-run your work."},"children":[],"key":"dyqXnQuO1d"}],"key":"ezTat6VgdA"}],"key":"ZVFFyL2LtF"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\nimport numpy\nwith np.errstate(all=\"ignore\"):\n    ndvi_xr.to_zarr('ndvi.zarr',mode='w')","visibility":"show","key":"H9glM4na3U"},{"type":"outputs","id":"gTvnX4NrhEECwKi12HOge","children":[],"visibility":"show","key":"JLaYWMAgQj"}],"visibility":"show","key":"HuWkw1CjKy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"omTh46KqMw"},{"type":"outputs","id":"lV9Nu2tiNXQIHEx-X4isi","children":[],"key":"LXXWxzDYER"}],"key":"aaF57TJcbu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Close client to terminate local dask cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SrFyK6xgDo"}],"identifier":"close-client-to-terminate-local-dask-cluster","label":"Close client to terminate local dask cluster","html_id":"close-client-to-terminate-local-dask-cluster","implicit":true,"key":"b2vldwbBTY"}],"key":"Qj3MeKlGe4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pV4vlaharX"},{"type":"inlineCode","value":"Client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"abyQ06QJTV"},{"type":"text","value":" and associated ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j6d8Y7oULF"},{"type":"inlineCode","value":"LocalCluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jhWu09AIkV"},{"type":"text","value":" object will be automatically closed when your Python session ends. When using Jupyter notebooks, we recommend to close it explicitely whenever you are done with your local Dask cluster.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UIeYuHgKyQ"}],"key":"IF8i3IMVqt"}],"key":"Zi6gA0N7xi"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"client.close()","visibility":"show","key":"aOGBba1SBd"},{"type":"outputs","id":"rxMingwlE45CUUh-PdFZw","children":[],"visibility":"show","key":"jspL4Z5zUN"}],"visibility":"show","key":"rJPuc0QiVO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Conclusion","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KbuRWOB1Ww"}],"identifier":"conclusion","label":"Conclusion","html_id":"conclusion","implicit":true,"key":"I7WRZYutLh"}],"key":"JGrs1n95SI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In this exercise, we created a Dask cluster on a single machine, which is equivalent to vertical scaling as described in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lPdNwoWjXL"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.4 Formats and Performance","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SM5NTUVF3R"}],"key":"F6GT0RcxIC"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g3d3oNmoE1"}],"key":"D28CIu6slB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"However, the speedup is limited to the resources of your single machine. This is where horizontal scaling comes in. By adding resources from other machines, you can expand your computing power! In the case of dask, you can use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BZTbO41Acc"},{"type":"link","url":"https://gateway.dask.org/#dask-gateway","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask Gatway","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NZJ8p8H23A"}],"urlSource":"https://gateway.dask.org/#dask-gateway","key":"LDoGrQ8GqR"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mLVnZRLaBW"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qxFhnUq8om"},{"type":"text","value":"The Pangeo community hosts tutorials using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vyLPUL4R0N"},{"type":"link","url":"'https://pangeo-eosc.vm.fedcloud.eu/hub/'","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Pangeo@EOSC","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"D03Ih2JQy0"}],"urlSource":"'https://pangeo-eosc.vm.fedcloud.eu/hub/'","key":"LObJOb3YhO"},{"type":"text","value":". With the Pangeo EOSC deployment, you can learn how to use Dask Gateway to manage Dask clusters over Kubernetes, allowing us to run our data analysis in parallel, e.g. distribute tasks across multiple workers.\nIf you are a user of HPC center, you can also consider using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nFLrkfomOC"},{"type":"link","url":"https://docs.dask.org/en/stable/deploying-hpc.html#high-performance-computers","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dask-jobque","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Dr3GkFEbtT"}],"urlSource":"https://docs.dask.org/en/stable/deploying-hpc.html#high-performance-computers","key":"bczwBWEW9g"},{"type":"text","value":" or Dask HPC for this.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nFaVmHCJmJ"}],"key":"ujGicCSa5q"}],"key":"BJ2b6be0qO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"Ur9iIHqYua"},{"type":"outputs","id":"aQA0M7WpgyLJAvty-xlax","children":[],"key":"cri92nuMmj"}],"key":"PAsPOGQIaM"}],"key":"G7Zv8RlEbW"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"2.4 Data Chunking with Pangeo","url":"/lectures/formats-and-performance/exercises/chunking","group":"Data formats for achieving scalability"},"next":{"title":"2.4 Formats and Performance","url":"/lectures/formats-and-performance/exercises/energy-consumption","group":"Data formats for achieving scalability"}}},"domain":"http://localhost:3000"},"project":{"subject":"Cubes and Clouds learning materials","title":"Cubes and Clouds Notebooks","description":"Collection of Cubes and Clouds learning notebooks","github":"https://github.com/EO-college/cubes-and-clouds","id":"7095e86f-a94c-4858-b97b-80694fdbcdf1","thumbnail":"/cubes-and-clouds/build/4e7b95cc5159f11ae65e2049a64650a6.svg","exports":[],"bibliography":[],"index":"readme","pages":[{"slug":"contributing","title":"How to contribute","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"contributors","title":"Contributors","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bee0df1dcfe29799901d54c333adae56.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"lectures.readme","title":"Lectures","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"title":"Setup","level":2},{"slug":"lectures.introduction.introduction","title":"Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/864d3fc75ed1a08ac2d4c8f21d9d6a63.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.introduction.exercises.login","title":"0. Introduction","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Concepts","level":2},{"slug":"lectures.intro-platform.intro-platform","title":"Earth Observation cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/b334c40d1c998a2fb3e79e903892672d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-cube.data-cube","title":"What is a data cube?","description":"","date":"","thumbnail":"/cubes-and-clouds/build/04b2802f47f308fa6a646bc15a8fe881.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceandfair","title":"Open Science and the FAIR Principles","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3c3f883a861697088c44018dfa0c01af.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.openscience.openscienceineo","title":"The Open Science Journey - Open Science in geospatial, EO and EO cloud platforms","description":"","date":"","thumbnail":"/cubes-and-clouds/build/d4d5badaaff454a73f72620f2ac36c2e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.openscience.opendataopensource","title":"Open Data and Open Source Software","description":"","date":"","thumbnail":"/cubes-and-clouds/build/bff8617b237519f0cffd390773f82d2d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Discovery and metadata","level":2},{"slug":"lectures.data-discovery.data-discovery","title":"Data Discovery","description":"","date":"","thumbnail":"/cubes-and-clouds/build/3f9ff18207bbea501aede31c88cde0e5.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.data-properties","title":"Data Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/stac_standartization-08486cbd2d486f82b036201d3747b990.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-properties.exercises.data-properties","title":"2.2 Data Discovery \u0026 Properties","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Data access with OpenEO","level":2},{"slug":"lectures.data-access.data-access","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing OpenEO Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-reduce","title":"2.3 Data Access and Basic Processing OpenEO Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-filter","title":"2.3 Data Access and Basic Processing OpenEO Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-resample","title":"2.3 Data Access and Basic Processing OpenEO Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing OpenEO Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.openeo.openeo-data-access-apply","title":"2.3 Data Access and Basic Processing OpenEO Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data access with pangeo","level":2},{"slug":"lectures.data-access.data-access-1","title":"Access EO Data from the Cloud","description":"","date":"","thumbnail":"/cubes-and-clouds/build/dc_filter-0938ddbbb3e2d6e5900ead3c9e967ea9.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-lazy-loading","title":"2.3 Data Access and Basic Processing Pangeo Lazy Loading","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-reduce","title":"2.3 Data Access and Basic Processing Pangeo Reduce","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-filter","title":"2.3 Data Access and Basic Processing Pangeo Filter","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-resample","title":"2.3 Data Access and Basic Processing Pangeo Resample","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-aggregate","title":"2.3 Data Access and Basic Processing Pangeo Aggregate","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-access.exercises.pangeo.pangeo-data-access-apply","title":"2.3 Data Access and Basic Processing Pangeo Apply","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Data formats for achieving scalability","level":2},{"slug":"lectures.formats-and-performance.formats-and-performance","title":"Data Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/96fdc48bce5685dcda930053ff412281.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.formats-and-performance.exercises.chunking","title":"2.4 Data Chunking with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.dask","title":"2.4 Scaling with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.formats-and-performance.exercises.energy-consumption","title":"2.4 Formats and Performance","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Process \u0026 Share","level":2},{"slug":"lectures.data-processing.data-processing","title":"3.1 Data Processing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/fe97d8f264069b8e4340c6b6ddcdf54e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-processing.exercises.data-processing-openeo","title":"3.1 Data Processing OpenEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.data-processing-pangeo","title":"3.1 Data Processing Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-stac","title":"3.1 Data Processing STAC","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-processing.exercises.alternatives.data-processing-openeo-platform","title":"3.1 Data Processing OpenEO Platform","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.validation","title":"Validation","description":"","date":"","thumbnail":"/cubes-and-clouds/build/distribution_map-919a85a31be922540a1aca72038c7b60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.validation.exercises.validation-openeo","title":"3.2 Validation of the results with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.validation.exercises.validation-pangeo","title":"3.2 Validation of the results with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.data-sharing","title":"3.3 Data Sharing","description":"","date":"","thumbnail":"/cubes-and-clouds/build/4066423c8fb88d808f30ad74224294b4.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"slug":"lectures.data-sharing.exercises.data-sharing-openeo","title":"3.3 Data Sharing with openEO","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"slug":"lectures.data-sharing.exercises.data-sharing-pangeo","title":"3.3 Data Sharing with Pangeo","description":"","date":"","thumbnail":"/cubes-and-clouds/build/56b77b9fff7f39fece234cf0910cdb55.svg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/cubes-and-clouds/build/manifest-3595279D.js";
import * as route0 from "/cubes-and-clouds/build/root-SIO6LUTY.js";
import * as route1 from "/cubes-and-clouds/build/routes/$-PRP77N34.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/cubes-and-clouds/build/entry.client-PCJPW7TK.js");</script></body></html>